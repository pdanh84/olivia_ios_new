<ion-header *ngIf="enableheader">
  <div no-padding>
    <ion-row class="row-h-56">
      <ion-col class="header-title">
        <label>Chuyến đi của tôi</label>
          <div [ngClass]="listMyTrips.length > 1 ? 'div-refresh-sort' : 'div-refresh'">
            <img *ngIf="listMyTrips.length > 1" (click)="openSort()" src="./assets/imgs/ic_sort.svg">
            <img (click)="doRefresh(0)" class="img-refresh" src="./assets/imgs/refresh.svg" >
             
          </div>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="loginuser" class="row-header-segment">
      <ion-segment [(ngModel)]="tabtrip" class="div-segment" mode="md">
        <ion-segment-button (click)="SelectNextTrip()" mode="md" class="cls-seg-button"
          value="nexttrip">
          Chuyến đi sắp tới{{ nexttripcounttext }}
        </ion-segment-button>
       
        <ion-segment-button (click)="SelectHistoryTrip()" mode="md" class="cls-seg-button" value="historytrip">
          Lịch sử chuyến đi
        </ion-segment-button>
      </ion-segment>
     
    </ion-row>
    <ion-row *ngIf="!loginuser">
      <ion-segment class="div-segment" mode="md">
        <ion-segment-button  mode="md" class="cls-seg-button" style="min-height: 8px;">
        </ion-segment-button>
       
      </ion-segment>
      <div class="text-label-segment"></div>
    </ion-row>
  </div>
</ion-header>
<ion-header *ngIf="!enableheader" style="background-color: #ffffff; height: 830px;">

</ion-header>
<ion-content #scrollArea class="order-content" [scrollEvents]="true">
  <div *ngIf="activeTabTrip ==1 && listMyTrips.length > 0 else emptydata" [ngClass]="(!loginuser|| listMyTrips.length ==0) ? 'div-order-content h100' : 'div-order-content '">
    <div [ngClass]="activeTabTrip == 1 ? 'card-background-page-mytrips' : 'card-background-page-mytrips p-history'">

      <ion-row *ngIf="!hasloaddata && activeTabTrip == 1">
        <div style="height: 100%;width:100%;padding: 16px">
          <ion-row>
            <ion-skeleton-text animated style="width:104px;margin: 0;height: 16px;"></ion-skeleton-text>
          </ion-row>
          <div>
            <div class="div-sk-detail">
              <ion-row class="row-item-hoteldetail-sk">
                <ion-col size="4" style="padding: 0">
                  <ion-skeleton-text animated
                    style="width:104px;height:104px;border-radius:6px;margin:0;margin-top:16px;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="8" class="col-description-hoteldetail-sk" style="line-height: 16px;padding-top: 0">
                  <ion-skeleton-text animated style="width: 50%;margin: 0;height: 16px;"></ion-skeleton-text>
                  <ion-skeleton-text animated style="width: 100%;margin: 0;margin-top:40px;height: 16px;">
                  </ion-skeleton-text>
                  <ion-skeleton-text animated style="width: 50%;margin: 0;margin-top:16px;height: 16px;">
                  </ion-skeleton-text>
                </ion-col>
              </ion-row>
              <ion-row class="row-item-description-sk">
                <ion-skeleton-text animated style="width: 104px;margin: 0;margin-top:32px;height: 16px;">
                </ion-skeleton-text>
                <ion-skeleton-text animated style="width: 83%;margin: 0;margin-top:16px;height: 16px;">
                </ion-skeleton-text>
                <ion-skeleton-text animated style="width: 67%;margin: 0;margin-top:16px;height: 16px;">
                </ion-skeleton-text>
                <ion-skeleton-text animated style="width: 100%;margin: 0;margin-top:16px;height: 16px;">
                </ion-skeleton-text>
                <ion-skeleton-text animated style="width: 67%;margin: 0;margin-top:16px;height: 16px;">
                </ion-skeleton-text>
              </ion-row>
              <ion-row class="row-item-button-sk">
                <ion-skeleton-text animated
                  style="width: 100%;margin: 0;height: 48px;border-radius: 6px;margin-top:48px"></ion-skeleton-text>
              </ion-row>
            </div>
          </div>

        </div>
      </ion-row>
      <div *ngIf="activeTabTrip == 1 && hasloaddata" style="height:100%">
        <div *ngIf="(listMyTrips && listMyTrips.length ==1 && listMyTrips[0].booking_type == 'TOUR' ) else bookingnormal">
          
          <div class="div-mytrip item-booking-tour-detail">
            <ion-item-group>
              <ion-row class="row-bkg-id">
                <ion-col size="8" class="col-bookingid" *ngIf="!listMyTrips[0].isFlyBooking else flybooking"><label class="label-bkg-id">Mã đơn hàng: <span
                      class="bkg-id">{{listMyTrips[0].booking_id}}</span></label>
                </ion-col>
                      <ng-template #flybooking>
                        <ion-col size="8" style="align-self: baseline;"><label  class="label-bkg-id">Mã đơn hàng: <span class="bkg-id">{{listMyTrips[0].booking_id}}</span></label></ion-col>
                    </ng-template> 

                  <ion-col size="4" class="col-bkg-status p-r-0 text-align-right"
                    *ngIf="listMyTrips[0].payment_status != 9 && (listMyTrips[0].payment_status != 3 && listMyTrips[0].payment_status != -2)">
                    <div *ngIf="(listMyTrips[0].payment_status == 1 || listMyTrips[0].payment_status == 5) else waitpayment">
                      <div><label class="label-text-paymented">Đã thanh toán</label></div>
                      <div class="m-top-4"><label class="label-text-processing ml-7" *ngIf="!listMyTrips[0].approve_date">(Chờ xử lý)</label></div>
                    </div>
                    <ng-template  #waitpayment>
                      <label *ngIf="listMyTrips[0].payment_status == 0 && listMyTrips[0].deliveryPaymentDisplay else notshowwaitpayment" class="lbl-waitpayment label-text-waitpayment">Chờ thanh toán</label>
                      <ng-template #notshowwaitpayment><label class="lbl-waitpayment label-text-waitpayment">Chờ thanh toán</label></ng-template>
                    </ng-template>
                  </ion-col>
                    
                </ion-row>
                <div class="div-split-color m-top-0"></div>
                    <div class="padding-0 m-bottom-16 h-100" *ngIf="!isFlyBooking && !listMyTrips[0].bookingOffType">
                      <div class="div-wrapimg">
                          <div *ngIf="listMyTrips[0].avatar else noavatar">
                            <!-- <img *ngIf="listMyTrips[0].avatar.indexOf('http') == -1" class="img-avatar" src="https:{{listMyTrips[0].avatar}}">
                            <img *ngIf="listMyTrips[0].avatar.indexOf('i.travelapi.com') != -1" class="img-avatar" src="{{listMyTrips[0].avatar}}"> -->
                            <img class="img-avatar" src="{{listMyTrips[0].avatar}}">
                          </div>
                          <ng-template #noavatar>
                            <img class="img-avatar" src="https://cdn1.ivivu.com/iVivu/2018/02/07/15/noimage-104x104.png">
                          </ng-template>
                        </div>
                        <div class="col-mytrip-text-description">
                           <!-- Tên tour -->
                          <div *ngIf="listMyTrips[0].hotel_name">
                            <ion-label class="label-tourname">{{listMyTrips[0].hotel_name}}
                              <span class="trip-star" *ngIf="listMyTrips[0].RatingStar"><img *ngIf="listMyTrips[0].RatingStar!=0" src={{listMyTrips[0].RatingStar}}></span>
                            </ion-label>
                          </div>
                          <div class="text-left">
                          <!-- Ngày khởi hành -->
                          <div *ngIf="listMyTrips[0].checkInDate" class="d-flex m-top-4">
                            <div class="div-icon"><img class="icon-tour-detail"  src="./assets/ic_tour/ic_date.svg"></div>
                            <div class="div-text">{{listMyTrips[0].tourCheckinDisplay}}</div>
                          </div>
                          <!-- Pax -->
                          <div *ngIf="listMyTrips[0].checkInDate" class="d-flex m-top-4">
                            <div class="div-icon"><img style="height:12px" src="./assets/imgs/ic_people.svg"></div>
                            <div class="div-text div-maxwidth">{{listMyTrips[0].totalPaxStr}} <span *ngIf="listMyTrips[0].textChildDisplay">{{listMyTrips[0].textChildDisplay}}</span><span *ngIf="listMyTrips[0].childAgesDisplay"> {{listMyTrips[0].childAgesDisplay}}</span></div>
                          </div>
        
                            </div>
                        </div>
                    </div>
         
        </ion-item-group>
        <div class="div-tour-pax" *ngIf="listMyTrips[0].tourListPax">
          <div *ngFor="let tourpax of listMyTrips[0].tourListPax; let idx = index">
            <div class="d-flex" >
              <div class="text-pax div-width-250">{{tourpax}}<span *ngIf="idx == 1 && listMyTrips[0].child_price_net">, {{listMyTrips[0].child_ages}}</span></div>
              <div class="text-price text-right div-width-100" *ngIf="idx == 0 && listMyTrips[0].adult_price_net">{{gf.convertNumberToString(listMyTrips[0].adult_price_net)}}</div>
              <div class="text-price text-right div-width-100" *ngIf="idx == 1 && listMyTrips[0].child_price_net">{{gf.convertNumberToString(listMyTrips[0].child_price_net)}}</div>
            </div>
             <!-- <div class="text-pax m-lr-5" *ngIf="idx == 1 && listMyTrips[0].child_price_net">{{listMyTrips[0].child_ages}}</div> -->
          </div>
          <div *ngIf="listMyTrips[0].deal_no && listMyTrips[0].promotionDiscountAmount" class="d-flex">
            <div class="text-pax div-width-250">Ưu đãi</div>
            <div class="text-price text-right div-width-100">{{gf.convertNumberToString(listMyTrips[0].promotionDiscountAmount)}}</div>
          </div>

          <div class="d-flex m-top-8" *ngIf="listMyTrips[0].payment_fee">
            <div class="text-pax div-width-250">
              Phí tiện ích
            </div>
            <div class="text-price text-right div-width-100">
              {{gf.convertNumberToString(listMyTrips[0].payment_fee)}} VND
            </div>
          </div>
          <div class="div-line-tour"></div>

          <div class="d-flex">
            <div class="text-pax div-width-150">Tổng cộng<span *ngIf="listMyTrips[0].payment_status == 5 || listMyTrips[0].payment_status == 1" class="text-bold"> - Đã thanh toán</span></div>
            
            <div class="text-price text-bold div-width-100 text-right">{{ gf.convertNumberToString(listMyTrips[0].amount_after_tax) }}</div>
          </div>
          <div class="text-pax m-lr-5" *ngIf="!listMyTrips[0].exclude_vat">(Giá đã bao gồm thuế & phí)</div>
        </div>

        <div *ngIf="listMyTrips[0].itemTourDetail else loadingtourdetail" class="div-item-tour-detail">
          
          <div *ngIf="listMyTrips[0].itemTourDetail.IncludePrice">
            <div class="d-flex" (click)="expandDiv(1)" id="contentIncludePrice">
              <div class="text-tour-detail-title div-width-100 m-top-16">Giá bao gồm</div>
              <div class="div-width-10 div-icon-tour " *ngIf="expandDivIncludePrice"><img src="./assets/ic_tour/collapse.svg"></div>
              <div class="div-width-10 div-icon-tour" *ngIf="!expandDivIncludePrice"><img src="./assets/ic_tour/expand.svg"></div>
            </div>
            <div class="div-wrap-includeprice div-collapse">
              <div *ngIf="listMyTrips[0].itemTourDetail.IncludePrice" class="text-detail m-lr-5" [innerHTML]="listMyTrips[0].itemTourDetail.IncludePrice"></div>
              <div class="text-tour-detail-subtitle " *ngIf="listMyTrips[0].itemTourDetail.NoIncludePrice">Giá không bao gồm</div>
              <div class="m-lr-5 text-detail" *ngIf="listMyTrips[0].itemTourDetail.NoIncludePrice" [innerHTML]="listMyTrips[0].itemTourDetail.NoIncludePrice"></div>
            </div>
           
          </div>
          

          <div *ngIf="listMyTrips[0].itemTourDetail.ProgramContent" >
            <div class="div-line-tour"></div>
            <div class="d-flex" (click)="showTourInfo()" >
              <div class="text-tour-detail-title div-width-100">Thông tin tour</div>
              <div class="div-width-10 div-icon-tour"><img src="./assets/ic_tour/expand.svg"></div>
            </div>
            <!-- <div class="m-lr-5 text-detail div-wrap-tourinfo div-collapse" *ngIf="listMyTrips[0].itemTourDetail.ProgramContent" [innerHTML]="listMyTrips[0].itemTourDetail.ProgramContent"></div> -->
          </div>

          <div *ngIf="listMyTrips[0].itemTourDetail.Notes" (click)="expandDiv(3)" >
            <div class="div-line-tour"></div>
            <div class="d-flex">
              <div class="text-tour-detail-title div-width-100" id="contentTourNotes">Lưu ý</div>
              <div class="div-width-10 div-icon-tour " *ngIf="expandDivTourNotes"><img src="./assets/ic_tour/collapse.svg"></div>
              <div class="div-width-10 div-icon-tour" *ngIf="!expandDivTourNotes"><img src="./assets/ic_tour/expand.svg"></div>
            </div>
            <div class="m-lr-5 text-detail div-wrap-tournotes div-collapse" *ngIf="listMyTrips[0].itemTourDetail.Notes" [innerHTML]="listMyTrips[0].itemTourDetail.Notes"></div>
          </div>

          <div>
            <div class="div-line-tour"></div>
            <div class="d-flex" (click)="nextSupport(listMyTrips[0])" id="contentTourSupport">
              <div class="text-tour-detail-title div-width-100">Liên hệ hỗ trợ</div>
              <div class="div-width-10 div-icon-tour"><img src="./assets/ic_tour/expand.svg"></div>
            </div>
           
          </div>

        </div>
        <ng-template #loadingtourdetail>
          <ion-skeleton-text animated class="text-menu" style="height: 36px;margin: 8px 0;"></ion-skeleton-text>
          <ion-skeleton-text animated class="text-menu" style="height: 36px;margin: 8px 0;"></ion-skeleton-text>
          <ion-skeleton-text animated class="text-menu" style="height: 36px;margin: 8px 0;"></ion-skeleton-text>
          <ion-skeleton-text animated class="text-menu" style="height: 36px;margin: 8px 0;"></ion-skeleton-text>
        </ng-template>

        <div *ngIf="listMyTrips[0].delivery_payment_date_display && (listMyTrips[0].pay_method==0||listMyTrips[0].pay_method==5||listMyTrips[0].pay_method==10) && !(listMyTrips[0].payment_status == 1 || listMyTrips[0].payment_status == 5|| listMyTrips[0].payment_status == 9|| listMyTrips[0].payment_status == -2 ||listMyTrips[0].payment_status == 3)" class="div-btn-payment m-top-27">
          <div class="div-split-panel"></div>
          <button (click)="paymentselect(listMyTrips[0],1)" ion-button round outline class="button btn-payment">Thanh toán ngay</button>
        </div>
        <div *ngIf="listMyTrips[0].delivery_payment_date_display&&!(listMyTrips[0].pay_method==0||listMyTrips[0].pay_method==5||listMyTrips[0].pay_method==10)&& !(listMyTrips[0].payment_status == 1 || listMyTrips[0].payment_status == 5|| listMyTrips[0].payment_status == 9|| listMyTrips[0].payment_status == -2 ||listMyTrips[0].payment_status == 3)" class="m-top-27">
          <div  [ngClass]=" listMyTrips[0].booking_type == 'TOUR' ? 'p-8-0' : 'p-8' " *ngIf="listMyTrips[0].pay_method==51||listMyTrips[0].pay_method==2">
            <div class="div-payment-combo-flight">
              <div class="div-payment-left">
                <div><label class="text-name" position="stacked">{{ listMyTrips[0].paxDisplay}}</label></div>
                <div class="div-text-fee"><label class="text-fee">Giá đã bao gồm thuế & phí</label></div>
              </div>
              <div class="div-price">
                <label  class="total-price">
                  {{gf.numberToCurrency(amount_after_tax, '.')}}đ
                </label>
              </div>
          </div>
          <div *ngIf="listMyTrips[0].booking_type == 'COMBO_FLIGHT' else notcomboflight">
              <label class="text-note">Quý khách thanh toán trước hạn thanh toán để đảm bảo tình trạng phòng và vé máy bay</label>
          </div>
          <ng-template #notcomboflight>
              <label class="text-note">Quý khách thanh toán trước hạn thanh toán để đảm bảo tình trạng phòng</label>
          </ng-template>
          <div >
              <label class="text-note">Khi Quý khách nhấn nút “Thanh toán” cũng đồng nghĩa là Quý khách đã đồng ý với các <a class="text-policy" >điều khoản và chính sách</a> thay đổi hoặc hủy đặt phòng.</label>
          </div>
          <div class="div-btn-payment">
              <button (click)="paymentselect(listMyTrips[0],1)" ion-button round outline class="button btn-payment">Thanh toán</button>
          </div>
          </div>
            <!-- Hình thức ck ngân hàng -->
            <div *ngIf="!(listMyTrips[0].pay_method==3||listMyTrips[0].pay_method==51||listMyTrips[0].pay_method==2)">
              <div class="div-split-panel"></div>

            <div class="div-qrcode m-top-24">
                <img class="img-qrcode" src="{{qrcodeurl}}" >
            </div>
            <div class="div-btn-download m-top-16 d-flex" (click)="downloadqrcode(listMyTrips[0])">
                <div class="btn-download">
                    <img class="img-download" src="./assets/imgs/download.svg">
                </div>
                <div class="text-download">Lưu mã để thanh toán</div>
            </div>

              <div class="d-flex-later m-top-16">
                <div class="d-img">
                  <img src={{listMyTrips[0].urlimgbank}}>
                </div>
                <div class="div-center">
                  <ion-label class="cls-text">
                  {{listMyTrips[0].bankName}}
                  </ion-label>
                  <!-- <div class="mt6">
                    <ion-label (click)="openWebpage()" class="cls-textopen">
                      Mở website/ứng dụng {{listMyTrips[0].textbank}}
                    </ion-label>
                  </div> -->
                </div>
              </div>
              <div class="div-text-payment">
                <p class="text-payment-info" text-wrap>
                  Số TK: <b>{{listMyTrips[0].accountNumber}}</b><a class='text-copy' (click)='copyClipboard(listMyTrips[0].accountNumber)'>Sao chép</a>
                </p>
                <p class="text-payment-info" >
                  Người nhận: Công ty Cổ Phần IVIVU.COM<a class='text-copy' (click)='copyClipboard("Người nhận: Công ty Cổ Phần IVIVU.COM")'>Sao chép</a>
                </p>
                <p class="text-payment-info" text-wrap>
                  Nội dung chuyển tiền: <b class="text-booking text-red">{{listMyTrips[0].booking_id}}</b><a class='text-copy' (click)='copyClipboard(listMyTrips[0].booking_id)'>Sao chép</a>
                </p>
                <p class="text-payment-info" text-wrap>
                  Tổng tiền: <b class="text-bold"> {{gf.numberToCurrency(amount_after_tax, '.')}} VND</b><a class='text-copy' (click)='copyClipboard(amount_after_tax)'>Sao chép</a>
                </p>                    
              </div>
            
            </div>
            <!-- payoo tại của hàng -->
            <div *ngIf="listMyTrips[0].pay_method==3" class="d-flex-later">
              <p class="text-payment-info" text-wrap>
                Mã thanh toán Payoo: {{listMyTrips[0].PaymentCode}}, số tiền: <b class="text-bold">{{gf.numberToCurrency(amount_after_tax, '.')}} VND</b>
              </p>
            </div>
            <div *ngIf="!(listMyTrips[0].pay_method==51||listMyTrips[0].pay_method==2)" class="mt16 mbt16">
              <label class="text-other">Hoặc thanh toán bằng phương thức khác</label>
            </div>
            <div *ngIf="!(listMyTrips[0].pay_method==3||listMyTrips[0].pay_method==51||listMyTrips[0].pay_method==2)" class="div-btn-payment">
              <button (click)="paymentselect(listMyTrips[0],0)" ion-button round outline class="button btn-payment">Đổi phương thức thanh toán</button>
          </div>
          <div *ngIf="listMyTrips[0].pay_method==3" class="div-btn-payment">
            <button (click)="paymentselect(listMyTrips[0],1)" ion-button round outline class="button btn-payment">Đổi phương thức thanh toán</button>
        </div>
        </div>
       
         </div>
        </div>
      </div>
    <ng-template #bookingnormal>
      
      <ion-list *ngFor="let trip of listMyTrips; let i = index" [ngClass]=" i == listMyTrips.length-1 ? (i ==0 ? 'p-bottom-24 item-list-shadow m-top-24' : 'p-bottom-97 item-list-shadow') : (i ==0 ? 'item-list-shadow m-top-24' : 'item-list-shadow')">

        <div *ngIf="(listMyTrips && listMyTrips.length ==1) else divshowlisttrip">
          
                  <!-- bkg VMBQT -->
            <div class="div-VMBQT div-flybooking" *ngIf="(trip.isBookingVMBQT && trip.isTravelPort) else otherbooking" >
               <div [ngClass]="!trip.bookingsComboData[0].issueTicketDate?'div-bkgno d-flex align-center':'div-bkgno d-flex'">
                  <div class="text-bkg">Mã booking: </div>
                  <div class="bkg-no">{{trip.booking_id}}</div>
                  <div class="div-btn-payment" *ngIf="trip.isFlyBooking && trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                          <label *ngIf="( (trip.payment_status == 1 || trip.payment_status == 5) && trip.bookingsComboData[0].issueTicketDate!='' && (trip.bookingsComboData[1] && trip.bookingsComboData[1].issueTicketDate!='') ) else notpayment" class="label-text-issueticket">Đã xuất vé</label>
                          <ng-template #notpayment>
                            <div *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)">
                              <div><label class="label-text-paymented">Đã thanh toán</label></div>
                              <div class="m-top-4"><label class="label-text-processing" *ngIf="!trip.bookingsComboData[0].issueTicketDate">(Chờ xử lý)</label></div>
                            </div>
                            <label class="label-text-waitpayment" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5)">Chưa thanh toán</label>
                          </ng-template>
                  </div>
               </div> 

               <div [ngClass]="trip.delivery_payment_date_display && !(trip.payment_status == 1 || trip.payment_status == 5) ? 'div-split-panel-VMB m-bottom-0' : 'div-split-panel-VMB'" *ngIf="(trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2) || (trip.payment_status == 1 || trip.payment_status == 5) )"></div>
               <div class="div-waiting-payment" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5) && trip.delivery_payment_date_display">
                  <label class="label-waiting-payment">Chờ thanh toán tới <span class="text-time-payment">{{trip.time_payment}}</span> ngày <span class="text-time-payment">{{trip.date_payment}}</span></label>
               </div>
               
              <div *ngFor="let itembkg of trip.bookingjson; let idxbkg = index">
                  <div *ngFor="let itemtransit of itembkg.Transits; let idxtransit = index">
                    <div [ngClass]="idxtransit > 0 ? 'd-flex m-top-' : 'd-flex'">
                      <div class="flight-info">
                          <div class="div-datetime">{{itemtransit.cindisplay}}</div>
                          <div class="div-flightnumber"><img class="icon-copy" [src]="itemtransit.Logo" > {{itemtransit.FlightNumber }} - {{itemtransit.TicketClass }}</div>
                      </div>
                      <div *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)" class="ticket-code">
                        <div class="div-text-code">Mã đặt chỗ</div>
                        <div class="d-flex div-code">
                            <div class="text-code">{{ itembkg.TicketCode }}</div>
                            <div class="div-icon" (click)="copyClipboard(itembkg.TicketCode)">
                              <img class="icon-copy" src="./assets/ic_flight_international/copy.svg" >
                            </div>
                        </div>
                      </div>
                    </div>

                    

                    <div class="div-departure m-top-16">
                      <div class="div-time-departure ">
                        <div>{{itemtransit.DepartTimeDisplay}}</div>
                        <div class="text-day-departure">{{itemtransit.DepartDayDisplay}}</div>
                      </div>
                      <div class="div-info-departure">
                        <div class="text-place">{{itemtransit.FromPlaceName}}</div>
                        <div class="text-placecode">{{ itemtransit.departAirport}} | {{ itemtransit.FromPlaceCode }}</div>
                      </div>
                      <div class="placepoint" style="top:33%">
                      </div>
                      <div class="placeline">
                      </div>
                    </div>
                    
                    <div class="div-return m-top-28">
                      <div class="div-time-landing ">
                        <div>{{itemtransit.LandingTimeDisplay}}</div>
                        <div class="text-day-departure">{{itemtransit.LandingDayDisplay}}</div>
                      </div>
                      <div class="div-info-return">
                        <div class="text-place">{{ itemtransit.ToPlaceName }}</div>
                        <div class="text-placecode">{{ itemtransit.landingAirport }} | {{ itemtransit.ToPlaceCode }}</div>
                      </div>
                      <div class="placepoint-return">
                      </div>
                    </div>
                    <!-- <div class="div-overlay" *ngIf="idxtransit != itembkg.Transits.length-1"><span *ngIf="itembkg.timeOverlay">Quá cảnh {{ itembkg.timeOverlay }} tại {{itemtransit.ToPlaceName}} ({{ itemtransit.ToPlaceCode }})</span></div> -->
                    <div class="div-overlay" *ngIf="itemtransit.timeOverlay"><span *ngIf="itemtransit.timeOverlay">Quá cảnh {{ itemtransit.timeOverlay }} tại {{ itemtransit.ToPlaceCode }}</span></div>
                  </div>
                  <div class="div-line-vmbqt" *ngIf="idxbkg != trip.bookingjson.length-1"></div>
              </div>
                
              <!-- pax info -->
              <div class="div-split-panel"></div>
              <div *ngFor="let pax of trip.itemdepart.passengers; let idx = index">
                <div class="div-pax-lug">
                <div
                  [ngClass]="idx==0 ? 'pax-name m-top-8' : (pax.arrlug && pax.arrlug.length >0) ? 'pax-name m-top-27' : ( (idx == trip.itemdepart.passengers.length -1 && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2] && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2].arrlug && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2].arrlug.length >0 )? 'pax-name m-top-27' :  'pax-name m-top-8')">
                  <label>{{pax.gender}}. <span class="f-bold">{{pax.name}}</span> <span class="text-age"
                      *ngIf="!pax.isAdult && pax.dob"> ({{pax.dob}})</span></label></div>
                
                </div>
                <div *ngFor="let lugg of pax.arrlug">
                  <div class="div-luggest d-flex">
                    <div><img class="img-luggage" src="./assets/ic_flight/vali.svg"> </div>
                    <div class="p-top-1">
                        <span *ngIf="lugg.lugname">{{lugg.lugname}} </span> 
                        <span *ngIf="lugg.lugprice">
                          <span *ngIf="lugg.lugprice">| </span> {{lugg.lugweight}} 
                        </span>
                        <span *ngIf="lugg.seatnumber" class="p-left-4"><span *ngIf="lugg.lugname || lugg.lugprice">| </span> {{lugg.seatnumber}}</span>
                    </div>
                  </div>
                </div>
              </div>
                <!-- end pax info -->
                <!-- total info -->
                <div class="total-cost">
                  <div class="d-flex">
                    <div class="div-width-150">
                        <div class="text-normal">{{trip.flightRoundTripStr}}</div>
                        <div class="text-sub">{{trip.totalPaxStrVMBQT}}</div>
                    </div>
                    <div class="div-width-100">
                      <div class="text-normal text-align-right">{{gf.convertNumberToString(trip.totalCost)}} VND</div>
                    </div>
                  </div>
                  <div class="d-flex m-top-8" *ngIf="trip.payment_fee">
                    <div class="text-info">
                      Phí tiện ích
                    </div>
                    <div class="position-absolute text-info">
                      {{gf.convertNumberToString(trip.payment_fee)}} VND
                    </div>
                  </div>
                  <div class="div-line-total"></div>

                  <div class="d-flex m-top-8" *ngIf="trip.promotionDiscountAmount&&trip.promotionDiscountAmount>0 && trip.ivivu_point>0">
                    <div class="div-width-100 text-info">
                      iVIVU point
                    </div>
                    <div class="div-width-100 text-info text-align-right">
                      {{gf.numberToCurrency(trip.promotionDiscountAmount, '.')}} VND
                    </div>
                  </div>
                  <div class="d-flex m-top-8" *ngIf="trip.promotionDiscountAmount&&trip.promotionDiscountAmount>0 && !trip.ivivu_point">
                    <div class="div-width-100 text-info">
                      Khuyến mãi
                    </div>
                    <div class="div-width-100 text-info text-align-right">
                      {{gf.numberToCurrency(trip.promotionDiscountAmount, '.')}} VND
                    </div>
                  </div>
                  <div class="d-flex m-top-8" *ngIf="trip.paid_amount&&trip.paid_amount>0&&amount_after_tax>0">
                    <div class="div-width-100 text-info">
                      Đã thanh toán trước
                    </div>
                    <div class="div-width-100 text-info text-align-right">
                      {{gf.numberToCurrency(trip.paid_amount, '.')}} VND
                    </div>
                  </div>

                  <div class="d-flex m-top-8">
                    <div class="div-width-150">
                      <div class="text-normal">Tổng cộng<span class="f-bold" *ngIf="listMyTrips[0].payment_status == 5 || listMyTrips[0].payment_status == 1"> - Đã thanh toán</span></div>
                      <div class="text-sub">(Giá đã bao gồm thuế & phí)</div>
                    </div>
                    <div class="div-width-100" *ngIf="!trip.promotionDiscountAmount && !trip.paid_amount">
                      <div class="text-normal f-bold f-16 text-align-right">{{gf.convertNumberToString(trip.totalCost)}} VND</div>
                    </div>
                    <div class="div-width-100" *ngIf="trip.promotionDiscountAmount && !(trip.paid_amount && trip.paid_amount>0)">
                      <div class="text-normal f-bold f-16 text-align-right">{{gf.convertNumberToString(trip.amount_after_tax)}} VND</div>
                    </div>
                    <div class="div-width-100" *ngIf="(trip.paid_amount && trip.paid_amount>0)">
                      <div class="text-normal f-bold f-16 text-align-right" *ngIf="(trip.payment_status == 5 || trip.payment_status == 1)">{{gf.convertNumberToString(trip.amount_after_tax)}} VND</div>
                      <div class="text-normal f-bold f-16 text-align-right" *ngIf="!(trip.payment_status == 5 || trip.payment_status == 1)">{{gf.convertNumberToString(trip.amount_after_tax - trip.paid_amount)}} VND</div>
                    </div>
                  </div>
                </div>
                <!-- end total info -->
                <!-- other info -->
                <div class="div-other-info">
                    <div>
                        <div class="d-flex h-36" (click)="expandCondition(trip)">
                            <div class="div-width-250 v-align-center">
                                <div class="text-title">Điều kiện vé</div>
                            </div>
                            <div class="div-width-50 v-align-center">
                              <div class="div-flex-end" *ngIf="!trip.expanddivcondition">
                                <img class="img-expand" src="./assets/ic_flight_international/expand.svg">
                              </div>
                              <div class="div-flex-end" *ngIf="trip.expanddivcondition" >
                                <img class="img-expand" src="./assets/ic_flight_international/collaspe.svg">
                              </div>
                            </div>
                        </div>
                        <div *ngIf="trip.dataSummaryBooking && ((trip.dataSummaryBooking.departFlightData && trip.departTicketInfo) || (trip.dataSummaryBooking.returnFlightData && trip.returnTicketInfo))" class="div-wrap-condition div-collapse">
                          <div class="m-top-16" *ngIf="trip.dataSummaryBooking.departFlightData && trip.departTicketInfo && (trip.departTicketInfo.addon || trip.departTicketInfo.ticketCondition)">
                              <div class="text-sub-title" >
                                Chiều đi {{trip.dataSummaryBooking.departFlightData.fromPlaceCode}}-{{trip.dataSummaryBooking.departFlightData.toPlaceCode}}
                              </div>
        
                              <div class="d-flex" *ngIf="trip.dataSummaryBooking.departFlightData.ticketClass">
                                <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/ticket.svg" ></div>
                                <div class="text-normal">Hạng vé: {{trip.dataSummaryBooking.departFlightData.ticketClass}}</div>
                              </div>
                        
                                <div class="d-flex" *ngIf="trip.departTicketInfo && trip.departTicketInfo.addon && trip.departTicketInfo.addon.seatPosition">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/airline_seat_recline.svg" ></div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatPosition == 'Standard'">Ghế tựa tiêu chuẩn</div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatPosition == 'Recliner'">Ghế tựa nghiêng bổ sung</div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatPosition == 'Flat Bed'">Ghế nằm phẳng</div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatPosition == 'Angle Lie Flat'">Ghế nằm phẳng có góc nghiêng</div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatPosition == 'Closed Suite'">Buồng cá nhân</div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatPosition == 'Open Suite'">Buồng cá nhân</div>
                                </div>
              
                                <div class="d-flex" *ngIf="trip.departTicketInfo.addon && trip.departTicketInfo.addon.seatSpace">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/airline_seat_legroom_extra.svg" ></div>
                                  <div class="text-normal" *ngIf="trip.departTicketInfo.addon.seatSpace">{{trip.departTicketInfo.addon.seatSpace}}</div>
                                </div>
                                
                                <div class="d-flex" *ngIf="trip.departTicketInfo.addon && trip.departTicketInfo.addon.mealAndBeverage">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/restaurant.svg" ></div>
                                  <div class="text-normal">{{trip.departTicketInfo.addon.mealAndBeverage}}</div>
                                </div>
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.seat && trip.departTicketInfo.ticketCondition.seat.indexOf('Không') == -1">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/info.svg" ></div>
                                  <div class="text-normal">Chọn ghế: {{trip.departTicketInfo.ticketCondition.seat}}</div>
                                </div>
                                
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.baggageHanded">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/work_outline.svg" ></div>
                                  <div class="text-normal">Hành lý xách tay: {{trip.departTicketInfoCRM &&trip.departTicketInfoCRM.BaggageHanded ? trip.departTicketInfoCRM.BaggageHanded : trip.departTicketInfo.ticketCondition.baggageHanded}}</div>
                                </div>
                      
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.luggageSigned">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/work_outline.svg" ></div>
                                  <div class="text-normal">Hành lý ký gửi: {{trip.departTicketInfoCRM && trip.departTicketInfoCRM.LuggageSigned ? trip.departTicketInfoCRM.LuggageSigned : trip.departTicketInfo.ticketCondition.luggageSigned}}</div>
                                </div>
              
                                <div class="d-flex" *ngIf="trip.departTicketInfo.addon && trip.departTicketInfo.addon.bonusMiles">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/plus_mil.svg" ></div>
                                  <div class="text-normal">Số dặm thưởng: {{trip.departTicketInfo.addon.bonusMiles}}</div>
                                </div>
              
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.upgradeTicket">
                                  <div class="div-icon">
                                    <img class="icon-info" *ngIf="trip.departTicketInfo.ticketCondition.upgradeTicket.toLowerCase().indexOf('miễn phí') !=-1
                                    || trip.departTicketInfo.ticketCondition.upgradeTicket.toLowerCase().indexOf('nâng hạng với') !=-1" src="./assets/ic_flight_international/check.svg" >
                                    <img class="icon-info" *ngIf="trip.departTicketInfo.ticketCondition.upgradeTicket.toLowerCase().indexOf('miễn phí') ==-1 && trip.departTicketInfo.ticketCondition.upgradeTicket.toLowerCase().indexOf('nâng hạng với') ==-1" src="./assets/ic_flight_international/monetization.svg" >
                                  </div>
                                  <div class="text-normal">Nâng hạng vé: {{trip.departTicketInfo.ticketCondition.upgradeTicket}}</div>
                                </div>
              
                                <div class="d-flex" *ngIf="trip.departTicketInfo.addon && trip.departTicketInfo.addon.lounge && trip.departTicketInfo.addon.lounge.toLowerCase().indexOf('không có') == -1">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/breakfast.svg" ></div>
                                  <div class="text-normal">{{trip.departTicketInfo.addon.lounge}}</div>
                                </div>
                      
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.priorityCI">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/checkin.svg" ></div>
                                  <div class="text-normal">Checkin riêng</div>
                                </div>
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.priorityBoarding">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/boarding.svg" ></div>
                                  <div class="text-normal">Boarding ưu tiên</div>
                                </div>
              
                                <div class="d-flex" *ngIf="trip.departTicketInfo.ticketCondition && trip.departTicketInfo.ticketCondition.airlineSeatIndividualSuite">
                                  <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/airline_seat_individual_suite.svg" ></div>
                                  <div class="text-normal">Buồng cá nhân</div>
                                </div>
                          </div>
                          
                          <div class="m-top-16" *ngIf="trip.dataSummaryBooking.returnFlightData && trip.returnTicketInfo && (trip.returnTicketInfo.addon || trip.returnTicketInfo.ticketCondition)">
                            <div class="text-sub-title" >
                              Chiều về {{trip.dataSummaryBooking.returnFlightData.fromPlaceCode}}-{{trip.dataSummaryBooking.returnFlightData.toPlaceCode}}
                            </div>
        
                            <div class="d-flex" *ngIf="trip.dataSummaryBooking.returnFlightData.ticketClass">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/ticket.svg" ></div>
                              <div class="text-normal">Hạng vé: {{trip.dataSummaryBooking.returnFlightData.ticketClass}}</div>
                            </div>
                      
                            <div class="d-flex" *ngIf="trip.returnTicketInfo && trip.returnTicketInfo.addon && trip.returnTicketInfo.addon.seatPosition">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/airline_seat_recline.svg" ></div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatPosition == 'Standard'">Ghế tựa tiêu chuẩn</div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatPosition == 'Recliner'">Ghế tựa nghiêng bổ sung</div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatPosition == 'Flat Bed'">Ghế nằm phẳng</div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatPosition == 'Angle Lie Flat'">Ghế nằm phẳng có góc nghiêng</div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatPosition == 'Closed Suite'">Buồng cá nhân</div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatPosition == 'Open Suite'">Buồng cá nhân</div>
                            </div>
          
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.addon && trip.returnTicketInfo.addon.seatSpace">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/airline_seat_legroom_extra.svg" ></div>
                              <div class="text-normal" *ngIf="trip.returnTicketInfo.addon.seatSpace">{{trip.returnTicketInfo.addon.seatSpace}}</div>
                            </div>
                            
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.addon && trip.returnTicketInfo.addon.mealAndBeverage">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/restaurant.svg" ></div>
                              <div class="text-normal">{{trip.returnTicketInfo.addon.mealAndBeverage}}</div>
                            </div>
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.seat && trip.returnTicketInfo.ticketCondition.seat.indexOf('Không') == -1">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/info.svg" ></div>
                              <div class="text-normal">Chọn ghế: {{trip.returnTicketInfo.ticketCondition.seat}}</div>
                            </div>
                            
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.baggageHanded">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/work_outline.svg" ></div>
                              <div class="text-normal">Hành lý xách tay: {{trip.returnTicketInfoCRM && trip.returnTicketInfoCRM.BaggageHanded ? trip.returnTicketInfoCRM.BaggageHanded : trip.returnTicketInfo.ticketCondition.baggageHanded}}</div>
                            </div>
                  
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.luggageSigned">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/work_outline.svg" ></div>
                              <div class="text-normal">Hành lý ký gửi: {{trip.returnTicketInfoCRM && trip.returnTicketInfoCRM.LuggageSigned ? trip.returnTicketInfoCRM.LuggageSigned : trip.returnTicketInfo.ticketCondition.luggageSigned}}</div>
                            </div>
          
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.addon && trip.returnTicketInfo.addon.bonusMiles">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/plus_mil.svg" ></div>
                              <div class="text-normal">Số dặm thưởng: {{trip.returnTicketInfo.addon.bonusMiles}}</div>
                            </div>
          
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.upgradeTicket">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/check.svg" ></div>
                              <div class="text-normal">{{trip.returnTicketInfo.ticketCondition.upgradeTicket}}</div>
                            </div>
          
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.addon && trip.returnTicketInfo.addon.lounge && trip.returnTicketInfo.addon.lounge.toLowerCase().indexOf('không có') == -1">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/breakfast.svg" ></div>
                              <div class="text-normal">{{trip.returnTicketInfo.addon.lounge}}</div>
                            </div>
                  
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.priorityCI">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/checkin.svg" ></div>
                              <div class="text-normal">Checkin riêng</div>
                            </div>
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.priorityBoarding">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/boarding.svg" ></div>
                              <div class="text-normal">Boarding ưu tiên</div>
                            </div>
          
                            <div class="d-flex" *ngIf="trip.returnTicketInfo.ticketCondition && trip.returnTicketInfo.ticketCondition.airlineSeatIndividualSuite">
                              <div class="div-icon"><img class="icon-info" src="./assets/ic_flight_international/airline_seat_individual_suite.svg" ></div>
                              <div class="text-normal">Buồng cá nhân</div>
                            </div>
                          </div>
        
                          <!-- <div *ngIf="expanddivcondition && !loadsummarydone">
                            <div *ngFor="let item of listsdk; let idx = index">
                              <ion-skeleton-text animated style="width: 100%;height: 40px;margin: 8px 0"></ion-skeleton-text>
                            </div>
                          </div> -->
                        </div>
                        
                      <div class="div-line-total"></div>
                    <div class="d-flex h-36" (click)="expandRefund(trip)">
                      <div class="div-width-250 v-align-center">
                          <div class="text-title">Điều kiện hoàn hủy</div>
                      </div>
                      <div class="div-width-50 v-align-center">
                        <div class="div-flex-end" *ngIf="!trip.expanddivrefund">
                          <img class="img-expand" src="./assets/ic_flight_international/expand.svg">
                        </div>
                        <div class="div-flex-end" *ngIf="trip.expanddivrefund" >
                          <img class="img-expand" src="./assets/ic_flight_international/collaspe.svg">
                        </div>
                      </div>
                    </div>

                    <div *ngIf="trip.listpolicy && trip.listpolicy.length >0" class="div-wrap-refund div-collapse">
                      <div *ngIf="trip.hasdepartpolicy && trip.bookingsComboData[0]">
                        <div class="text-sub-title m-top-16" >
                          Chiều đi {{trip.bookingsComboData[0].departCode}}-{{trip.bookingsComboData[0].arrivalCode}}
                        </div>
                        <div  *ngFor="let policy of trip.listpolicy">
                          <div class="d-flex" *ngIf="policy.isdepart">
                            <div class="div-icon">
                              <img *ngIf=" policy.name.toLowerCase().indexOf('không') ==-1 && policy.name.toLowerCase().indexOf('miễn phí') ==-1" class="icon-info" src="./assets/ic_flight_international/monetization.svg">
                              <img *ngIf=" policy.name.toLowerCase().indexOf('miễn phí') !=-1"class="icon-info" src="./assets/ic_flight_international/check.svg">
                              <img *ngIf=" policy.name.toLowerCase().indexOf('không') !=-1"class="icon-info" src="./assets/ic_flight_international/disturb.svg">
                            </div>
                            <div class="text-normal" *ngIf="policy.typePolicy==1">{{(trip.departTicketInfoCRM && trip.departTicketInfoCRM.ChangeDepartTime? 'Chính sách đổi chiều đi: '+trip.departTicketInfoCRM.ChangeDepartTime : policy.name)}}</div>
                            <div class="text-normal" *ngIf="policy.typePolicy==2">{{(trip.departTicketInfoCRM && trip.departTicketInfoCRM.TicketRefund? 'Chính sách hủy chiều đi: '+trip.departTicketInfoCRM.TicketRefund : policy.name)}}</div>
                          </div>
                         
                        </div>
                      </div>
                        
                      <div *ngIf="trip.hasreturnpolicy && trip.bookingsComboData[1]">
                        <div class="text-sub-title m-top-16" >
                          Chiều về {{trip.bookingsComboData[1].departCode}}-{{trip.bookingsComboData[1].arrivalCode}}
                        </div>
                        <div  *ngFor="let policy of trip.listpolicy">
                          <div class="d-flex" *ngIf="!policy.isdepart">
                            <div class="div-icon">
                              <img *ngIf=" policy.name.toLowerCase().indexOf('không') ==-1 && policy.name.toLowerCase().indexOf('miễn phí') ==-1" class="icon-info" src="./assets/ic_flight_international/monetization.svg">
                              <img *ngIf=" policy.name.toLowerCase().indexOf('miễn phí') !=-1"class="icon-info" src="./assets/ic_flight_international/check.svg">
                              <img *ngIf=" policy.name.toLowerCase().indexOf('không') !=-1"class="icon-info" src="./assets/ic_flight_international/disturb.svg">
                            </div>
                            <div class="text-normal" *ngIf="policy.typePolicy==1">{{(trip.returnTicketInfoCRM && trip.returnTicketInfoCRM.ChangeDepartTime ? 'Chính sách đổi chiều về: '+trip.returnTicketInfoCRM.ChangeDepartTime : policy.name)}}</div>
                            <div class="text-normal" *ngIf="policy.typePolicy==2">{{(trip.returnTicketInfoCRM && trip.returnTicketInfoCRM.TicketRefund ? 'Chính sách hủy chiều về: '+trip.returnTicketInfoCRM.TicketRefund : policy.name)}}</div>
                          </div>
                         
                        </div>
                      </div>
                        
                    </div>
                   
                      <div class="div-line-total"></div>

                     
                        <div class="d-flex h-36" (click)="openLinkCondition()">
                          <div class="div-width-250 v-align-center">
                              <div class="text-title">Hướng dẫn thủ tục hàng không</div>
                          </div>
                          <div class="div-width-50 v-align-center">
                              <div class="div-flex-end">
                                <img class="img-expand" src="./assets/ic_flight_international/expand.svg">
                              </div>
                          </div>
                      </div>
                      <div class="div-line-total"></div>

                      <div class="d-flex h-36" (click)="nextSupport(trip)">
                        <div class="div-width-250 v-align-center">
                            <div class="text-title">Liên hệ hỗ trợ</div>
                        </div>
                        <div class="div-width-50 v-align-center">
                            <div class="div-flex-end">
                              <img class="img-expand" src="./assets/ic_flight_international/expand.svg">
                            </div>
                        </div>
                      </div>
                      <div class="div-line-total"></div>

                      <div *ngIf="trip.bookingjson && (trip.payment_status == 1 || trip.payment_status == 5)" class="d-flex h-36" >
                        <div class="div-width-250 v-align-center">
                            <div class="text-title font-weight-500">Yêu cầu Checkin-Online</div>
                        </div>
                        <div class="div-width-50 v-align-center">
                            <div  class="div-flex-end">
                              <ion-toggle [disabled]="trip.bookingjson[0].RequestCheckin==1 || trip.ischeckinOnl" (ionChange)="checkinOnline(trip)" [checked]="trip.bookingjson[0].RequestCheckin==1"></ion-toggle>
                            </div>
                        </div>
                      </div>
                      <div *ngIf="trip.bookingjson && (trip.payment_status == 1 || trip.payment_status == 5)  && trip.textCheckinOnline" class="text-note">
                        {{trip.textCheckinOnline}} 
                    </div>
                       <!-- Checkin online -->
               <!-- <div *ngIf="trip.hadCheckinOnline" class="div-line-new-1 m-0-16"></div> -->
               <div *ngIf="trip.isFlyBooking && trip.hadCheckinOnline" class="div-checkin-online">
                <div class="d-flex">
                  <div class="div-icon-check">
                    <img  class="img-check"  src="./assets/ic_mytripbooking/check.svg">
                  </div>
                  <div class="div-text-checkin">Đã có thẻ lên máy bay (Boarding Pass)</div>
                </div>
                
                 <!-- <div class="div-icon-arrow">
                   <img  class="img-arrow"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                 </div> -->
                 <div  class="text-title-broading m-top-12" *ngIf="trip.hadCheckinOnlineDepart">
                  Chiều đi
                </div>
                   <div *ngFor="let pass of trip.bookingjson[0].Passengers; let idx = index">
                    <div class="d-flex align-items-end m-top-12" *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
                   
                        <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                        <img (click)="downloadimg(pass,trip)"  src="./assets/ic_mytripbooking/download.svg">
                        <img (click)="share(pass.CheckinInfo)"  class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                    </div>
                </div>
                <div  class="text-title-broading m-top-12" *ngIf="trip.bookingjson[1] && trip.hadCheckinOnlineReturn">
                  Chiều về
                </div>
                <div *ngIf="trip.bookingjson[1] && trip.bookingjson[1].Passengers[0].CheckinInfo">
                  <div *ngFor="let pass of trip.bookingjson[1].Passengers; let idx = index">
                    <div class="d-flex align-items-end m-top-12" *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">

                      <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                      <img (click)="downloadimg(pass,trip)"  src="./assets/ic_mytripbooking/download.svg">
                      <img (click)="share(pass.CheckinInfo)"  class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                  </div>
                  </div>
                  </div>
            
               </div>
                    </div>
                </div>
                  <!-- end other info -->

                  <!-- payment info -->
                  <div *ngIf="trip.delivery_payment_date_display && (trip.pay_method==0||trip.pay_method==5||trip.pay_method==10) && !(trip.payment_status == 1 || trip.payment_status == 5|| trip.payment_status == 9|| trip.payment_status == -2 ||trip.payment_status == 3)" class="div-btn-payment m-top-27">
                    <div class="div-split-panel"></div>
                    <button (click)="paymentselect(trip,1)" ion-button round outline class="button btn-payment">Thanh toán ngay</button>
                  </div>
                  <div *ngIf="trip.delivery_payment_date_display&&!(trip.pay_method==0||trip.pay_method==5||trip.pay_method==10)&& !(trip.payment_status == 1 || trip.payment_status == 5|| trip.payment_status == 9|| trip.payment_status == -2 ||trip.payment_status == 3)" class="m-top-27">
                    <div style="padding: 8px;" *ngIf="trip.pay_method==51||trip.pay_method==2">
                      <div class="div-payment-combo-flight">
                        <div class="div-payment-left">
                          <div><label class="text-name" position="stacked">{{ trip.paxDisplay}}</label></div>
                          <div class="div-text-fee"><label class="text-fee">Giá đã bao gồm thuế & phí</label></div>
                        </div>
                        <div class="div-price">
                          <label  class="total-price">
                            {{trip.priceShow}}đ
                          </label>
                        </div>
                    </div>
                    <div *ngIf="trip.booking_type == 'COMBO_FLIGHT' else notcomboflight">
                        <label class="text-note">Quý khách thanh toán trước hạn thanh toán để đảm bảo tình trạng phòng và vé máy bay</label>
                    </div>
                    <ng-template #notcomboflight>
                        <label class="text-note">Quý khách thanh toán trước hạn thanh toán để đảm bảo tình trạng phòng</label>
                    </ng-template>
                    <div >
                        <label class="text-note">Khi Quý khách nhấn nút “Thanh toán” cũng đồng nghĩa là Quý khách đã đồng ý với các <a class="text-policy" >điều khoản và chính sách</a> thay đổi hoặc hủy đặt phòng.</label>
                    </div>
                    <div class="div-btn-payment">
                        <button (click)="paymentselect(trip,1)" ion-button round outline class="button btn-payment">Thanh toán ngay</button>
                    </div>
                    </div>
                      <!-- Hình thức ck ngân hàng -->
                      <div *ngIf="!(trip.pay_method==3||trip.pay_method==51||trip.pay_method==2)">
                        <div class="div-split-panel"></div>

                      <div class="div-qrcode m-top-24">
                          <img class="img-qrcode" src="{{qrcodeurl}}" >
                      </div>
                      <div class="div-btn-download m-top-16 d-flex" (click)="downloadqrcode(trip)">
                          <div class="btn-download">
                              <img class="img-download" src="./assets/imgs/download.svg">
                          </div>
                          <div class="text-download">Lưu mã để thanh toán</div>
                      </div>

                        <div class="d-flex-later m-top-16">
                          <div class="d-img">
                            <img src={{trip.urlimgbank}}>
                          </div>
                          <div class="div-center">
                            <ion-label class="cls-text">
                            {{trip.bankName}}
                            </ion-label>
                          </div>
                        
                      </div>
                  </div>

                  <div class="div-text-payment">
                    <p class="text-payment-info" text-wrap>
                      Số TK: <b>{{trip.accountNumber}}</b><a class='text-copy' (click)='copyClipboard(trip.accountNumber)'>Sao chép</a>
                    </p>
                    <p class="text-payment-info" >
                      Người nhận: Công ty Cổ Phần IVIVU.COM<a class='text-copy' (click)='copyClipboard("Người nhận: Công ty Cổ Phần IVIVU.COM")'>Sao chép</a>
                    </p>
                    <p class="text-payment-info" text-wrap>
                      Nội dung chuyển tiền: <b class="text-booking text-red">{{trip.booking_id}}</b><a class='text-copy' (click)='copyClipboard(trip.booking_id)'>Sao chép</a>
                    </p>
                    <p class="text-payment-info" text-wrap>
                      Tổng tiền: <b *ngIf="amount_after_tax>0" class="text-bold">{{gf.numberToCurrency(amount_after_tax, '.')}} VND</b> <b *ngIf="amount_after_tax<=0" class="text-bold"> {{gf.numberToCurrency(trip.paid_amount, '.')}} VND</b><a class='text-copy' (click)='copyClipboard(trip.priceShow)'>Sao chép</a>
                    </p>                    
                  </div>
                   <!-- payoo tại của hàng -->
                   <div *ngIf="trip.pay_method==3" class="d-flex-later">
                    <p class="text-payment-info" text-wrap>
                      Mã thanh toán Payoo: {{trip.PaymentCode}}, số tiền: <b *ngIf="amount_after_tax>0" class="text-bold">{{gf.numberToCurrency(amount_after_tax, '.')}} VND</b> <b *ngIf="amount_after_tax<=0" class="text-bold"> {{gf.numberToCurrency(trip.paid_amount, '.')}} VND</b>
                    </p>
                    </div>
                    <div *ngIf="!(trip.pay_method==51||trip.pay_method==2)" class="mt16 mbt16">
                      <label class="text-other">Hoặc thanh toán bằng phương thức khác</label>
                    </div>
                    <div *ngIf="!(trip.pay_method==3||trip.pay_method==51||trip.pay_method==2)" class="div-btn-payment">
                      <button (click)="paymentselect(trip,0)" ion-button round outline class="button btn-payment">Đổi phương thức thanh toán</button>
                    </div>
                    <div *ngIf="trip.pay_method==3" class="div-btn-payment">
                      <button (click)="paymentselect(trip,1)" ion-button round outline class="button btn-payment">Đổi phương thức thanh toán</button>
                    </div>
                </div>
            </div>
            <ng-template #otherbooking>
              <div *ngIf="!trip.bookingOffType" >
       
                <div [ngClass]="trip.bookingsComboData && (!trip.bookingsComboData[0].issueTicketDate || (trip.bookingsComboData[1] && !trip.bookingsComboData[1].issueTicketDate)) && (trip.payment_status == 1 || trip.payment_status == 5) || !trip.approve_date?'padding-16-16 d-flex':'padding-9-16 d-flex'">
                  <div size="8" class="col-bookingid" *ngIf="!trip.isFlyBooking else flybooking"><label class="label-bkg-id">Mã booking: <span
                        class="bkg-id">{{trip.booking_id}}</span></label>
                  </div>
                        <ng-template #flybooking>
                          <div class="col-bookingid" size="8" style="align-self: baseline;"><label  class="label-bkg-id">Mã booking: <span class="bkg-id">{{trip.booking_id}}</span></label></div>
                       </ng-template> 
  
                  <div  size="4" class="col-bkg-status position-absolute "
                    *ngIf="!trip.isFlyBooking && trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                    <div  [ngClass]="!trip.approve_date? 'm-t-11':''" *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else waitpayment">
                      <div><label class="label-text-paymented">Đã thanh toán</label></div>
                      <div class="m-top-4"><label class="label-text-processing ml-7" *ngIf="!trip.approve_date">(Chờ xử lý)</label></div>
                    </div>
                    <ng-template #waitpayment>
                      <!-- <label *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay else notshowwaitpayment" class="lbl-waitpayment label-text-paymented">Chờ thanh toán | <span>{{trip.deliveryPaymentDisplay}}</span></label> -->
                      <label *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay else notshowwaitpayment" class="lbl-waitpayment label-text-waitpayment">Chờ thanh toán</label>
                      <ng-template #notshowwaitpayment><label class="lbl-waitpayment label-text-waitpayment1">Hết hạn thanh toán</label></ng-template>
                    </ng-template>
                  </div>
                  <div [ngClass]="trip.bookingsComboData  && (!trip.bookingsComboData[0].issueTicketDate && (trip.bookingsComboData[1] && !trip.bookingsComboData[1].issueTicketDate)) && (trip.payment_status == 1 || trip.payment_status == 5)?'col-bkg-status position-absolute mt-10':'col-bkg-status position-absolute'"
                  size="4"  *ngIf="trip.isFlyBooking && trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                    <!-- <label *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else notpayment" class="label-text-paymented">Đã xuất vé</label>
                    <ng-template #notpayment><label class="label-text-waitpayment">Chưa thanh toán</label></ng-template> -->
                    <div  *ngIf="trip.bookingsComboData && trip.bookingsComboData.length > 1">
                        <label *ngIf="( (trip.payment_status == 1 || trip.payment_status == 5) && trip.bookingsComboData[0].issueTicketDate!='' && (trip.bookingsComboData[1] && trip.bookingsComboData[1].issueTicketDate!='') ) else notpayment" class="label-text-paymented-xv">Đã xuất vé</label>
                        <ng-template #notpayment>
                          <div   *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)">
                            <div><label class="label-text-paymented">Đã thanh toán</label></div>
                            <div class="m-top-4"><label class="label-text-processing ml-7" *ngIf="!trip.bookingsComboData[0].issueTicketDate|| (trip.bookingsComboData[1] && !trip.bookingsComboData[1].issueTicketDate)">(Chờ xử lý)</label></div>
                          </div>
                            <label class="label-text-waitpayment" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5) && trip.deliveryPaymentDisplay">Chưa thanh toán</label>
                            <label class="label-text-waitpayment1" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5) && !trip.deliveryPaymentDisplay">Hết hạn thanh toán</label>
                        </ng-template>
                    </div>
                    <div  *ngIf="trip.bookingsComboData && trip.bookingsComboData.length == 1">
                        <label *ngIf="( (trip.payment_status == 1 || trip.payment_status == 5) && trip.bookingsComboData[0].issueTicketDate!='' ) else notpayment" class="label-text-paymented-xv">Đã xuất vé</label>
                        <ng-template #notpayment>
                          <div   *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)">
                            <div><label class="label-text-paymented">Đã thanh toán</label></div>
                            <div class="m-top-4"><label class="label-text-processing ml-7" *ngIf="!trip.bookingsComboData[0].issueTicketDate">(Chờ xử lý)</label></div>
                          </div>
                            <label class="label-text-waitpayment" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5)  && trip.deliveryPaymentDisplay">Chưa thanh toán</label>
                            <label class="label-text-waitpayment1" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5)  && !trip.deliveryPaymentDisplay">Hết hạn thanh toán</label>
                        </ng-template>
                    </div>
                  </div>
                  <div size="4" class="col-bkg-status position-absolute"
                    *ngIf="trip.payment_status == 9"><label class="label-text-roomconfirm">Chờ hỏi phòng</label></div>
                  <div size="4" class="col-bkg-status position-absolute" style="text-align: right;font-size: 12px;color:#f79221;"
                    *ngIf="(trip.payment_status == 3 || trip.payment_status == -2)"><label class="lbl-waitpayment label-text-waitpayment">Đã hủy</label></div>
                </div>
                <div class="div-line-new"></div>
              
              </div>
                  <div  *ngIf="(!trip.isRequestTrip && !trip.isFlyBooking)">
                    <!-- <div class="div-delivery_payment-od" *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay">Quý khách vui lòng thanh toán trong vòng {{ trip.paymentBefore}}</div> -->
                    <div class="div-delivery_payment" *ngIf="trip.payment_status == 0 && trip.delivery_payment_date_display">
                      Chờ thanh toán tới <span class="text-waitpayment">{{ trip.delivery_payment_time_display}}</span> ngày <span class="text-waitpayment">{{ trip.delivery_payment_date_display}}</span></div>
                    
                    <div  [ngClass]="trip.payment_status == 0 && trip.deliveryPaymentDisplay ? 'first-content padding-lr-16' : 'first-content padding-lr-16'">
                      
                      <ion-item-group>
                        
                      <!-- Vùng cho combo -->
                      <div *ngIf="trip.booking_type == 'COMBO_FLIGHT'" class="m-top-8">
                        <!-- chiều đi -->
                        <div class="padding-5">
                          <div class="d-flex text-thin m-0">
                            <div class="div-gird ">
                              <div class="div-width-100">{{trip.bookingsComboData[0].checkInDisplay}}</div>
                              <div class="d-flex m-top-6">
                                <div class="div-width-200 d-flex">
                                  <div class="div-img-logo-new">
                                    <img class="img-logo-new" *ngIf="trip.bookingsComboData[0].airlineName.indexOf('VIETJET') != -1 "
                                      src="./assets/ic_airticket/vj.png">
                                    <img class="img-logo-new logo_vna"
                                      *ngIf="(trip.bookingsComboData[0].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[0].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                                      src="./assets/ic_airticket/vna.png">
                                    <img class="img-logo-new logo_vna"
                                      *ngIf="(trip.bookingsComboData[0].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[0].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                                      src="./assets/ic_airticket/vna.png">
                                    <img class="img-logo-new" *ngIf="trip.bookingsComboData[0].airlineName.indexOf('JETSTAR') != -1"
                                      src="./assets/ic_airticket/ic_jetstar_b.png">
                                    <img class="img-logo-new" *ngIf="trip.bookingsComboData[0].airlineName.indexOf('BAMBOO') != -1 "
                                      src="./assets/ic_airticket/bb.png">
              
                                  </div>
                                  <div  *ngIf="trip.bookingsComboData[0].flightNumner && !trip.bookingsComboData[0].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[0].flightNumner }} - {{trip.bookingsComboData[0].ticketClass }}</div>
                                  <div *ngIf="trip.bookingsComboData[0].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[0].flightNumberNew }} - {{trip.bookingsComboData[0].ticketClass }}
                                </div>
                                </div>
                            
                              </div>
                            </div>
                            <div class="div-gird div-pnr-od"  *ngIf="!(trip.payment_status == 3 || trip.payment_status == -2)&& (trip.payment_status == 1 || trip.payment_status == 5)">
                              <div class="padding-5-8">
                                <div>
                                  <div class="text-info text-center">Mã đặt chỗ</div>
                                </div>
                                <div class="d-flex"
                                *ngIf="trip.bookingsComboData[0].ticketCode.indexOf('T__') == -1 && !(trip.payment_status == 3 || trip.payment_status == -2)">
                                <div class="text-hold-ticket">{{ trip.bookingsComboData[0].ticketCode }}</div>
                                <img (click)="copyClipboard(trip.bookingsComboData[0].ticketCode)" class="img-copy" 
                                src="./assets/imgs/ic_copy.png">
                              </div>
                          
                            </div>
                            </div>
                            </div>
                            <div class="m-top-14 d-flex">
                              <div *ngIf="trip.bookingsComboData[0].departureTime && !trip.bookingsComboData[0].departureTimeNew" class="text-time-depart">
                                {{trip.bookingsComboData[0].departureTime}}
                              </div>
                              <div *ngIf="trip.bookingsComboData[0].departureTimeNew" class="text-time-depart">
                                {{trip.bookingsComboData[0].departureTimeNew}}
                              </div>
                              <div class="placepoint">
                              </div>
                              <div class="m-l-6">
                                <div class="text-info font-weight-500">{{trip.bookingsComboData[0].flightFrom}}</div>
                                <div class="text-name-airport m-0">{{ departAirport}} | {{ trip.bookingsComboData[0].departCode }}</div>
                              </div>
                              </div>
                              <div class="placeline-stops">
                              </div>
                              <div class="d-flex" style="margin-top: -16px">
                                <div class="text-time-return">
                                  {{trip.bookingsComboData[0].arrivalTime}}
                                </div>
                                <div class="placepoint">
                                </div>
                                <div class="m-l-6">
                                  <div class="text-info font-weight-500">{{trip.bookingsComboData[0].flightTo}}</div>
                                  <div class="text-name-airport m-0">{{ returnAirport}} | {{ trip.bookingsComboData[0].arrivalCode }}</div>
                                </div>
                                </div>
                        
                        </div>
                        <!-- Chiều về -->
                        <div *ngIf="trip.bookingsComboData[1]">
                          <div class="div-split"></div>
              
                            <div class="d-flex text-thin m-0">
                              <div class="div-gird ">
                                <div class="div-width-100">{{ trip.bookingsComboData[1].checkOutDisplay }}</div>
                                <div class="d-flex m-top-6">
                                  <div class="div-width-200 d-flex">
                                    <div class="div-img-logo-new">
                                      <img class="img-logo-new" *ngIf="trip.bookingsComboData[1].airlineName.indexOf('VIETJET') != -1 "
                                        src="./assets/ic_airticket/vj.png">
                                      <img class="img-logo-new logo_vna"
                                        *ngIf="(trip.bookingsComboData[1].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[1].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                                        src="./assets/ic_airticket/vna.png">
                                      <img class="img-logo-new logo_vna"
                                        *ngIf="(trip.bookingsComboData[1].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[1].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                                        src="./assets/ic_airticket/vna.png">
                                      <img class="img-logo-new" *ngIf="trip.bookingsComboData[1].airlineName.indexOf('JETSTAR') != -1"
                                        src="./assets/ic_airticket/ic_jetstar_b.png">
                                      <img class="img-logo-new" *ngIf="trip.bookingsComboData[1].airlineName.indexOf('BAMBOO') != -1 "
                                        src="./assets/ic_airticket/bb.png">
                
                                    </div>
                                    <div *ngIf="trip.bookingsComboData[1].flightNumner && !trip.bookingsComboData[1].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[1].flightNumner }} - {{trip.bookingsComboData[1].ticketClass }}</div>
                                    <div *ngIf="trip.bookingsComboData[1].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[1].flightNumberNew }} - {{trip.bookingsComboData[1].ticketClass }}
                                  </div>
                                  </div>
                              
                                </div>
                              </div>
                              <div class="div-gird div-pnr-od" *ngIf="!(trip.payment_status == 3 || trip.payment_status == -2)&& (trip.payment_status == 1 || trip.payment_status == 5)">
                                <div class="padding-5-8">
                                  <div >
                                    <div class="text-info text-center">Mã đặt chỗ</div>
                                  </div>
                                  <div class="d-flex"
                                  *ngIf="trip.bookingsComboData[1].ticketCode.indexOf('T__') == -1">
                                  <div class="text-hold-ticket">{{ trip.bookingsComboData[1].ticketCode }}</div>
                                  <img class="img-copy" (click)="copyClipboard(trip.bookingsComboData[1].ticketCode)"
                                  src="./assets/imgs/ic_copy.png">
                                </div>
                            
                              </div>
                              </div>
                              </div>
                              <div class="m-top-14 d-flex">
                                <div *ngIf="trip.bookingsComboData[1].departureTime && !trip.bookingsComboData[1].departureTimeNew" class="text-time-depart">
                                  {{trip.bookingsComboData[1].departureTime}}
                                </div>
                                <div *ngIf="trip.bookingsComboData[1].departureTimeNew" class="text-time-depart">
                                  {{trip.bookingsComboData[1].departureTimeNew}}
                                </div>
                                <div class="placepoint">
                                </div>
                                <div class="m-l-6">
                                  <div class="text-info font-weight-500">{{trip.bookingsComboData[1].flightFrom}}</div>
                                  <div class="text-name-airport m-0">{{ returnAirport}} | {{ trip.bookingsComboData[1].departCode }}</div>
                                </div>
                                </div>
                                <div class="placeline-return-combo">
                                </div>
                                <div class="d-flex" style="margin-top: 16px">
                                  <div class="text-time-return">
                                    {{trip.bookingsComboData[1].arrivalTime}}
                                  </div>
                                  <div class="placepoint">
                                  </div>
                                  <div class="m-l-6">
                                    <div class="text-info font-weight-500">{{trip.bookingsComboData[1].flightTo}}</div>
                                    <div class="text-name-airport m-0">{{ departAirport}} | {{ trip.bookingsComboData[1].arrivalCode }}</div>
                                  </div>
                                  </div>
              
                        </div>
                      </div>
                      <div *ngIf="trip.bookingsComboData  && trip.booking_type!='COMBO_VXR'" class="div-line-new" style="margin-left: -16px;margin-right: -16px;margin-top: 8px;">
              
                      </div>
                      <div *ngIf="trip.bookingsComboData  && trip.booking_type!='COMBO_VXR'">
                        <div class="p-top-8" *ngFor="let pax of trip.bookingsComboData[0].passengers; let idx = index">
                  
                          <div class="div-pax-lug">
                          <div
                              [ngClass]="idx==0 ? 'pax-name m-top-16' : (pax.arrlug && pax.arrlug.length >0) ? 'pax-name m-top-27' : ( (idx == trip.bookingsComboData[0].passengers.length -1 && trip.bookingsComboData[0].passengers[trip.bookingsComboData[0].passengers.length-2] && trip.bookingsComboData[0].passengers[trip.bookingsComboData[0].passengers.length-2].arrlug && trip.bookingsComboData[0].passengers[trip.bookingsComboData[0].passengers.length-2].arrlug.length >0 )? 'pax-name m-top-27' :  'pax-name m-top-16')">
                              <label class="text-info font-weight-500">{{pax.gender}}. <span >{{pax.name}}</span> <span class="text-info"
                                  *ngIf="!pax.isAdult && pax.dob"> {{pax.dob}}</span></label></div>
                            <!-- <div class="pax-type ">{{pax.gender}}</div> -->
                        </div>
                        
                          <div class="d-flex m-top-13 h-26" *ngIf="!pax.isInfant">
                            <div class="text-name-airport witdh-80 align-self-end ">
                              {{ trip.bookingsComboData[0].departCode }} - {{ trip.bookingsComboData[0].arrivalCode }}
                            </div>
                            <div class="d-flex m-left-4">
                              <img style="width:24px;height:24px" src="./assets/imgs/ic_handbag.svg"/>
                              <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{baggageHandedDepart}}</div>
                            </div>
                            <div *ngIf="pax.hanhLyshow && pax.hanhLyshow!='0'" class="d-flex m-left-4">
                              <img  src="./assets/imgs/ic_airdrop.svg"/>
                              <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{pax.hanhLyshow}} kg</div>
                            </div>
                            <div *ngIf="!pax.hanhLyshow||pax.hanhLyshow=='0'" class="d-flex m-left-4">
                              <img  src="./assets/imgs/ic_airdrop.svg"/>
                              <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">không có</div>
                            </div>
                            <div *ngIf="pax.seatNumber" class="d-flex m-left-4">
                              <img  src="./assets/imgs/ic_seat.svg"/>
                              <div class="text-info font-weight-500 m-left-4 align-self-end">{{pax.seatNumber}}</div>
                            </div>
                          
                          </div>
                          <div class="d-flex m-top-13  h-26" *ngIf=" trip.bookingsComboData[1].airlineCode && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && !pax.isInfant">
                            <div class="text-name-airport witdh-80 align-self-end ">
                              {{ trip.bookingsComboData[1].departCode }} - {{ trip.bookingsComboData[1].arrivalCode }}
                            </div>
                            <div class="d-flex m-left-4">
                              <img  src="./assets/imgs/ic_handbag.svg"/>
                              <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{baggageHandedReturn}}</div>
                            </div>
                            <div *ngIf="trip.bookingsComboData[1].passengers[idx].hanhLyshow && trip.bookingsComboData[1].passengers[idx].hanhLyshow!='0'" class="d-flex m-left-4">
                              <img  src="./assets/imgs/ic_airdrop.svg"/>
                              <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{trip.bookingsComboData[1].passengers[idx].hanhLyshow}} kg</div>
                            </div>
                            <div *ngIf="(!trip.bookingsComboData[1].passengers[idx].hanhLyshow||trip.bookingsComboData[1].passengers[idx].hanhLyshow=='0')" class="d-flex m-left-4">
                              <img  src="./assets/imgs/ic_airdrop.svg"/>
                              <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">không có</div>
                            </div>
                            <div *ngIf="trip.bookingsComboData[1].passengers[idx].seatNumber" class="d-flex m-left-4">
                            <img  src="./assets/imgs/ic_seat.svg"/>
                            <div class="text-info font-weight-500 m-left-4 align-self-end">{{trip.bookingsComboData[1].passengers[idx].seatNumber}}</div>
                          </div>
                          </div>
                      
                        </div>
                        <div *ngIf="trip.hadCheckinOnline" class="div-line-new" style="margin-left: -16px;margin-right: -16px;margin-top: 8px;"></div>
                        <div *ngIf="trip.hadCheckinOnline" class="div-checkin-online-combo">
                          <div class="d-flex">
                            <div class="div-icon-check">
                              <img  class="img-check"  src="./assets/ic_mytripbooking/check.svg">
                            </div>
                            <div class="div-text-checkin">Đã có thẻ lên máy bay (Boarding Pass)</div>
                          </div>
                           <div  class="text-title-broading m-top-12" *ngIf="trip.hadCheckinOnlineDepart">
                            Chiều đi
                          </div>
                           <div *ngFor="let pass of trip.bookingjson[0].Passengers; let idx = index">
                            <div class="d-flex align-items-end m-top-12"  *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
                          
                                <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                                <img  (click)="downloadimg(pass,trip)" src="./assets/ic_mytripbooking/download.svg">
                                <img  (click)="share(pass)" class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                            </div>
                        </div>
                        <div class="text-title-broading m-top-12" *ngIf="trip.bookingjson[1] && trip.hadCheckinOnlineReturn">
                          Chiều về
                        </div>
                   
                        <div *ngIf="trip.bookingjson[1] && trip.bookingjson[1].Passengers[0].CheckinInfo">
                          <div *ngFor="let pass of trip.bookingjson[1].Passengers; let idx = index">
                            <div class="d-flex align-items-end m-top-12"  *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
                       
                              <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                              <img (click)="downloadimg(pass,trip)"  src="./assets/ic_mytripbooking/download.svg">
                              <img (click)="share(pass.CheckinInfo)"  class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                          </div>
                          </div>
                          </div>
                        </div>
                      </div>
                        <!-- Vùng cho combo vxr -->
                           <div *ngIf="trip.booking_type == 'COMBO_VXR'">
                            <!-- <div class="div-split-color"></div> -->
                            <ion-row>
                              <!-- Depart -->
                              <ion-col *ngFor="let com of trip.bookingsComboData; let idx = index"
                                [ngClass]="idx==0? 'col-nopadding-left': ''">
                                <!-- Image -->
                                <div>
                                  <ion-row *ngIf="idx == 0" class="div-flight-label">
                                    <ion-col>Chiều đi <span
                                      class="text-code-vxr">{{trip.bookingsComboData[0].ticketCode}}</span></ion-col>
                                  </ion-row>
                                  <ion-row *ngIf="idx == 1" class="div-flight-label">
                                    <ion-col>Chiều về <span
                                        class="text-code-vxr">{{trip.bookingsComboData[1].ticketCode}}</span></ion-col>
                                  </ion-row>
                                  <ion-row>
                                    <ion-col size="12">
                                      <div class="combo-info">
                                        <!-- date -->
                                        <div class="combo-departure-date">
                                          <span *ngIf="idx==0" class="checkin-label">{{com.departureDate}}</span>
                                          <span *ngIf="idx==1" class="checkin-label">{{com.departureDate}}</span>
                                        </div>
                                        <!-- time -->
                                        <div class="combo-departure-time">
                                          <span *ngIf="idx==0 && com.changeFlightInfo"
                                            [ngClass]="idx==0 && com.changeFlightInfo ? 'cin-departure-time-label cls-strike' : 'cin-departure-time-label' ">{{com.oldFlightTime}}
                                            → {{com.arrivalTime}}</span>
                                          <span *ngIf="idx==1 && com.changeFlightInfo"
                                            [ngClass]="idx==1 && com.changeFlightInfo ? 'cin-departure-time-label cls-strike' : 'cin-departure-time-label' ">{{com.oldFlightTime}}
                                            → {{com.arrivalTime}}</span>
                                        </div>
                                        <div class="combo-flight-change">
                                          <span *ngIf="idx==0 && !com.changeFlightInfo"
                                            class="cin-departure-time-label">{{com.departureTime}} → {{com.arrivalTime}}</span>
                                          <span *ngIf="idx==1 && !com.changeFlightInfo"
                                            class="cin-departure-time-label">{{com.departureTime}} → {{com.arrivalTime}}</span>
                                        </div>
                                        <!-- location -->
                                        <div class="combo-flight">
                                          <span *ngIf="idx==0" class="flight-from">{{com.flightFrom}} → {{com.flightTo}}</span>
                                          <span *ngIf="idx==1" class="flight-from">{{com.flightFrom}} → {{com.flightTo}}</span>
                                        </div>
                                        <!-- flightNumner -->
                                        <div *ngIf="idx==0" class="flight-numner">{{com.flightNumner}}</div>
                                        <div *ngIf="idx==1" class="flight-numner">{{com.flightNumner}}</div>
                                      </div>
                                    </ion-col>
                                  </ion-row>
                                </div>
                                <!-- Info depart -->
                              </ion-col>
                            </ion-row>
                          </div>
                     
                    
                      <div *ngIf="trip.bookingsComboData" class="div-line-new" style="margin-left: -16px;margin-right: -16px;margin-top: 8px;"></div>
                        <div (click)="showtripdetail(trip)" class="item-room-detail" *ngIf="!isFlyBooking && !trip.bookingOffType && trip.booking_type!='TICKET'">
                          <div [ngClass]="!trip.combo_name? 'div-wrapimg img-list' : 'div-wrapimg-1 img-list-1'" class="div-wrapimg img-list" >
                            <div *ngIf="trip.avatar else noavatar">
                              <img  [ngClass]="!trip.combo_name? 'img-avatar ava-list' : 'img-avatar-1 ava-list-1'"  src="{{trip.avatar}}">
                              <img *ngIf="trip.avatar.indexOf('i.travelapi.com') != -1" [ngClass]="!trip.combo_name? 'img-avatar ava-list' : 'img-avatar-1 ava-list-1'" src="{{trip.avatar}}">
                            </div>
                            <!-- <img *ngIf="trip.avatar else noavatar" class="img-avatar ava-list" src="https:{{trip.avatar}}"> -->
                            <ng-template #noavatar>
                              <img class="img-avatar no-ava-list" src="https://cdn1.ivivu.com/iVivu/2018/02/07/15/noimage-104x104.png">
                            </ng-template>
                          </div>
                        
                              <div class="col-mytrip-text-description  div-height-120px">
                                <div >
                                  <div *ngIf="trip.hotel_name && !trip.isFlyBooking && !trip.bookingOffType">
                                    <ion-label style=" -webkit-box-orient: vertical" class="label-comboname div-name-hotel">{{trip.hotel_name}}
                                    
                                    </ion-label>
                                  </div> 
                                      <!-- Nội dung combo nếu có -->
                                  <div *ngIf="trip.combo_name && !trip.isFlyBooking && !trip.bookingOffType && trip.booking_type!='TICKET'" class="div-comboname">
                                    <label >{{trip.combo_name}}</label>
                                  </div>
                          
                                
                                    <!-- địa chỉ -->
                                    <ion-row>
                                      <ion-col size="1"  class="text-address">
                                        <img style="height:12px" src="./assets/ic_hoteldetail/group.svg">
                                      </ion-col>
                                      <ion-col class="text-address text-address-combo" [ngClass]="trip.payment_status == 1 ? '': ''">
                                          <label>{{trip.address}}</label>
                                      </ion-col>
                                    </ion-row>
                                    <!-- số đt -->
                                    <ion-row *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) && trip.booking_type!='TICKET'">
                                      <ion-col size="1"  class="col-address ">
                                        <img style="height:12px" src="./assets/imgs/ic_call_offline.svg">
                                      </ion-col>
                                      <ion-col class="col-address text-wrap" [ngClass]="trip.payment_status == 1 ? '': ''">
                                          <label>{{trip.hotelPhone}}</label>
                                      </ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="trip.booking_type == 'TICKET'" class="row-height-listtrip p-top-8" >
                                      <ion-col size="1" class="col-address">
                                        <img class="h-15" src="./assets/imgs/ic_date.svg">
                                        
                                      </ion-col>
                                 
  
                                      <ion-col class="col-address" >
                                        {{trip.VVCCheckinDisplay}}
                                      </ion-col>
                                    </ion-row>
  
                                    <ion-row class="row-height-listtrip p-top-4" *ngIf="trip.booking_type == 'TICKET'">
                                      <ion-col size="1" class="col-address">
                                        <img class="h-15" src="./assets/ic_ticket/ticket.svg">
                                        
                                      </ion-col>
                                    
                                      <ion-col  class="col-ticket-name">
                                        <label >{{trip.combo_name}}</label>
                                      </ion-col>
                                    </ion-row>
                              </div>
                        </div>
                        </div>
                        <!-- vé vui chơi -->
                        <div class="m-top-22 div-bkg-ticket-content"
                        *ngIf="trip.booking_type == 'TICKET' " >
                        <div class="div-bkg-ticket m-top-8">
                          <div class="div-ticket-info d-flex">
                            <div class="div-image"><img class="img-avatar" [src]="trip.avatar"></div>
                            <div class="div-ticket-name m-left-12">
                                <div class="text-ticket-name">{{trip.hotel_name}}</div>
                                <div class="text-ticket-address m-top-8 d-flex">
                                  <div class="icon-local"><img class="img-local" src="./assets/imgs/location.svg"></div>
                                  <div class="cls-hidden-row">{{trip.address}}</div>
                                 
                                </div>
                            </div>
                          </div>
                          <div class="div-ticket-border-bottom m-top-16 m-bottom-24"></div>
                          <div class="div-ticket-info">
                            <div class="d-flex">
                                <div class="div-icon-left"><img class="icon-date" src="./assets/ic_ticket/callendar.svg"></div>
                                <div class="text-date m-left-4">{{trip.VVCCheckinDisplay}}</div>
                            </div>
                            <div class="d-flex m-top-12">
                              <div class="div-icon-left"><img class="h-15" src="./assets/ic_ticket/ticket.svg"></div>
                              <div class=" m-left-4">
                                <div class="text-page-name">{{trip.combo_name}}</div>
                                <div class="text-pax m-top-4">{{trip.paxDisplay}}</div>
                                </div>
                            </div>
                          </div>
                          
                        </div>
                        <div class="div-bkg-ticket m-top-16" *ngIf="ischeckqrLink">
                          <div class="div-ticket-bkg" *ngFor="let itemqr of objectDetail.listNotes;let i=index">
                            <div class="div-name text-name-ticket">{{objectDetail.experienceName}} - {{i+1}}</div>
                            <div class="padding-8-12">
                              <div class="text-title-ticket">
                                Gói
                              </div>
                              <div class="text-content m-top-8">
                                {{objectDetail.packageName}}
                              </div>
                              <div class="d-flex m-top-8">
                                <div class="text-title-ticket w-110 align-self-end">
                                  Ngày
                                </div>
                                <div class="text-content">
                                  {{objectDetail.startDateShow}}
                                </div>
                              </div>
                              <div class="d-flex m-top-8" *ngIf="objectDetail && objectDetail.orderNumber">
                                <div class="text-title-ticket w-110 align-self-end">
                                  Order Number
                                </div>
                                <div class="text-content">
                                  {{objectDetail.orderNumber}}
                                </div>
                              </div>
                               <div class="d-flex m-top-8" *ngIf="objectDetail && objectDetail.confirmationCode">
                                <div class="text-title-ticket w-110 align-self-end">
                                  Mã xác nhận
                                </div>
                                <div class="text-content">
                                  {{objectDetail.confirmationCode}}
                                </div>
                              </div>
                            </div>
                           
                            <div *ngIf="itemqr.qrLink" class="div-bkg-qrcode" (click)="showQrCodeSlide()">
                              <img class="img-qrcode" src={{itemqr.qrLink}}>
                            </div>
                            <div *ngIf="itemqr.token" class="div-bkg-ticketcode">{{itemqr.token}}</div>
                            <div *ngIf="itemqr.title" class="div-bkg-pax m-top-2">{{itemqr.title}}</div>
                          </div>
                  
                        </div>
                        <div class="div-bkg-ticket" *ngIf="!ischeckqrLink">
                          
                          <div *ngIf="((objSummary && ticketChangeLocation) || (objectDetail && objectDetail.fileUrls && objectDetail.fileUrls.length>0)) else showConfirmationCode" class="div-ticket-location m-top-24">
                            <div class="exp-name text-name-ticket" *ngIf="objSummary && objSummary.expeName">{{objSummary.expeName}}</div>
                            <div class="exp-name text-name-ticket" *ngIf="!objSummary && objectDetail && objectDetail.experienceName">{{objectDetail.experienceName}}</div>
                            <div class="exp-name text-sub-download p-top-8" *ngIf="objectDetail && objectDetail.fileUrls && objectDetail.fileUrls.length>0">Tải về máy hoặc mở link để sử dụng dịch vụ</div>
                           
                            <div  *ngIf="objectDetail && objectDetail.fileUrls && objectDetail.fileUrls.length>0">
                              <div class="div-v-align p-left-8 m-top-16 d-flex" *ngFor="let fileurl of ticketDownloadFiles">
                                <div class="div-link" (click)="downloadPDFVC(fileurl.url)"><a >{{fileurl.name}}</a></div>
                                <div class="div-button-ticket m-right-8" (click)="downloadPDFVC(fileurl.url)"> <img class="img-button-ticket" src="./assets/ic_ticket/download.svg" /></div>
                                <div class="div-button-ticket m-right-8" (click)="sharePDF(fileurl.url)"><img class="img-button-ticket" src="./assets/ic_ticket/share.svg" /></div>
                              </div>
                              
                            </div>
                            <div *ngIf="ticketChangeLocation" class="div-p8">
                              <div class="text-normal">Địa điểm đổi vé:</div>
                              <div class="text-title m-top-8">{{ticketChangeLocation}}</div>
                            </div>
                            <div class="div-p8" *ngIf="showIncludeContent" [innerHTML]="showIncludeContent"></div>
                          </div>

                          <ng-template #showConfirmationCode>
                            <div class="div-ticket-location m-top-24" *ngIf="objectDetail">
                              <div class="exp-name text-name-ticket">{{objectDetail.experienceName}}</div>
                              <div class="padding-8-12">
                                <div class="text-title-ticket">
                                  Gói
                                </div>
                                <div class="text-content m-top-8">
                                  {{objectDetail.packageName}}
                                </div>
                                <div class="d-flex m-top-8">
                                  <div class="text-title-ticket w-110 align-self-end">
                                    Ngày
                                  </div>
                                  <div class="text-content">
                                    {{objectDetail.startDateShow}}
                                  </div>
                                </div>
                                <div class="d-flex m-top-8" *ngIf="objectDetail && objectDetail.orderNumber">
                                  <div class="text-title-ticket w-110 align-self-end">
                                    Order Number
                                  </div>
                                  <div class="text-content">
                                    {{objectDetail.orderNumber}}
                                  </div>
                                </div>
                                 <div class="d-flex m-top-8" *ngIf="objectDetail && objectDetail.confirmationCode">
                                  <div class="text-title-ticket w-110 align-self-end">
                                    Mã xác nhận
                                  </div>
                                  <div class="text-content">
                                    {{objectDetail.confirmationCode}}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </ng-template>

                          <div *ngIf="trip.objdataRaw" class="div-location">
                                      
                            <div class="div-options">
                              <div *ngIf="trip.kkdayRender" class="text-title-ticket">
                                {{ trip.kkdayRender[1].label}}
                              </div>
                              <div class="text-options-select">{{trip.objdataRaw[0].name}}</div>
                              <div class="text-options">{{trip.objdataRaw[0].address}}</div>
                              <div class="d-flex">
                                <div class="text-options">{{trip.objdataRaw[0].s_time}}</div> <div class="m-5"> ~ </div> <div class="text-options">{{trip.objdataRaw[0].e_time}}</div>
                              </div>
                            
                            </div>
                          </div>
            
                        </div>
                        
                        <div class="div-split-panel m-top-24 m-bottom-16"></div>
                        <div class="d-flex " (click)="showPrice()">
                          <div class="text-info-2 font-weight-500" >
                            Giá bao gồm
                          </div>
                          <div *ngIf="!expandPrice" class="position-absolute">
                            <img src="./assets/imgs/ic_expand.svg" />
                          </div>
                          <div *ngIf="expandPrice" class="position-absolute">
                            <img src="./assets/imgs/ic_expand_down.svg" />
                          </div>
                        </div>
                          <div *ngIf="expandPrice" class="div-expand-price m-top-16 ">
                            <div class="d-flex" *ngIf="objSummary && objSummary.adultNo && objSummary.adultAvgPrice">
                                <div class="text-left div-width-100">Người lớn x<span>{{objSummary.adultNo}}</span></div>
                                <div class="text-price-right div-width-100">{{gf.convertNumberToString(objSummary.adultAvgPrice)}}</div>
                            </div>
                            <div class="d-flex m-top-8" *ngIf="objSummary && objSummary.childNo && objSummary.childAvgPrice">
                              <div class="text-left div-width-100">Trẻ em x<span>{{objSummary.childNo}}</span></div>
                              <div class="text-price-right div-width-100">{{gf.convertNumberToString(objSummary.childAvgPrice)}}</div>
                            </div>
            
                            <div class="d-flex m-top-8" *ngIf="objSummary && objSummary.custom1No && objSummary.custom1AvgPrice">
                              <div class="text-left div-width-100">{{objSummary.custom1Name}} x<span>{{objSummary.custom1No}}</span></div>
                              <div class="text-price-right div-width-100">{{gf.convertNumberToString(objSummary.custom1AvgPrice)}}</div>
                            </div>
            
                            <div class="d-flex m-top-8" *ngIf="objSummary && objSummary.custom2No && objSummary.custom2AvgPrice">
                              <div class="text-left div-width-100">{{objSummary.custom2Name}} x<span>{{objSummary.custom2No}}</span></div>
                              <div class="text-price-right div-width-100">{{gf.convertNumberToString(objSummary.custom2AvgPrice)}}</div>
                            </div>
                            <div *ngIf="trip.deal_no && trip.promotionDiscountAmount" class="d-flex m-top-8">
                              <div class="text-left div-width-100">Ưu đãi</div>
                              <div class="text-price-right div-width-100">
                                {{gf.convertNumberToString(trip.promotionDiscountAmount)}}</div>
                            </div>
                          <div class="div-ticket-border-bottom m-top-8 m-bottom-8"></div>
            
                          <div class="d-flex">
                            <div class="text-info d-flex">
                              Tổng cộng - <div class="font-weight-600 mt4"
                                *ngIf="trip.payment_status != 3 && trip.payment_status != -2">
                                <label *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else waitpayment">Đã thanh
                                  toán</label>
                                <ng-template #waitpayment>
                                  <label class="text-red">Chưa thanh toán</label>
                                </ng-template>
                              </div>
                            </div>
            
                            <div *ngIf="amount_after_tax>0" class="position-absolute text-info font-weight-600"
                              [ngClass]="(trip.payment_status == 1 || trip.payment_status == 5)?'':'text-orange f-18'">
                              {{gf.numberToCurrency(amount_after_tax, '.')}} <span class="f-14">VND</span>
                            </div>
                            <div *ngIf="amount_after_tax<=0" class="position-absolute text-info font-weight-600"
                              [ngClass]="(trip.payment_status == 1 || trip.payment_status == 5)?'':'text-orange f-18'">
                              {{gf.numberToCurrency(trip.paid_amount, '.')}} <span class="f-14">VND</span>
                            </div>
                          </div>
                          <div class="text-sub">(Giá đã bao gồm thuế & phí)</div>
            
                        </div>
            
                        <div class="d-flex m-top-16" (click)="ticketinfo()">
                          <div class="text-info-2 font-weight-500">
                            Chi tiết gói dịch vụ
                          </div>
                          <div *ngIf="!isTTV" class="position-absolute">
                            <img src="./assets/imgs/ic_expand.svg" />
                          </div>
                          <div *ngIf="isTTV" class="position-absolute">
                            <img src="./assets/imgs/ic_expand_down.svg" />
                          </div>
                        </div>
                        <div *ngIf="isTTV" class="m-top-22">
                       
                          <p [innerHTML]="includePrice"></p>
                        </div>
            
                        <div class="d-flex m-top-16 p-bottom-16" (click)="nextSupport(trip)">
                          <div class="text-info-2 font-weight-500">
                            Liên hệ hỗ trợ
                          </div>
                          <div class="position-absolute">
                            <img src="./assets/imgs/ic_expand.svg" />
                          </div>
                        </div>
                        
                       
                        </div>
                        
                      </ion-item-group>
                     
              
                      <div class="div-panel-no-margin margin-8" *ngIf="!trip.isFlyBooking && !trip.isRequest && trip.booking_type!='TICKET'" ></div>
              
                      <!-- Thông tin phòng -->
                      <div  *ngIf="!trip.isFlyBooking && trip.HotelIdERP && !trip.bookingOffType">
                      
                        <div class="d-flex m-top-16" >
                          <div>
                            <img src="./assets/imgs/ic_date.svg">
                          </div>
                          <div class="text-info m-left-4 font-weight-500">
                            {{trip.checkInDisplayCity}} → {{trip.checkOutDisplayCity}}
                          </div>
                        </div>
                        <div class="div-gird m-left-20 m-top-4">
                          <div class="text-info-1">
                            Nhận phòng: <span class="text-info">Từ {{cin}}</span>
                          </div>
                          <div class="text-info-1">
                            Trả phòng: <span class="text-info">Trước {{cout}}</span>
                          </div>
                        </div>
                        <div *ngIf="!trip.bookingOffType">
                          <div class="d-flex m-top-12">
                            <div>
                              <img src="./assets/ic_facility/ic_bed.svg">
                            </div>
                            <div class="text-info m-left-4 font-weight-500">
                              {{trip.room_name}} x{{trip.room_count}}
                            </div>
                          </div>
                            <!-- ăn sáng -->
                            <div *ngIf="trip.meal_plan"  class="d-flex m-top-12">
                              <div ><img src="./assets/ic_hoteldetail/ic_food_b.svg"></div>
                              <div class="text-info m-left-4 font-weight-500" >{{trip.meal_plan}}</div>
                          </div>
                          <div class="d-flex m-top-12">
                            <div>
                              <img src="./assets/ic_facility/ic_people.svg">
                            </div>
                            <div class="text-info m-left-4">
                              {{trip.totalPaxStr}}
                            </div>
                          </div>
                          <!-- <div class="d-flex m-top-3">
                            <div class=" div-left"><img src="./assets/ic_facility/ic_people.svg"></div>
                            <div style="font-size: 14px;">{{trip.room_count}} phòng | {{trip.totalPaxStr}}</div>
                          </div> -->
                      
              
                        </div>
                        <div *ngIf="!trip.bookingOffType && (trip.payment_status == 1 || trip.payment_status == 5) && trip.off_sup_code" class="div-bookingid d-flex m-top-12">
                          <div  class="text-info">Mã nhận phòng: 
                              <span class="text-booking-id">{{trip.off_sup_code}}</span>
                          </div>
                          <img (click)="copyClipboard(trip.off_sup_code)" class="position-absolute-24" src="./assets/imgs/ic_copy.png"/>
                        </div>
                  
                      
                      </div>
                      <div *ngIf="trip.booking_type != 'TICKET'" [ngClass]="trip.payment_status == 0 && trip.deliveryPaymentDisplay?'div-total-od-payment mt24 m-lr-8':'div-total-od mt24 m-lr-8'">
                        <div [ngClass]="trip.payment_status == 0 && trip.deliveryPaymentDisplay?'padding-12-16':'padding-12-8'">
                          <div class="d-flex">
                            <div class="text-info div-roomname">
                              {{trip.room_name}}
                            </div>
                            <div class="position-absolute text-info">
                              {{gf.numberToCurrency(totalHotel, '.')}} VND
                            </div>
                          </div>
                          <div class="text-name-airport">
                            {{trip.room_count}} phòng, {{trip.roomNight}} đêm
                          </div>
                          <div class="d-flex m-top-8" *ngIf="trip.promotionDiscountAmount&&trip.promotionDiscountAmount>0 && trip.ivivu_point>0">
                            <div class="text-info">
                              iVIVU point
                            </div>
                            <div class="position-absolute text-info">
                              {{gf.numberToCurrency(trip.promotionDiscountAmount, '.')}} VND
                            </div>
                          </div>
                          <div class="d-flex m-top-8" *ngIf="trip.promotionDiscountAmount&&trip.promotionDiscountAmount>0 && !trip.ivivu_point">
                            <div class="text-info">
                              Khuyến mãi
                            </div>
                            <div class="position-absolute text-info">
                              {{gf.numberToCurrency(trip.promotionDiscountAmount, '.')}} VND
                            </div>
                          </div>
                          <div class="d-flex m-top-8" *ngIf="trip.paid_amount&&trip.paid_amount>0&&amount_after_tax>0">
                            <div class="text-info m-top-8">
                              Đã thanh toán trước
                            </div>
                            <div class="position-absolute text-info">
                              {{gf.numberToCurrency(trip.paid_amount, '.')}} VND
                            </div>
                          </div>
                          <div  *ngIf="totalService>0" class="d-flex m-top-8">
                            <div class="text-info">
                              Phụ thu thêm
                            </div>
                            <div class="position-absolute text-info">
                              {{totalService}} VND
                            </div>
                          </div>
                          <div *ngIf="totalService>0" class="text-name-airport">
                            Thêm giường phụ
                          </div>
                          <div class="div-split"></div>
                          <div class="d-flex m-top-8">
                            <div class="text-info d-flex">
                              Tổng cộng - <div class="font-weight-600 mt4" *ngIf="!trip.isFlyBooking && trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                                <label *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else waitpayment">Đã thanh toán</label>
                                <ng-template #waitpayment>
                                    <label class="text-red">Chờ thanh toán</label>
                                </ng-template>
                              </div>
                            </div>
                            <div *ngIf="amount_after_tax>0" class="position-absolute text-info font-weight-600"
                              [ngClass]="(trip.payment_status == 1 || trip.payment_status == 5)?'':'text-orange'">
                              {{gf.numberToCurrency(amount_after_tax, '.')}} VND
                            </div>
                            <div *ngIf="amount_after_tax<=0" class="position-absolute text-info font-weight-600"
                              [ngClass]="(trip.payment_status == 1 || trip.payment_status == 5)?'':'text-orange'">
                              {{gf.numberToCurrency(trip.paid_amount, '.')}} VND
                            </div>
                          </div>
                          <div class="text-name-airport">
                            (Giá đã bao gồm thuế & phí)
                          </div>
                        </div>
                      </div>
                          <!-- Thông tin vvc -->
                          <div (click)="showtripdetail(trip)" *ngIf="listMyTrips.length >1 && trip.booking_type == 'TICKET'" class="margin-8-16 d-flex">
                            <div >
                              <div class="d-flex m-top-3">
                                <div class=" div-left"><img src="./assets/ic_facility/ic_people.svg"></div>
                                <!-- <div style="font-size: 14px;">{{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{ trip.textChildDisplay }}</span></div> -->
                                <div style="font-size: 14px;">{{trip.paxDisplay}} </div>
                              </div>
                            </div>
                            <div   class="p-absolute-16">
                              <img  class="cls-icon-img-detail"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                            </div>
                          </div>
                   
                    
                      <div *ngIf="trip.bookingOffType" class="div-bkg-off m-top-8">
                        <div class="div-bkgno d-flex align-center">
                          <div class="text-bkg">Mã booking: </div>
                          <div class="bkgoff-no">{{trip.booking_id}}</div>
                        </div> 
                        <div class="div-split-panel-bkgoff"></div>

                        <div *ngIf="trip.bookingOffType != 2">
                          <div class="text-title" *ngIf="trip.hotel_name">{{trip.hotel_name}}</div>
                          <div class="div-line-new-1 m-top-8"></div>
                            <div class="div-date d-flex">
                              <div class="div-width-100" *ngIf="trip.checkInStr">
                                  <div class="text-date-sub">Ngày đi</div>
                                  <div class="text-date">{{trip.checkInStr}}</div>
                              </div>
                              <div class="div-width-100" *ngIf="trip.checkOutStr">
                                <div class="text-date-sub">Ngày về</div>
                                <div class="text-date">{{trip.checkOutStr}}</div>
                              </div>
                            </div>
      
                          <div class="div-line-new-1 m-top-4" *ngIf="trip.room_name"></div>
      
                          <div class="text-sub-title m-top-8">
                            {{trip.room_name}}
                          </div>
                          
                          <div class="d-flex m-top-4" *ngIf="trip.bookingOffType == 1">
                            <div class="text-normal"><img src="./assets/imgs/ic_people.svg"> {{trip.room_count}} phòng | {{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span></div>
                          </div>
      
                          <div class="div-split-panel" *ngIf="trip.cus_name"></div>
      
                          <div class="text-pax-name" *ngIf="trip.cus_name">{{trip.cus_name}}</div>
                          <div class="text-normal" *ngIf="trip.cus_email">{{trip.cus_email}} <span *ngIf="trip.cus_phone"> · {{trip.cus_phone}}</span></div>
      
                        </div>
      
                        <div *ngIf="trip.bookingOffType == 2" class="m-top-8">
                          <div class="text-title" *ngIf="trip.flight_ticket_info">{{trip.flight_ticket_info}}</div>
                          <div class="div-line-new-1 m-top-8"></div>
                            <div class="div-date d-flex">
                              <div class="div-width-100" *ngIf="trip.checkInStr">
                                  <div class="text-date-sub">Ngày đi</div>
                                  <div class="text-date">{{trip.checkInStr}}</div>
                              </div>
                              <div class="div-width-100" *ngIf="trip.checkOutStr">
                                <div class="text-date-sub">Ngày về</div>
                                <div class="text-date">{{trip.checkOutStr}}</div>
                              </div>
                            </div>
      
                          <div class="div-line-new-1 m-top-4" *ngIf="trip.room_name"></div>
      
                          <div class="text-sub-title m-top-14" *ngIf="trip.room_name">{{trip.room_name}}</div>
                          <div class="text-normal m-top-4" *ngIf="trip.off_sup_code">Mã booking: {{trip.off_sup_code}}</div>
      
                          <div class="div-split-panel" *ngIf="trip.cus_name"></div>
      
                          <div class="text-pax-name" *ngIf="trip.cus_name">{{trip.cus_name}}</div>
                          <div class="text-normal" *ngIf="trip.cus_email">{{trip.cus_email}} <span *ngIf="trip.cus_phone"> · {{trip.cus_phone}}</span></div>
      
                        </div>
                        
      
                        <div class="div-split-color"></div>
                      </div>

                      <!-- Vùng bkg Flight -->
                      <div class="div-flybooking" *ngIf="trip.isFlyBooking">
                        <div *ngIf="trip.bookingsComboData[0]">
                          <div class="div-split"></div>
              
                          <div class="div-first d-flex"  >
                            <div>
                                <div class="d-flex">
                                  <div *ngIf="trip.bookingsComboData[0].departureTime && !trip.bookingsComboData[0].departureTimeNew" class="div-time">{{trip.bookingsComboData[0].departureTime}}</div>
                                  <div *ngIf="trip.bookingsComboData[0].departureTimeNew" class="div-time">{{trip.bookingsComboData[0].departureTimeNew}}</div>
                                  <div class="div-flight-time"></div>
                                  <div class="div-time">{{trip.bookingsComboData[0].arrivalTime}}</div>
                                </div>
              
                                <div class="div-split">
                                    <img src="./assets/ic_flight/icon_flight_line.svg">
                                </div>
                                
                                <div class="d-flex">
                                  <div class="div-departcode">
                                      {{trip.bookingsComboData[0].departCode}}
                                  </div>
                                  <div class="div-flight-time m-0-16">
                                    {{trip.bookingsComboData[0].flightTimeDisplay}}
                                  </div>
                              
                                  <div class="div-departcode" *ngIf="trip.bookingsComboData[0].stops == 0 ">
                                    {{trip.bookingsComboData[0].arrivalCode}}
                                  </div>
                              
                                </div>
                              </div>
                          </div>
                          <div class="'div-second d-flex p-top-8' ">
                          
                            <div class="div-logo" >
                              <img class="img-logo" [src]="trip.bookingsComboData[0].logo">
                            </div>
                
                            <div class="flight-type p-l-8 d-flex">
                              <div>{{trip.bookingsComboData[0].airlineName}} · {{trip.bookingsComboData[0].ticketClass}}</div>
                            </div>
              
                          </div>
                        </div>
              
                        <div *ngIf="trip.bookingsComboData[1] && trip.bookingsComboData[1].airlineName.indexOf('Xe Đưa Đón') ==-1">
                          <div class="div-split"></div>
              
                          <div class="div-first d-flex"  >
                            <div>
                                <div class="d-flex">
                                  <div *ngIf="trip.bookingsComboData[1].departureTime && !trip.bookingsComboData[1].departureTimeNew" class="div-time">{{trip.bookingsComboData[1].departureTime}}</div>
                                  <div *ngIf="trip.bookingsComboData[1].departureTimeNew" class="div-time">{{trip.bookingsComboData[1].departureTimeNew}}</div>
                                  <div class="div-flight-time"></div>
                                  <div class="div-time">{{trip.bookingsComboData[1].arrivalTime}}</div>
                                </div>
              
                                <div class="div-split">
                                    <img src="./assets/ic_flight/icon_flight_line.svg">
                                </div>
                                
                                <div class="d-flex">
                                  <div class="div-departcode">
                                      {{trip.bookingsComboData[1].departCode}}
                                  </div>
                                  <div class="div-flight-time m-0-16">
                                    {{trip.bookingsComboData[1].flightTimeDisplay}}
                                  </div>
                              
                                  <div class="div-departcode" *ngIf="trip.bookingsComboData[1].stops == 0 ">
                                    {{trip.bookingsComboData[1].arrivalCode}}
                                  </div>
                              
                                </div>
                              </div>
                          </div>
                          <div class="'div-second d-flex p-top-8' ">
                          
                            <div class="div-logo" >
                              <img class="img-logo" [src]="trip.bookingsComboData[1].logo">
                            </div>
                
                            <div class="flight-type p-l-8 d-flex">
                              <div>{{trip.bookingsComboData[1].airlineName}} · {{trip.bookingsComboData[1].ticketClass}}</div>
                            </div>
              
                          </div>
                        </div>
                      
                      
                      </div>
            
                      <!-- Hành lý -->
                      <div *ngIf="trip.isFlyBooking" >
                        <div class="div-split-color"></div>
                        <div>
                          <label class="pax-label">Hành Khách</label>
                        </div>
                        <div class="p-top-8" *ngFor="let pax of trip.bookingsComboData[0].passengers; let idx = index">
                          <div class="div-pax-lug">
                            <div [ngClass]="idx==0 ? 'pax-name m-top-8' : 'pax-name m-top-27'"><label>{{idx+1}}.{{pax.name}}</label></div>
                            <div class="pax-type text-right " *ngIf="pax.isAdult else isChildren">Người lớn</div>
                            <ng-template #isChildren><div class="pax-type text-right ">Trẻ em</div></ng-template>
                          </div>
              
                          <div class="div-luggest" *ngFor="let lugg of pax.arrlug">
                            {{lugg.lugname}} | {{lugg.lugweight}}
                          </div>
                        </div>
                      </div>
                      <!-- End vùng cho combo -->
              
                      <!-- Giá + chính sách hủy -->
                      <div class="div-price-and-policy" *ngIf="trip.bookingOffType && (trip.inclusion || trip.off_hotel_paypolicy)">
                        <div *ngIf="trip.inclusion">
                            <div class="div-price-title" >
                              Giá bao gồm
                            </div>
              
                            <div class="div-text-price">
                                {{trip.inclusion}}
                            </div> 
                        </div>
              
                        <div [ngClass]="trip.inclusion ? 'p-top-12' : ''" *ngIf="trip.off_hotel_paypolicy">
                            <div class="div-price-title" >
                              Chính sách hủy
                            </div>
              
                            <div class="div-text-price" [innerHTML]="trip.off_hotel_paypolicy">
                                <!-- {{trip.off_hotel_paypolicy}} -->
                            </div> 
                        </div>
                        <div class="div-split-color" *ngIf="!trip.isRequestTrip"></div>
                    </div>
              
                      <!-- Bảo hiểm ---------------- -->
                      <div class="div-insurance div-insurance-detail" *ngIf="arrinsurrance && arrinsurrance.length >0">
                        <div class="div-split-insurrance"></div>
                        <div class="row-label-insurance">
                            <img class="logo-insurance" src="./assets/logo/logo_1.svg">
                          <label class="cls-label-text p-lt-4">Thông tin bảo hiểm</label>
                        </div>
              
                        <div *ngFor="let item of arrinsurrance; let idx = index" class="m-r-3">
                          <div [ngClass]="idx ==0 ? 'div-item-insurance p-top-8' : 'div-item-insurance'">
              
                            <div [ngClass]="idx==0 ? 'div-pax-lug d-flex-insurrance m-top-8' : 'div-pax-lug d-flex-insurrance m-top-27' ">
                            <div class="pax-name">
                              <div class="div-text-pax-name">{{idx+1}}. <span class="f-bold">{{item.customer_name}}</span> 
                                </div>
                            </div>
                                  <div class="div-cathay r8">
                                    <span (click)="showActionSheetInsurrance(trip, item, false)" class="text-cathay" *ngIf="!item.claimed else hadclaimed" > <img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/>  <img class="img-cathay" src="./assets/imgs/vector.svg">Yêu cầu bảo hiểm</span>
                                    <ng-template #hadclaimed><img class="img-hadclaimed-fly" src="./assets/imgs/icon_action_done.svg"><label>Đã yêu cầu</label></ng-template>
                                  </div>
                          </div>
                          </div>
                        </div>
              
                        <div class="div-child-insurrance m-top-16 m-r-3" *ngIf="arrchildinsurrance && arrchildinsurrance.length >0">
                          <label class="cls-label-text">Trẻ em đi kèm</label>
                          <div *ngFor="let itemchild of arrchildinsurrance; let idx = index">
                              <div [ngClass]="idx==0 ? 'div-pax-lug m-top-8' : 'div-pax-lug m-top-27' ">
                                <div class="d-flex-insurrance">
                                  <div class="pax-name">
                                    <div class="div-text-pax-name-child">{{idx+1}}. <span class="f-bold">{{itemchild.customer_name}}</span> 
                                      <span class="text-age"
                                        *ngIf="itemchild.customer_dob"> ({{itemchild.customer_dob}})</span>
                                      </div>
                                  </div>
                                        <div class="div-cathay r8">
                                          <span (click)="showActionSheetInsurrance(trip, itemchild, true)" class="text-cathay" *ngIf="!itemchild.claimed else hadclaimed" > <img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/>  <img class="img-cathay" src="./assets/imgs/vector.svg">Yêu cầu bảo hiểm</span>
                                          <ng-template #hadclaimed><img class="img-hadclaimed-fly" src="./assets/imgs/icon_action_done.svg"><label>Đã yêu cầu</label></ng-template>
                                        </div>
                                </div>
                                <div *ngIf="!itemchild.validChildDob" class="text-validchildage">
                                    (Trẻ dưới 14 tuổi cần claim chung người lớn)
                                </div>
                              </div>
                            </div>
                        </div>
              
                        <div class="div-split-panel"></div>
              
                        <div class="insurrance-contact p-bottom-8 padding-insurrance-contact" (click)="makeCallSupport(084838298520)">
                          <div class="insurrance-contact-name"><label class="item-text">Bảo hiểm tai nạn <span class="text-support-center">+84838298520</span></label></div>
                            <div class="insurrance-contact-arrow s-text img-call">
                              <img class="img-support" src="./assets/imgs/ic_call.svg">
                            </div>
                        </div>
              
                        <div class="insurrance-contact" (click)="showInsurranceInfo()">
                          <div class="insurrance-contact-name"><label class="item-text">Bảo hiểm du lịch và chuyến bay</label></div>
                          
                          <div class="insurrance-contact-arrow s-text text-right w-24">
                            <!-- <ion-icon class="icon-arrow-right" item-end name="ios-arrow-round-forward"></ion-icon> -->
                            <img  class="cls-icon-img "  src="./assets/ic_mytripbooking/ico_arrow.svg">
                          </div>
                        </div>
              
              
                      </div>
                    
                    </div>
                  </div>
                <!-- Booking Flight -->
                <div class="div-flighttrip div-flighttrip-onebkg p-top-12" *ngIf="!trip.isRequestTrip && trip.isFlyBooking">
                  <div>
                  <!-- <div [ngClass]="i == 0 ? 'div-mytrip' : 'div-mytrip'"> -->
                      <div [ngClass]="i == 0 ? 'first-content padding-16-8 m-top-42' : 'first-content padding-8'">
                      <ion-item-group>
                          <!-- <div *ngIf="trip.combo_name">
                          <ion-label class="label-comboname">{{trip.combo_name}}</ion-label>
                          </div> -->
              
                          <!-- Vùng booking fly -->
                          <div>
                            <div class="div-delivery_payment-od m-bottom-16" *ngIf="trip.payment_status == 0 && trip.delivery_payment_date_display">
                                Chờ thanh toán tới <span class="text-waitpayment">{{ trip.delivery_payment_time_display}}</span> ngày <span class="text-waitpayment">{{ trip.delivery_payment_date_display}}</span></div>
                            <div class="div-flybooking">
                              <div *ngIf="!ischeckStops">
                                <!-- Chiều đi -->
                                <div>
                                    <div class="d-flex text-thin m-0">
                                    <div class="div-gird ">
                                        <div class="div-width-100">{{ trip.checkInDisplay }}</div>
                                        <div class="d-flex m-top-6">
                                        <div class="div-width-200 d-flex">
                                            <div class="div-img-logo-new">
                                            <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('VIETJET') != -1 "
                                                src="./assets/ic_airticket/vj.png">
                                            <img class="img-logo-new logo_vna"
                                                *ngIf="(trip.itemdepart.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemdepart.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                                                src="./assets/ic_airticket/vna.png">
                                            <img class="img-logo-new logo_vna"
                                                *ngIf="(trip.itemdepart.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemdepart.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                                                src="./assets/ic_airticket/vna.png">
                                            <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('JETSTAR') != -1"
                                                src="./assets/ic_airticket/ic_jetstar_b.png">
                                            <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('BAMBOO') != -1 "
                                                src="./assets/ic_airticket/bb.png">
                        
                                            </div>
                                              <div *ngIf="trip.itemdepart.flightNumner && !trip.itemdepart.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemdepart.flightNumner }} - {{trip.itemdepart.ticketClass }}</div>
                                            <div *ngIf="trip.itemdepart.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemdepart.flightNumberNew }} - {{trip.itemdepart.ticketClass }}</div>
                                        </div>
                                    
                                        </div>
                                    </div>
                                    <div class="div-gird div-pnr-od"  *ngIf="!(trip.payment_status == 3 || trip.payment_status == -2) && (trip.payment_status == 1 || trip.payment_status == 5)">
                                        <div class="padding-5-8">
                                        <div >
                                            <div class="text-info text-center">Mã đặt chỗ</div>
                                        </div>
                                        <div class="d-flex"
                                        *ngIf="trip.itemdepart.ticketCode.indexOf('T__') == -1">
                                        <div class="text-hold-ticket">{{ trip.itemdepart.ticketCode }}</div>
                                        <img (click)="copyClipboard(trip.itemdepart.ticketCode)" class="img-copy" 
                                        src="./assets/imgs/ic_copy.png">
                                        </div>
                                    
                                    </div>
                                    </div>
                                    </div>
                                    <div class="m-top-14 d-flex">
                                      <div *ngIf="trip.itemdepart.departureTime && !trip.itemdepart.departureTimeNew" class="text-time-depart">
                                        {{trip.itemdepart.departureTime}}
                                        </div>
                                        <div *ngIf="trip.itemdepart.departureTimeNew" class="text-time-depart">
                                          {{trip.itemdepart.departureTimeNew}}
                                          </div>
                                        <div class="placepoint">
                                        </div>
                                        <div class="m-l-6">
                                        <div class="text-info font-weight-500">{{trip.flightFrom}}</div>
                                        <div class="text-name-airport m-0">{{ trip.departAirport}} | {{ trip.itemdepart.departCode }}</div>
                                        </div>
                                        </div>
                                        <!-- <div [ngClass]="trip.payment_status == 0 && trip.delivery_payment_date_display?'placeline-waitpayment-od':'placeline-od'" > -->
                                        <div class="placeline-stops" ></div>
                            
                                        <div class="d-flex" style="margin-top: -16px">
                                        <div class="text-time-return">
                                            {{trip.itemdepart.arrivalTime}}
                                        </div>
                                        <div  class="placepoint">
                                        </div>
                                        <div class="m-l-6">
                                            <div class="text-info font-weight-500">{{trip.flightTo}}</div>
                                            <div class="text-name-airport m-0">{{ trip.returnAirport}} | {{ trip.itemdepart.arrivalCode }}</div>
                                        </div>
                                        </div>
                            
                                </div>
                                <!-- Chiều về -->
                                <div *ngIf="trip.textReturn && trip.bookingsComboData[1].airlineCode && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 ">
                                    <div class="div-split"></div>
                    
                                    <div class="d-flex text-thin m-0">
                                        <div class="div-gird ">
                                        <div class="div-width-100">{{ trip.checkOutDisplay }}</div>
                                        <div class="d-flex m-top-6">
                                            <div class="div-width-200 d-flex">
                                            <div class="div-img-logo-new">
                                                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('VIETJET') != -1 "
                                                src="./assets/ic_airticket/vj.png">
                                                <img class="img-logo-new logo_vna"
                                                *ngIf="(trip.itemreturn.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemreturn.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                                                src="./assets/ic_airticket/vna.png">
                                                <img class="img-logo-new logo_vna"
                                                *ngIf="(trip.itemreturn.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemreturn.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                                                src="./assets/ic_airticket/vna.png">
                                                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('JETSTAR') != -1"
                                                src="./assets/ic_airticket/ic_jetstar_b.png">
                                                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('BAMBOO') != -1 "
                                                src="./assets/ic_airticket/bb.png">
                        
                                            </div>
                                            <div *ngIf="trip.itemreturn.flightNumner && !trip.itemreturn.flightNumberNew " class="div-ticket div-overflow-ticket">{{trip.itemreturn.flightNumner }} - {{trip.itemreturn.ticketClass }}
                                            </div>
                                            <div  *ngIf="trip.itemreturn.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemreturn.flightNumberNew }} - {{trip.itemreturn.ticketClass }}
                                            </div>
                                            </div>
                                        
                                        </div>
                                        </div>
                                        <div class="div-gird div-pnr-od"  *ngIf="!(trip.payment_status == 3 || trip.payment_status == -2)&& (trip.payment_status == 1 || trip.payment_status == 5)">
                                        <div class="padding-5-8">
                                            <div >
                                            <div class="text-info text-center">Mã đặt chỗ</div>
                                            </div>
                                            <div class="d-flex"
                                            *ngIf="trip.itemreturn.ticketCode.indexOf('T__') == -1">
                                            <div class="text-hold-ticket">{{ trip.itemreturn.ticketCode }}</div>
                                            <img class="img-copy" (click)="copyClipboard(trip.itemdepart.ticketCode)"
                                            src="./assets/imgs/ic_copy.png">
                                        </div>
                                    
                                        </div>
                                        </div>
                                        </div>
                                        <div class="m-top-14 d-flex">
                                          <div *ngIf="trip.itemreturn.departureTime && !trip.itemreturn.departureTimeNew" class="text-time-depart">
                                            {{trip.itemreturn.departureTime}}
                                        </div>
                                        <div *ngIf="trip.itemreturn.departureTimeNew" class="text-time-depart">
                                          {{trip.itemreturn.departureTimeNew}}
                                        </div>
                                        <div class="placepoint">
                                        </div>
                                        <div class="m-l-6">
                                            <div class="text-info font-weight-500">{{trip.flightTo}}</div>
                                            <div class="text-name-airport m-0">{{ trip.returnAirport}} | {{ trip.itemreturn.departCode }}</div>
                                        </div>
                                        </div>
                                        <div class="placeline-stops">
                                        </div>
                                        <div class="d-flex" style="margin-top: -16px">
                                            <div class="text-time-return">
                                            {{trip.itemreturn.arrivalTime}}
                                            </div>
                                            <div class="placepoint">
                                            </div>
                                            <div class="m-l-6">
                                            <div class="text-info font-weight-500">{{trip.flightFrom}}</div>
                                            <div class="text-name-airport m-0">{{ trip.departAirport}} | {{ trip.itemreturn.arrivalCode }}</div>
                                            </div>
                                            </div>
                    
                                </div>
                              </div>
                            
                                <div *ngIf="ischeckStops">
                                  <div  *ngFor="let item of booking_json_data[0].Transits;let i=index">
                                      <div *ngIf="i!=0" class="div-stops">
                  
                                      <span class="text-info">
                                          Quá cảnh {{item.timeOverStop}} tại {{item.FromPlaceName}} ({{item.FromPlaceCode}})
                                      </span>
                                      </div>
                                      <div class="d-flex text-thin m-0"  >
                                  
                                      <div class="div-gird ">
                                          <div class="div-width-100">{{ trip.checkInDisplay }}</div>
                                          <div class="d-flex m-top-6">
                                          <div class="div-width-200 d-flex">
                                              <div class="div-img-logo-new">
                                              <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('VIETJET') != -1 "
                                                  src="./assets/ic_airticket/vj.png">
                                              <img class="img-logo-new logo_vna"
                                                  *ngIf="(trip.itemdepart.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemdepart.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                                                  src="./assets/ic_airticket/vna.png">
                                              <img class="img-logo-new logo_vna"
                                                  *ngIf="(trip.itemdepart.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemdepart.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                                                  src="./assets/ic_airticket/vna.png">
                                              <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('JETSTAR') != -1"
                                                  src="./assets/ic_airticket/ic_jetstar_b.png">
                                              <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('BAMBOO') != -1 "
                                                  src="./assets/ic_airticket/bb.png">
                          
                                              </div>
                                              <div class="div-ticket div-overflow-ticket">{{item.FlightNumber }} - {{item.TicketClass }}
                                              </div>
                                          </div>
                                      
                                          </div>
                                      </div>
                                      <div class="div-gird div-pnr-od"  *ngIf="!(trip.payment_status == 3 || trip.payment_status == -2)&& (trip.payment_status == 1 || trip.payment_status == 5)">
                                          <div class="padding-5-8">
                                          <div >
                                              <div class="text-info text-center">Mã đặt chỗ</div>
                                          </div>
                                          <div class="d-flex"
                                          *ngIf="trip.itemdepart.ticketCode.indexOf('T__') == -1">
                                          <div class="text-hold-ticket">{{ trip.itemdepart.ticketCode }}</div>
                                          <img (click)="copyClipboard(trip.itemdepart.ticketCode)" class="img-copy" 
                                          src="./assets/imgs/ic_copy.png">
                                          </div>
                                      
                                      </div>
                                      </div>
                                      </div>
                                      <div class="m-top-14 d-flex">
                                          <div class="text-time-depart">
                                          {{item.DepartureTime}}
                                          </div>
                                          <div class="placepoint">
                                          </div>
                                          <div class="m-l-6">
                                          <div class="text-info font-weight-500">{{item.FromPlaceName}}</div>
                                          <div class="text-name-airport m-0">{{ item.departAirport}} | {{ item.FromPlaceCode }}</div>
                                          </div>
                                          </div>
                                          <div  class="placeline-stops">
                                          </div>
                                          <div class="d-flex" style="margin-top: -16px">
                                          <div class="text-time-return">
                                              {{item.ArrivalTime}}
                                          </div>
                                          <div class="placepoint">
                                          </div>
                                          <div class="m-l-6">
                                              <div class="text-info font-weight-500">{{item.ToPlaceName}}</div>
                                              <div class="text-name-airport m-0">{{ item.returnAirport}} | {{ item.ToPlaceCode }}</div>
                                          </div>
                                      </div>
                                  
                                  </div>
                                <!-- Chiều về -->
                                  <div *ngIf="trip.textReturn && trip.bookingsComboData[1].airlineCode && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 ">
                                    <div class="div-split"></div>
                                    <div *ngFor="let item of booking_json_data[1].Transits;let i=index">
                                    <div *ngIf="i!=0" class="div-stops">
                
                                        <span class="text-info">
                                        Quá cảnh {{item.timeOverStop}} tại {{item.FromPlaceName}} ({{item.FromPlaceCode}})
                                        </span>
                                    </div>
                                    <div class="d-flex text-thin m-0">
                                        <div class="div-gird ">
                                        <div class="div-width-100">{{ trip.checkOutDisplay }}</div>
                                        <div class="d-flex m-top-6">
                                            <div class="div-width-200 d-flex">
                                            <div class="div-img-logo-new">
                                                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('VIETJET') != -1 "
                                                src="./assets/ic_airticket/vj.png">
                                                <img class="img-logo-new logo_vna"
                                                *ngIf="(trip.itemreturn.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemreturn.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                                                src="./assets/ic_airticket/vna.png">
                                                <img class="img-logo-new logo_vna"
                                                *ngIf="(trip.itemreturn.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemreturn.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                                                src="./assets/ic_airticket/vna.png">
                                                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('JETSTAR') != -1"
                                                src="./assets/ic_airticket/ic_jetstar_b.png">
                                                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('BAMBOO') != -1 "
                                                src="./assets/ic_airticket/bb.png">
                        
                                            </div>
                                            <div class="div-ticket div-overflow-ticket">{{item.FlightNumber }} - {{item.TicketClass }}
                                            </div>
                                            </div>
                                        
                                        </div>
                                        </div>
                                        <div class="div-gird div-pnr-od"  *ngIf="!(trip.payment_status == 3 || trip.payment_status == -2)&& (trip.payment_status == 1 || trip.payment_status == 5)">
                                        <div class="padding-5-8">
                                            <div >
                                            <div class="text-info text-center">Mã đặt chỗ</div>
                                            </div>
                                            <div class="d-flex"
                                            *ngIf="trip.itemreturn.ticketCode.indexOf('T__') == -1">
                                            <div class="text-hold-ticket">{{ trip.itemreturn.ticketCode }}</div>
                                            <img class="img-copy" (click)="copyClipboard(trip.itemdepart.ticketCode)"
                                            src="./assets/imgs/ic_copy.png">
                                        </div>
                                    
                                        </div>
                                        </div>
                                        </div>
                                        <div class="m-top-14 d-flex">
                                        <div class="text-time-depart">
                                            {{item.DepartureTime}}
                                        </div>
                                        <div class="placepoint">
                                        </div>
                                        <div class="m-l-6">
                                            <div class="text-info font-weight-500">{{item.FromPlaceName}}</div>
                                            <div class="text-name-airport m-0">{{ trip.departAirport}} | {{ item.FromPlaceCode }}</div>
                                        </div>
                                        </div>
                                        <div class="placeline-stops">
                                        </div>
                                        <div class="d-flex" style="margin-top: -16px">
                                            <div class="text-time-return">
                                            {{item.ArrivalTime}}
                                            </div>
                                            <div class="placepoint">
                                            </div>
                                            <div class="m-l-6">
                                            <div class="text-info font-weight-500">{{item.ToPlaceName}}</div>
                                            <div class="text-name-airport m-0">{{ item.returnAirport}} | {{ item.ToPlaceCode }}</div>
                                            </div>
                                            </div>
                                    </div>
                                    
                    
                                
                                  </div>
                                </div>
                
                                <div *ngIf="trip.isFlyBooking" >
                                <div class="div-split-panel"></div>
                
                                <div class="p-top-8" *ngFor="let pax of trip.itemdepart.passengers; let idx = index">
                                    <div *ngIf="trip.IsCathay" class="div-pax-lug d-flex mt16">
                                    <div
                                        [ngClass]="idx==0 ? 'pax-name' : (pax.arrlug && pax.arrlug.length >0) ? 'pax-name' : ( (idx == trip.itemdepart.passengers.length -1 && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2] && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2].arrlug && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2].arrlug.length >0 )? 'pax-name' :  'pax-name')">
                                        <div [ngClass]="!pax.isAdult && pax.dob?'div-text-pax-name-child':'div-text-pax-name'" >{{pax.gender}}. <span class="f-bold">{{pax.name}}</span> <span class="text-info"
                                            *ngIf="!pax.isAdult && pax.dob"> {{pax.dob}}</span></div>
                                        </div>
                                    <div  class="div-cathay" *ngIf="pax.IsCathay">
                                    
                                        <span (click)="requestCathay(pax.name,trip,pax.gender)" class="text-cathay" *ngIf="!pax.claimed else hadclaimed" > <img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/>Yêu cầu bảo hiểm </span>
                                        <ng-template  #hadclaimed><img class="img-hadclaimed-fly" src="./assets/imgs/icon_action_done.svg"><label>Đã yêu cầu</label></ng-template>
                                    </div>
                
                                    </div>
                                    <div *ngIf="!trip.IsCathay" class="div-pax-lug d-flex mt16">
                                    <div
                                        [ngClass]="idx==0 ? 'pax-name' : (pax.arrlug && pax.arrlug.length >0) ? 'pax-name' : ( (idx == trip.itemdepart.passengers.length -1 && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2] && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2].arrlug && trip.itemdepart.passengers[trip.itemdepart.passengers.length-2].arrlug.length >0 )? 'pax-name' :  'pax-name')">
                                        <label class="text-info font-weight-500">{{pax.gender}}. <span >{{pax.name}}</span> <span class="text-info"
                                            *ngIf="!pax.isAdult && pax.dob"> {{pax.dob}}</span></label></div>
                                    <!-- <div class="pax-type ">{{pax.gender}}</div> -->
                                </div>
                                
                                  <div class="d-flex m-top-13  h-26" *ngIf="!pax.isInfant">
                                    <div class="text-name-airport witdh-80 align-self-end ">
                                        {{ trip.itemdepart.departCode }} - {{ trip.itemdepart.arrivalCode }}
                                    </div>
                                    <div class="d-flex m-left-4 m-top-13-5">
                                        <img  src="./assets/imgs/ic_handbag.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{baggageHandedDepart}}</div>
                                    </div>
                                    <div *ngIf="pax.hanhLyshow && pax.hanhLyshow!='0'" class="d-flex m-left-4">
                                        <img  src="./assets/imgs/ic_airdrop.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{pax.hanhLyshow}} kg</div>
                                    </div>
                                    <div *ngIf="(!pax.hanhLyshow||pax.hanhLyshow=='0')" class="d-flex m-left-4">
                                        <img  src="./assets/imgs/ic_airdrop.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">không có</div>
                                    </div>
                                    <div *ngIf="pax.seatNumber" class="d-flex m-left-4">
                                        <img  src="./assets/imgs/ic_seat.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 align-self-end">{{pax.seatNumber}}</div>
                                    </div>
                                    
                                    </div>
                                    <div class="d-flex m-top-13  h-26" *ngIf="trip.textReturn && trip.bookingsComboData[1].airlineCode && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && !pax.isInfant">
                                    <div class="text-name-airport witdh-80 align-self-end ">
                                        {{ trip.itemdepart.arrivalCode }} - {{ trip.itemdepart.departCode }}
                                    </div>
                                    <div class="d-flex m-left-4 m-top-13-5">
                                        <img  src="./assets/imgs/ic_handbag.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{baggageHandedReturn}}</div>
                                    </div>
                                  
                                    <div *ngIf="trip.bookingsComboData[1].passengers[idx].hanhLyshow && trip.bookingsComboData[1].passengers[idx].hanhLyshow!='0'" class="d-flex m-left-4">
                                        <img  src="./assets/imgs/ic_airdrop.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">{{trip.bookingsComboData[1].passengers[idx].hanhLyshow}} kg</div>
                                    </div>
                                    <div *ngIf="(!trip.bookingsComboData[1].passengers[idx].hanhLyshow||trip.bookingsComboData[1].passengers[idx].hanhLyshow=='0')" class="d-flex m-left-4">
                                        <img  src="./assets/imgs/ic_airdrop.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 witdh-70 align-self-end ">không có</div>
                                    </div>
                                    <div *ngIf="trip.bookingsComboData[1].passengers[idx].seatNumber" class="d-flex m-left-4">
                                        <img  src="./assets/imgs/ic_seat.svg"/>
                                        <div class="text-info font-weight-500 m-left-4 align-self-end">{{trip.bookingsComboData[1].passengers[idx].seatNumber}}</div>
                                    </div>
                                    </div>
                                    <div  class="text-hotfare" *ngIf="pax.IsCathay && pax.gender.indexOf('Bé') == 0">(Trẻ dưới 14 tuổi cần claim chung người lớn)</div>
                                    <!-- <div class="div-split-panel" *ngIf="trip.isPickupDropoff && !(trip.IsCathay && trip.isFlyBooking) && idx == trip.itemdepart.passengers.length-1"></div> -->
                                </div>
                
                                </div>
                               
                            <!-- Đi chung -->
                            <div *ngIf="!trip.hasCathay else PickupDropoffWithCathay">
                                <div class="div-split-panel"></div>
                                <div *ngIf="trip.isPickupDropoff && trip.bookingsComboData[1] && trip.bookingsComboData[1].trip_Code && ( !trip.bookingsComboData[2] || (trip.bookingsComboData[2] && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[2].trip_Code) != -1) )">
                                <div class="div-dc">
                                    <div class="div-depart-dc" >
                                        <div class="d-flex">
                                            <div class="div-dc-img">
                                            <img class="img-location" src="./assets/imgs/ic_car.svg">
                                            </div>
                                            <div class="div-dc-label-name" *ngIf="trip.bookingsComboData[1].trip_Code && trip.bookingsComboData[1].trip_Code == 'GO' ">Đưa đón tại {{trip.flightFrom}}</div>
                                            <div class="div-dc-label-name" *ngIf="trip.bookingsComboData[1].trip_Code && trip.bookingsComboData[1].trip_Code == 'RETURN' ">Đưa đón tại {{trip.flightTo}}</div>
                                        
                                        </div>
                    
                                        <div *ngIf="trip.bookingsComboData[2]" [ngClass]="trip.bookingsComboData[2] && trip.bookingsComboData[2].trip_Code && trip.bookingsComboData[2].trip_Code == 'GOROUNDTRIP' ? 'd-flex div-dc-info' : 'd-flex div-dc-info p-b-8'">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title"> {{ trip.bookingsComboData[2].departureDateDisplay }}</div>
                                            <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                            <div class="m-l-4 div-dc-label-title"> <span class="text-color-blue">{{trip.bookingsComboData[2].departureTime}}</span></div>
                
                                            <div *ngIf="trip.bookingsComboData[2] && trip.bookingsComboData[2].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                                <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[2].ticketCode}}</div>
                                                <img (click)="copyClipboard('trip.bookingsComboData[2].ticketCode')" class="img-copy" 
                                                src="./assets/imgs/ic_copy.png">
                                            </div>
                                            </div>
                                        </div>
                                        <div *ngIf="trip.bookingsComboData[2] && trip.bookingsComboData[2].departCode" class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[2].departCode}}</div>
                                        </div>
                                        <div *ngIf="trip.bookingsComboData[1] && !trip.bookingsComboData[2]" [ngClass]="trip.bookingsComboData[2] && trip.bookingsComboData[2].trip_Code && trip.bookingsComboData[2].trip_Code == 'GOROUNDTRIP' ? 'd-flex div-dc-info' : 'd-flex div-dc-info p-b-8'">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title"> {{ trip.bookingsComboData[1].departureDateDisplay }}</div>
                                            <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                            <div class="m-l-4 div-dc-label-title"> <span class="text-color-blue">{{trip.bookingsComboData[1].departureTime}}</span></div>
                
                                            <div class="div-pnr">
                                            <div *ngIf="trip.bookingsComboData[2] && trip.bookingsComboData[2].ticketCode" class="padding-5-8 d-flex">
                                                <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[1].ticketCode}}</div>
                                                <img (click)="copyClipboard('trip.bookingsComboData[2].ticketCode')" class="img-copy" 
                                                src="./assets/imgs/ic_copy.png">
                                            </div>
                                            </div>
                                        </div>
                                        <div  *ngIf="trip.bookingsComboData[1] && !trip.bookingsComboData[2]" class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[1].departCode}}</div>
                                        </div>
                        
                                    </div>
                
                
                                    <div [ngClass]="trip.bookingsComboData[2] ? 'div-depart-dc' : 'div-depart-dc p-b-8'" *ngIf="trip.bookingsComboData[2] && trip.bookingsComboData[2].trip_Code">
                                    <div class="div-split-panel"></div>
                                    <div class="d-flex p-b-8">
                                        <div class="div-dc-img">
                                        <img class="img-location" src="./assets/imgs/ic_car.svg">
                                        </div>
                                        <div class="div-dc-label-name" *ngIf="trip.bookingsComboData[2].trip_Code == 'RETURN'">Đưa đón tại {{trip.bookingsComboData[0].flightTo}}</div>
                                    
                                    </div>
                
                                    <div class="d-flex div-dc-info">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title"> {{ trip.bookingsComboData[2].departureDateDisplay }}</div>
                                        <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                        <div class="m-l-4 div-dc-label-title"> <span class="text-color-blue">{{trip.bookingsComboData[2].departureTime}}</span></div>
                
                                        <div *ngIf="trip.bookingsComboData[2] && trip.bookingsComboData[2].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                            <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[2].ticketCode}}</div>
                                            <img (click)="copyClipboard('trip.bookingsComboData[2].ticketCode')" class="img-copy" 
                                            src="./assets/imgs/ic_copy.png">
                                        </div>
                                        </div>
                                    </div>
                                    <div class="d-flex">
                                    <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                    <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[2].departCode}}</div>
                                    </div>
                
                                </div>
                                    
                                </div>
                                
                                </div>
                
                                <!-- Vé 2 chiều + đi chung -->
                                <div *ngIf="trip.isPickupDropoff && trip.bookingsComboData[1] && (!trip.bookingsComboData[1].trip_Code || trip.bookingsComboData[1].trip_Code && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1) ">
                                
                                <div class="div-dc" *ngIf="trip.bookingsComboData[2]|| trip.bookingsComboData[3]">
                                    <div [ngClass]="(trip.bookingsComboData[2] || trip.bookingsComboData[3]) ? 'div-depart-dc' : 'div-depart-dc p-b-8'">
                                        <div class="d-flex">
                                        <div class="div-dc-img">
                                            <img class="img-location" src="./assets/imgs/ic_car.svg">
                                        </div>
                
                                        <div class="div-dc-label-name" *ngIf="trip.bookingsComboData[2].trip_Code == 'GO' ">Đưa đón tại {{trip.flightFrom}}</div>
                                        <div class="div-dc-label-name" *ngIf="trip.bookingsComboData[2].trip_Code == 'RETURN' ">Đưa đón tại {{trip.flightTo}}</div>
                                        </div>
                
                                        <div class="d-flex div-dc-info">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title"> {{ trip.bookingsComboData[2].departureDateDisplay }}</div>
                                            <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                            <div class="m-l-4 div-dc-label-title"> <span class="text-color-blue">{{trip.bookingsComboData[2].departureTime}}</span></div>
                
                                            <div *ngIf="trip.bookingsComboData[2] && trip.bookingsComboData[2].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                                <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[2].ticketCode}}</div>
                                                <img (click)="copyClipboard('trip.bookingsComboData[2].ticketCode')" class="img-copy" 
                                                src="./assets/imgs/ic_copy.png">
                                            </div>
                                            </div>
                                    </div>
                                    <div class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[2].departCode}}</div>
                                    </div>
                                    <div class="div-panel-1px" *ngIf="!trip.bookingOffType"></div>
                                    <div class="d-flex div-dc-info-1" *ngIf="trip.bookingsComboData[4] && trip.bookingsComboData[4].trip_Code && trip.bookingsComboData[4].trip_Code == 'GOROUNDTRIP' ">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-titl align-self-center"> {{ trip.bookingsComboData[4].departureDateDisplay }}</div>
                                        <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                        <div class="m-l-4 div-dc-label-title align-self-center"> <span class="text-color-blue">{{trip.bookingsComboData[4].departureTime}}</span></div>
                
                                        <div *ngIf="trip.bookingsComboData[4] && trip.bookingsComboData[4].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                            <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[4].ticketCode}}</div>
                                            <img (click)="copyClipboard('trip.bookingsComboData[4].ticketCode')" class="img-copy" 
                                            src="./assets/imgs/ic_copy.png">
                                        </div>
                                        </div>
                                    </div>
                                    <div *ngIf="trip.bookingsComboData[4] && trip.bookingsComboData[4].trip_Code && trip.bookingsComboData[4].trip_Code == 'GOROUNDTRIP' " class="d-flex div-dc-info">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[4].departCode}}</div>
                                    </div>
                
                                    <div class=" p-b-8" *ngIf="trip.bookingsComboData[3] && trip.bookingsComboData[3].trip_Code && (trip.bookingsComboData[3].trip_Code == 'GOROUNDTRIP' || trip.bookingsComboData[3].trip_Code == 'RETURNROUNDTRIP') ">
                                        <div class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title align-self-center"> {{ trip.bookingsComboData[3].departureDateDisplay }}</div>
                                            <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                            <div class="m-l-4 div-dc-label-title align-self-center"> <span class="text-color-blue">{{trip.bookingsComboData[3].departureTime}}</span></div>
                
                                            <div *ngIf="trip.bookingsComboData[3] && trip.bookingsComboData[3].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                                <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[3].ticketCode}}</div>
                                                <img (click)="copyClipboard('trip.bookingsComboData[3].ticketCode')" class="img-copy" 
                                                src="./assets/imgs/ic_copy.png">
                                            </div>
                                            </div>
                                    </div>
                                    <div class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[3].departCode}}</div>
                                    </div>
                                    </div>
                
                                    </div>
                                </div>
                                
                                </div>
                
                                <div *ngIf="trip.isPickupDropoff && trip.bookingsComboData[3] && trip.bookingsComboData[3].trip_Code">
                                <div class="div-split-panel"></div>
                                <div class="div-dc">
                                    <div class="div-depart-dc p-b-8" *ngIf="trip.bookingsComboData[3] && trip.bookingsComboData[3].trip_Code && trip.bookingsComboData[3].trip_Code == 'RETURN'">
                                        <div class="d-flex m-top-16">
                                            <div class="div-dc-img">
                                            <img class="img-location" src="./assets/imgs/ic_car.svg">
                                            </div>
                                            <div class="div-dc-label-name">Đưa đón tại {{trip.bookingsComboData[1].flightFrom}}</div>
                                        
                                        </div>
                                        <div class="d-flex div-dc-info">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title"> {{ trip.bookingsComboData[3].departureDateDisplay }}</div>
                                            <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                            <div class="m-l-4 div-dc-label-title"> <span class="text-color-blue">{{trip.bookingsComboData[3].departureTime}}</span></div>
                
                                            <div *ngIf="trip.bookingsComboData[3] && trip.bookingsComboData[3].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                                <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[3].ticketCode}}</div>
                                                <img (click)="copyClipboard('trip.bookingsComboData[3].ticketCode')" class="img-copy" 
                                                src="./assets/imgs/ic_copy.png">
                                            </div>
                                            </div>
                                    </div>
                                    <div class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[3].departCode}}</div>
                                    </div>
                                        <div class="div-panel-1px" *ngIf="!trip.bookingOffType"></div>
                                    <div class="d-flex div-dc-info-1" *ngIf="trip.bookingsComboData[5] && trip.bookingsComboData[5].trip_Code && trip.bookingsComboData[5].trip_Code == 'RETURNROUNDTRIP' ">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title align-self-center"> {{ trip.bookingsComboData[5].departureDateDisplay }}</div>
                                        <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                        <div class="m-l-4 div-dc-label-title align-self-center"> <span class="text-color-blue">{{trip.bookingsComboData[5].departureTime}}</span></div>
                
                                        <div *ngIf="trip.bookingsComboData[5] && trip.bookingsComboData[5].ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                            <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{trip.bookingsComboData[5].ticketCode}}</div>
                                            <img (click)="copyClipboard('trip.bookingsComboData[5].ticketCode')" class="img-copy" 
                                            src="./assets/imgs/ic_copy.png">
                                        </div>
                                        </div>
                                    </div>
                                    <div *ngIf="trip.bookingsComboData[5] && trip.bookingsComboData[5].trip_Code && trip.bookingsComboData[5].trip_Code == 'RETURNROUNDTRIP' " class="d-flex div-dc-info">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{trip.bookingsComboData[5].departCode}}</div>
                                    </div>
                                    </div>
                
                                
                                </div>
                
                                
                                
                                </div>
                            </div>
                            
                            <ng-template #PickupDropoffWithCathay>
                                <div class="div-split-panel"></div>
                                <div *ngFor="let itemPD of trip.arrPickupDropoff; let idx = index">
                                <div class="div-dc">
                                    <div class="div-depart-dc" >
                                    <div class="div-split-panel" *ngIf="itemPD.trip_Code && itemPD.trip_Code == 'RETURN' "></div>
                                        <div class="d-flex" *ngIf="['GO', 'RETURN'].includes(itemPD.trip_Code)">
                                            <div class="div-dc-img">
                                            <img class="img-location" src="./assets/imgs/ic_car.svg">
                                            </div>
                                            <div class="div-dc-label-name" *ngIf="itemPD.trip_Code && itemPD.trip_Code == 'GO' ">Đưa đón tại {{trip.flightFrom}}</div>
                                            <div class="div-dc-label-name" *ngIf="itemPD.trip_Code && itemPD.trip_Code == 'RETURN' ">Đưa đón tại {{trip.flightTo}}</div>
                                        
                                        </div>
                                    
                                        <div  [ngClass]="idx!=1&&idx!=3? 'd-flex div-dc-info p-b-8':'d-flex p-b-8 div-dc-info'">
                                        <div ><img class="img-clock" src="./assets/imgs/ic_date.svg"></div>
                                        <div class="m-l-4 div-dc-label-title align-self-center"> {{ itemPD.departureDateDisplay }}</div>
                                            <div ><img class="img-clock" src="./assets/imgs/ic_clock.svg"></div>
                                            <div class="m-l-4 div-dc-label-title align-self-center"> <span class="text-color-blue">{{itemPD.departureTime}}</span></div>
                
                                            <div *ngIf="itemPD.ticketCode && !(trip.payment_status == 3 || trip.payment_status == -2)" class="div-pnr-od">
                                            <div class="padding-5-8 d-flex">
                                                <div class="text-vedc"><span class="text-info">Mã vé:</span>  {{itemPD.ticketCode}}</div>
                                                <img (click)="copyClipboard('itemPD.ticketCode')" class="img-copy" 
                                                src="./assets/imgs/ic_copy.png">
                                            </div>
                                            </div>
                                        </div>
                                        <div class="d-flex">
                                        <div ><img class="img-clock" src="./assets/imgs/location.svg"></div>
                                        <div class="m-l-4 cls-text-limit" style="width:100%">{{itemPD.departCode}}</div>
                                        </div>
                                        <div *ngIf="idx!=1&&idx!=3 && !trip.bookingOffType" class="div-panel-1px"></div>
                                    </div>
                                </div>
                                
                                </div>
                
                            </ng-template>
                
                                <!-- Hotel City -->
                                <div *ngIf="trip.booking_type == 'CB_FLY_HOTEL'" >
                                <div>
                                
                                <div class="item-room-city padding-0 h-88">
                                    <div class="div-wrapimg">
                                        <!-- <img *ngIf="trip.avatar else noavatar" class="img-avatar" src="https:{{trip.avatar}}"> -->
                                        <div *ngIf="trip.avatar else noavatar">
                                            <img class="img-avatar" src="{{trip.avatar}}">
                                            <!-- <img *ngIf="trip.avatar.indexOf('i.travelapi.com') != -1" class="img-avatar" src="{{trip.avatar}}"> -->
                                        </div>
                                        <ng-template #noavatar>
                                            <img class="img-avatar" src="https://cdn1.ivivu.com/iVivu/2018/02/07/15/noimage-104x104.png">
                                        </ng-template>
                                        </div>
                                        <div class="col-mytrip-text-description">
                                        <div class="text-left">
                                        <!-- mã nhận phòng -->
                                        <ion-row style="height: 30px;"  *ngIf="trip.off_sup_code">
                                            <ion-col size="1" class="col-address">
                                            <img style="height:12px" src="./assets/imgs/ic_code.svg">
                                            </ion-col>
                                            <ion-col  class="col-address">
                                            <label >Mã nhận phòng: {{trip.off_sup_code}}</label>
                                            </ion-col>
                                        </ion-row>
                                        <div *ngIf="trip.hotel_name">
                                            <ion-label style=" -webkit-box-orient: vertical" class="label-comboname  f-bold p-top-0 div-name-hotel">{{trip.hotel_name}}
                                            <span class="trip-star" *ngIf="trip.RatingStar"><img *ngIf="trip.RatingStar!=0" src={{trip.RatingStar}}></span>
                                            </ion-label>
                                        </div>
                                            <!-- địa chỉ -->
                                        <ion-row>
                                                <ion-col size="1"  style="padding: 0;">
                                                <img style="height:12px" src="./assets/ic_hoteldetail/group.svg">
                                                </ion-col>
                                                <ion-col class="col-address" [ngClass]="trip.payment_status == 1 ? '': ''">
                                                    <label>{{trip.address}}</label>
                                                </ion-col>
                                            </ion-row>
                                            </div>
                                        </div>
                                </div>
                                
                                </div>
                                <div *ngIf="!trip.bookingOffType" class="div-panel-1px m-top-46"></div>
                                <div class="d-flex m-top-46" >
                                    <div>
                                    <img src="./assets/imgs/ic_date.svg">
                                    </div>
                                    <div class="text-info m-left-4 font-weight-500">
                                    {{trip.checkInDisplayCity}} → {{trip.checkOutDisplayCity}}
                                    </div>
                                </div>
                                <div class="div-gird m-left-20 m-top-12">
                                    <div class="text-info-1">
                                    Nhận phòng: <span class="text-info">Từ {{cin}}</span>
                                    </div>
                                    <div class="text-info-1">
                                    Trả phòng: <span class="text-info">Trước {{cout}}</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="d-flex m-top-12">
                                    <div>
                                        <img src="./assets/ic_facility/ic_bed.svg">
                                    </div>
                                    <div class="text-info m-left-4 font-weight-500">
                                        {{trip.room_name}} x{{trip.room_count}}
                                    </div>
                                    </div>
                                    <!-- ăn sáng -->
                                    <div *ngIf="trip.meal_plan"  class="d-flex m-top-12">
                                        <div ><img src="./assets/ic_hoteldetail/ic_food_b.svg"></div>
                                        <div class="text-info m-left-4 font-weight-500" >{{trip.meal_plan}}</div>
                                    </div>
                                    <div class="d-flex m-top-12">
                                    <div>
                                        <img src="./assets/ic_facility/ic_people.svg">
                                    </div>
                                    <div class="text-info m-left-4">
                                        {{trip.totalPaxStr}}
                                    </div>
                                    </div>
                                    <!-- <div class="d-flex m-top-3">
                                    <div class=" div-left"><img src="./assets/ic_facility/ic_people.svg"></div>
                                    <div style="font-size: 14px;">{{trip.room_count}} phòng | {{trip.totalPaxStr}}</div>
                                    </div> -->
                                
                        
                                </div>
                                <div class="div-split"></div>
                                
                
                                </div>
                                
                              
                            </div>
                        
                            <div [ngClass]="trip.payment_status == 0 && trip.deliveryPaymentDisplay?'div-total-od-payment mt16':'div-total-od mt16 m-left-8'">
                              <div [ngClass]="trip.payment_status == 0 && trip.deliveryPaymentDisplay?'padding-12-16':'padding-12-8'">
                                  <div class="d-flex">
                                  <div class="text-info">
                                      Vé máy bay <span *ngIf="trip.textReturn && trip.bookingsComboData[1].airlineCode && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 ">khứ hồi</span>
                                  </div>
                                  <div class="position-absolute text-info">
                                      {{gf.numberToCurrency(totalVMB, '.')}} VND
                                  </div>
                                  </div>
                                  <div class="text-name-airport">
                                  {{trip.totalPaxStr}}
                                  </div>
                              
                                  <div  *ngIf="totalService>0" class="d-flex m-top-8">
                                  <div class="text-info">
                                      Dịch vụ thêm
                                  </div>
                                  <div class="position-absolute text-info">
                                      {{gf.numberToCurrency(totalService, '.')}} VND
                                  </div>
                                  </div>
                                  <div *ngIf="totalService>0" class="text-name-airport">
                                  Thêm hành lý, chọn ghế ngồi
                                  </div>
                                  <!-- đi chung -->
                                  <div  *ngIf="totalDichung>0" class="d-flex m-top-8">
                                  <div class="text-info">
                                      Xe đưa đón
                                  </div>
                                  <div class="position-absolute text-info">
                                      {{gf.numberToCurrency(totalDichung, '.')}} VND
                                  </div>
                                  </div>
                                  <div *ngIf="totalDichung>0" class="text-name-airport">
                                  {{coutDC}} chiều
                                  </div>
                                  <div class="d-flex m-top-8" *ngIf="trip.promotionDiscountAmount&&trip.promotionDiscountAmount>0 && trip.ivivu_point>0">
                                    <div class="text-info">
                                      iVIVU point
                                    </div>
                                    <div class="position-absolute text-info">
                                       {{gf.numberToCurrency(trip.promotionDiscountAmount, '.')}} VND
                                    </div>
                                  </div>
                                  <div class="d-flex m-top-8" *ngIf="trip.promotionDiscountAmount&&trip.promotionDiscountAmount>0 && !trip.ivivu_point ">
                                    <div class="text-info">
                                      Khuyến mãi
                                    </div>
                                    <div class="position-absolute text-info">
                                       {{gf.numberToCurrency(trip.promotionDiscountAmount, '.')}} VND
                                    </div>
                                  </div>
                                  <div class="d-flex m-top-8" *ngIf="trip.paid_amount&&trip.paid_amount>0&&amount_after_tax>0">
                                    <div class="text-info m-top-8">
                                      Đã thanh toán trước
                                    </div>
                                    <div class="position-absolute text-info">
                                      {{gf.numberToCurrency(trip.paid_amount, '.')}} VND
                                    </div>
                                  </div>
                                  <div class="d-flex m-top-8" *ngIf="trip.payment_fee">
                                    <div class="text-info">
                                      Phí tiện ích
                                    </div>
                                    <div class="position-absolute text-info">
                                      {{gf.convertNumberToString(trip.payment_fee)}} VND
                                    </div>
                                  </div>
                                  <div class="div-split"></div>
                                  <div class="d-flex m-top-8">
                                  <div class="text-info d-flex">
                                      Tổng cộng - <div class="font-weight-600 mt4" *ngIf="trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                                      <!-- <label *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else notpayment" class="fly-bkg-code">Đã xuất vé</label> -->
                                      <div>
                                          <label *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)  else notpayment" > Đã thanh toán</label>
                                          <ng-template #notpayment>
                                              <label  *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)">Đã thanh toán</label>
                                              <label class="text-red" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5)">Chờ thanh toán</label>
                                          </ng-template>
                                      </div>
                                      
                                      </div>
                                      
                                  </div>
                                  <div *ngIf="amount_after_tax>0" class="position-absolute text-info font-weight-600"
                                    [ngClass]="(trip.payment_status == 1 || trip.payment_status == 5)?'':'text-orange'">
                                    {{gf.numberToCurrency(amount_after_tax, '.')}} VND
                                  </div>
                                  <div *ngIf="amount_after_tax<=0" class="position-absolute text-info font-weight-600"
                                    [ngClass]="(trip.payment_status == 1 || trip.payment_status == 5)?'':'text-orange'">
                                    {{gf.numberToCurrency(trip.paid_amount, '.')}} VND
                                  </div>
                                  </div>
                                  <div class="text-name-airport">
                                  (Giá đã bao gồm thuế & phí)
                                  </div>
                              </div>
                            </div>
                          
                          </div>
                      </ion-item-group>
                      </div>
                  </div>
                </div>
                  <div *ngIf="trip.delivery_payment_date_display && (trip.pay_method==0||trip.pay_method==5||trip.pay_method==10) && !(trip.payment_status == 1 || trip.payment_status == 5|| trip.payment_status == 9|| trip.payment_status == -2 ||trip.payment_status == 3)" class="div-btn-payment">
                  <div class="div-split-panel"></div>
                  <button (click)="paymentselect(trip,1)" ion-button round outline class="button btn-payment">Thanh toán ngay</button>
                  </div>
                  <div *ngIf="trip.delivery_payment_date_display&&!(trip.pay_method==0||trip.pay_method==5||trip.pay_method==10)&& !(trip.payment_status == 1 || trip.payment_status == 5|| trip.payment_status == 9|| trip.payment_status == -2 ||trip.payment_status == 3)" >
                  <div style="padding: 8px;" *ngIf="trip.pay_method==51||trip.pay_method==2">
                  
                  
                  <div class="div-btn-payment">
                      <button (click)="paymentselect(trip,1)" ion-button round outline class="button btn-payment">Thanh toán ngay</button>
                  </div>
                  </div>
                      <!-- Hình thức ck ngân hàng -->
                      <div *ngIf="!(trip.pay_method==3||trip.pay_method==51||trip.pay_method==2)">
                      <div class="div-split-panel"></div>

                      <div class="div-qrcode m-top-24">
                        <img class="img-qrcode" src="{{qrcodeurl}}" >
                      </div>
                      <div class="div-btn-download m-top-16 d-flex" (click)="downloadqrcode(trip)">
                          <div class="btn-download">
                              <img class="img-download" src="./assets/imgs/download.svg">
                          </div>
                          <div class="text-download">Lưu mã để thanh toán</div>
                      </div>
                      <div class="d-flex-later m-top-16">
                          <div class="d-img">
                          <img src={{trip.urlimgbank}}>
                          </div>
                          <div class="div-center">
                          <ion-label class="cls-text">
                          {{trip.bankName}}
                          </ion-label>
                          <!-- <div class="mt6">
                              <ion-label (click)="openWebpage()" class="cls-textopen">
                              Mở website/ứng dụng {{trip.textbank}}
                              </ion-label>
                          </div> -->
                          </div>
                      </div>
                      <div class="div-text-payment">
                          <p class="text-payment-info" text-wrap>
                          Số TK: <b>{{trip.accountNumber}}</b><a class='text-copy' (click)='copyClipboard(trip.accountNumber)'>Sao chép</a>
                          </p>
                          <p class="text-payment-info" >
                          Người nhận: Công ty Cổ Phần IVIVU.COM<a class='text-copy' (click)='copyClipboard("Người nhận: Công ty Cổ Phần IVIVU.COM")'>Sao chép</a>
                          </p>
                          <p class="text-payment-info" text-wrap>
                          Nội dung chuyển tiền: <b class="text-booking text-red">{{trip.booking_id}}</b><a class='text-copy' (click)='copyClipboard(trip.booking_id)'>Sao chép</a>
                          </p>
                         
                          <p class="text-payment-info" text-wrap>
                          Tổng tiền: <b *ngIf="amount_after_tax>0" class="text-bold">{{gf.numberToCurrency(amount_after_tax, '.')}} VND</b> <b *ngIf="amount_after_tax<=0" class="text-bold"> {{gf.numberToCurrency(trip.paid_amount, '.')}} VND</b> <a class='text-copy' (click)='copyClipboard(trip.priceShow)'>Sao chép</a>
                          </p>                    
                      </div>
                      
                      </div>
                      <!-- payoo tại của hàng -->
                      <div *ngIf="trip.pay_method==3" class="d-flex-later">
                      <p class="text-payment-info" text-wrap>
                          Mã thanh toán Payoo: {{trip.PaymentCode}}, số tiền: <b *ngIf="amount_after_tax>0" class="text-bold">{{gf.numberToCurrency(amount_after_tax, '.')}} VND</b> <b *ngIf="amount_after_tax<=0" class="text-bold"> {{gf.numberToCurrency(trip.paid_amount, '.')}} VND</b>
                      </p>
                      </div>
                      <div *ngIf="!(trip.pay_method==51||trip.pay_method==2)" class="mt16 mbt16">
                      <label class="text-other">Hoặc thanh toán bằng phương thức khác</label>
                      </div>
                      <div *ngIf="!(trip.pay_method==3||trip.pay_method==51||trip.pay_method==2)" class="div-btn-payment">
                      <button (click)="paymentselect(trip,0)" ion-button round outline class="button btn-payment">Đổi phương thức thanh toán</button>
                      </div>
                      <div *ngIf="trip.pay_method==3" class="div-btn-payment">
                          <button (click)="paymentselect(trip,1)" ion-button round outline class="button btn-payment">Đổi phương thức thanh toán</button>
                      </div>
                  </div>

                  
                  <!-- case hotel -->
                  <div class="m-top-14 m-l-16" *ngIf="!trip.isRequestTrip && !trip.isFlyBooking && trip.booking_type!='TICKET'">
                    <div  *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)" class="d-flex">
                      <div  class="text-info-2">
                        Hướng dẫn nhận phòng
                      </div>
                      <div  *ngIf="!ishdnp" (click)="policy()" class="position-absolute">
                        <img src="./assets/imgs/ic_expand.svg" />
                      </div>
                      <div  *ngIf="ishdnp" (click)="policy()" class="position-absolute">
                        <img src="./assets/imgs/ic_expand_down.svg" />
                      </div>
                    </div>
                    <!--   Hướng dẫn nhận phòng -->
                    <div class="m-top-24"  *ngIf="ishdnp">
                        <div>Nhận phòng: <span class="font-weight-600">{{cin}}</span> - Trả phòng: <span class="font-weight-600">{{cout}}</span></div>
                        <div *ngFor="let msg of trip.hotelNotes">
                          <div *ngIf="msg.title=='Hướng dẫn nhận phòng'">
                            <label [innerHTML]="msg.description">
                            </label>
                          </div>
                        </div>
                        <div style="margin-top: 12px;" *ngFor="let msg of HotelPolicies">
                          <div>
                            <label style="font-weight: bold;font-size: 14px;">
                              {{msg.Key}}
                            </label>
                          </div>
                          <div style="margin-top: 12px;">
                            <label [innerHTML]="msg.PolicyDes" text-wrap>
                            </label>
                          </div>
                        </div>
                    </div>
                
                    <div  *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)&& !trip.bookingOffType" class="div-panel-1px"></div>
                    <div  *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)" class="d-flex">
                      <div class="text-info-2">
                        Chính sách hủy, phụ thu phòng
                      </div>
                      <div  *ngIf="!isptp" (click)="phuthuP()" class="position-absolute">
                        <img src="./assets/imgs/ic_expand.svg" />
                      </div>
                      <div  *ngIf="isptp" (click)="phuthuP()" class="position-absolute">
                        <img src="./assets/imgs/ic_expand_down.svg" />
                      </div>
                    </div>
                    <!-- <div  *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)&& !trip.bookingOffType" class="div-panel-1px"></div> -->
                    <div class="m-top-24"  *ngIf="isptp">
                      <div>
                        <label [innerHTML]="trip.off_hotel_paypolicy">
                        </label>
                      </div>
                      <div *ngFor="let msg of trip.hotelNotes">
                        <div *ngIf="msg.title=='Chính sách phụ thu'">
                          <label [innerHTML]="msg.description">
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>

                <!-- case VMB -->
                  <div class="mt16 m-l-16" *ngIf="!trip.isRequestTrip && trip.isFlyBooking">
                    <div (click)="dkv()" class="d-flex">
                        <div class="text-info-2 font-weight-500">
                        Điều kiện vé
                        </div>
                        <div  *ngIf="!isdkv" class="position-absolute">
                        <img src="./assets/imgs/ic_expand.svg" />
                        </div>
                        <div  *ngIf="isdkv" class="position-absolute">
                        <img src="./assets/imgs/ic_expand_down.svg" />
                        </div>
                    </div>
                        <!-- điều kiện vé -->
                    <div *ngIf="isdkv">
            <!-- điều kiện vé chiều đi -->
            <div class="d-flex m-top-6">
            <div class="div-width-200 d-flex">
                <div class="div-img-logo-new">
                <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('VIETJET') != -1 "
                    src="./assets/ic_airticket/vj.png">
                <img class="img-logo-new logo_vna"
                    *ngIf="(trip.itemdepart.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemdepart.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                    src="./assets/ic_airticket/vna.png">
                <img class="img-logo-new logo_vna"
                    *ngIf="(trip.itemdepart.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemdepart.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                    src="./assets/ic_airticket/vna.png">
                <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('JETSTAR') != -1"
                    src="./assets/ic_airticket/ic_jetstar_b.png">
                <img class="img-logo-new" *ngIf="trip.itemdepart.airlineName.indexOf('BAMBOO') != -1 "
                    src="./assets/ic_airticket/bb.png">
        
                </div>
                <div *ngIf="trip.itemdepart.flightNumner && !trip.itemdepart.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemdepart.flightNumner }} - {{trip.itemdepart.ticketClass }}
                </div>
                <div  *ngIf="trip.itemdepart.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemdepart.flightNumberNew }} - {{trip.itemdepart.ticketClass }}
                </div>
            </div>
        
            </div>
        
            <div class="d-flex">
            <div class="div-gird m-top-8 witdh-50">
                <div class="text-info">
                - Hành lý xách tay: <span class="font-weight-600">{{baggageHandedDepart}}</span>
                </div>
                <div class="text-info" *ngIf="luggageSignedDepart">
                - Hành lý ký gửi: <span class="font-weight-600">{{luggageSignedDepart}}<span *ngIf="luggageSignedDepart.indexOf('kg')==-1">kg</span></span>
                </div>
                <div class="text-info" *ngIf="!luggageSignedDepart">
                - Hành lý ký gửi: <span class="font-weight-600">0kg</span>
                </div>
            </div>
            <div class="div-gird m-top-8">
            
              <div class="d-flex" *ngIf="!_departTicketInfoCRM">
                <div class="div-icon" *ngIf="((departConditionInfo && (!departConditionInfo.ticketCondition.ticketRefund || departConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !departConditionInfo ) else departIconRefund">
                    <img class="img-info" src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #departIconRefund>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
        
                <div class="text-info m-left-4" *ngIf="( (departConditionInfo && (!departConditionInfo.ticketCondition.ticketRefund || departConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !departConditionInfo ) else returnrefund">Không hoàn huỷ</div>
                <ng-template #returnrefund>
                    <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                </ng-template>
              </div>
              <!-- Update duoi CRM -->
              <div class="d-flex" *ngIf="_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions">
                <div class="div-icon" *ngIf="((_departTicketInfoCRM && (!_departTicketInfoCRM.ticketConditions.TicketRefund || _departTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_departTicketInfoCRM ) else departIconRefund">
                    <img class="img-info" src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #departIconRefund>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
        
                <div class="text-info m-left-4" *ngIf="( (_departTicketInfoCRM && (!_departTicketInfoCRM.ticketConditions.TicketRefund || _departTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_departTicketInfoCRM ) else returnrefund">Không hoàn huỷ</div>
                <ng-template #returnrefund>
                    <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                </ng-template>
              </div>

            <div class="d-flex m-top-2" *ngIf="!_departTicketInfoCRM">
                <div class="div-icon" *ngIf="((departConditionInfo && departConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1) || !departConditionInfo ) else departIconChangeDepartTime">
                    <img src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #departIconChangeDepartTime>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
                <div class="text-info m-left-4" *ngIf="((departConditionInfo && departConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1 ) || !departConditionInfo ) else departChangeDepartTime">Không đổi lịch bay</div>
                <ng-template #departChangeDepartTime>
                    <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                </ng-template>
              </div>

              <div class="d-flex m-top-2" *ngIf="_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions">
                <div class="div-icon" *ngIf="((_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1) || !_departTicketInfoCRM ) else departIconChangeDepartTime">
                    <img src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #departIconChangeDepartTime>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
                <div class="text-info m-left-4" *ngIf="((_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1 ) || !_departTicketInfoCRM ) else departChangeDepartTime">Không đổi lịch bay</div>
                <ng-template #departChangeDepartTime>
                    <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                </ng-template>
              </div>
            </div>
            </div>
            <!-- điều kiện vé chiều về nếu có-->
            <div *ngIf="trip.itemreturn" class="d-flex m-top-6">
            <div class="div-width-200 d-flex">
                <div class="div-img-logo-new">
                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('VIETJET') != -1 "
                    src="./assets/ic_airticket/vj.png">
                <img class="img-logo-new logo_vna"
                    *ngIf="(trip.itemreturn.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemreturn.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                    src="./assets/ic_airticket/vna.png">
                <img class="img-logo-new logo_vna"
                    *ngIf="(trip.itemreturn.airlineName.indexOf('Vietnam Airlines') != -1  || trip.itemreturn.airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                    src="./assets/ic_airticket/vna.png">
                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('JETSTAR') != -1"
                    src="./assets/ic_airticket/ic_jetstar_b.png">
                <img class="img-logo-new" *ngIf="trip.itemreturn.airlineName.indexOf('BAMBOO') != -1 "
                    src="./assets/ic_airticket/bb.png">
        
                </div>
                <div *ngIf="trip.itemreturn.flightNumner && !trip.itemreturn.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemreturn.flightNumner }} - {{trip.itemreturn.ticketClass }}
                </div>
                <div  *ngIf="trip.itemreturn.flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.itemreturn.flightNumberNew }} - {{trip.itemreturn.ticketClass }}
                </div>
            </div>
        
            </div>
        
            <div *ngIf="returnConditionInfo" class="d-flex">
            <div class="div-gird m-top-8 witdh-50">
                <div class="text-info">
                - Hành lý xách tay: <span class="font-weight-600">{{baggageHandedReturn}}</span>
                </div>
                <div class="text-info" *ngIf="luggageSignedReturn">
                - Hành lý ký gửi: <span class="font-weight-600">{{luggageSignedReturn}}<span *ngIf="luggageSignedReturn.indexOf('kg') ==-1">kg</span></span>
                </div>
                <div class="text-info" *ngIf="!luggageSignedReturn">
                - Hành lý ký gửi: <span class="font-weight-600">0kg</span>
                </div>
            </div>
            <div class="div-gird m-top-8">
            
              <div class="d-flex" *ngIf="!_returnTicketInfoCRM">
                <div class="div-icon" *ngIf="((returnConditionInfo && (!returnConditionInfo.ticketCondition.ticketRefund || returnConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !returnConditionInfo ) else departIconRefund">
                    <img class="img-info" src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #departIconRefund>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
        
                <div class="text-info m-left-4" *ngIf="( (returnConditionInfo && (!returnConditionInfo.ticketCondition.ticketRefund || returnConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !returnConditionInfo ) else returnrefund">Không hoàn huỷ</div>
                <ng-template #returnrefund>
                    <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                </ng-template>
              </div>
              <!-- update duoi CRM -->
              <div class="d-flex" *ngIf="_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions">
                <div class="div-icon" *ngIf="((_returnTicketInfoCRM && (!_returnTicketInfoCRM.ticketConditions.TicketRefund || _returnTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_returnTicketInfoCRM ) else departIconRefund">
                    <img class="img-info" src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #departIconRefund>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
        
                <div class="text-info m-left-4" *ngIf="( (_returnTicketInfoCRM && (!_returnTicketInfoCRM.ticketConditions.TicketRefund || _returnTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_returnTicketInfoCRM ) else returnrefund">Không hoàn huỷ</div>
                <ng-template #returnrefund>
                    <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                </ng-template>
              </div>

              <div class="d-flex m-top-2" *ngIf="!_returnTicketInfoCRM">
                  <div class="div-icon" *ngIf="((returnConditionInfo && returnConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1) || !returnConditionInfo ) else returnIconChangeDepartTime">
                      <img src="./assets/imgs/ic_info.svg">
                  </div>
                  <ng-template #returnIconChangeDepartTime>
                      <div class="div-icon">
                          <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                      </div>
                  </ng-template>
                  <div class="text-info m-left-4 " *ngIf="((returnConditionInfo && returnConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1 ) || !returnConditionInfo ) else returnChangeDepartTime">Không đổi lịch bay</div>
                  <ng-template #returnChangeDepartTime>
                      <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                  </ng-template>
              </div>
              <!-- update duoi CRM -->
              <div class="d-flex m-top-2" *ngIf="_returnTicketInfoCRM&& _returnTicketInfoCRM.ticketConditions">
                <div class="div-icon" *ngIf="((_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1) || !_returnTicketInfoCRM ) else returnIconChangeDepartTime">
                    <img src="./assets/imgs/ic_info.svg">
                </div>
                <ng-template #returnIconChangeDepartTime>
                    <div class="div-icon">
                        <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                    </div>
                </ng-template>
                <div class="text-info m-left-4 " *ngIf="((_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1 ) || !_returnTicketInfoCRM ) else returnChangeDepartTime">Không đổi lịch bay</div>
                <ng-template #returnChangeDepartTime>
                    <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                </ng-template>
              </div>
            </div>
                        
                        </div>
                    </div>
                    <div class="div-panel-1px"></div>
                    <div (click)="openWebpage('https://www.ivivu.com/dieu-kien-dieu-khoan-hang-khong')" class="d-flex">
                        <div class="text-info-2 font-weight-500">
                        Hướng dẫn thủ tục hàng không
                        </div>
                        <div class="position-absolute">
                        <img src="./assets/imgs/ic_expand.svg" />
                        </div>
                    </div>
        
                    </div>
                  
                    <!-- case combo -->
                  
                  <div class="mt16 m-l-16"  *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) && trip.booking_type == 'COMBO_FLIGHT'" >
                    <div (click)="dkv()" class="d-flex">
                      <div class="text-info-2 font-weight-500">
                        Điều kiện vé
                      </div>
                      <div  *ngIf="!isdkv"  class="position-absolute">
                        <img src="./assets/imgs/ic_expand.svg" />
                      </div>
                      <div  *ngIf="isdkv" class="position-absolute">
                        <img src="./assets/imgs/ic_expand_down.svg" />
                      </div>
                    </div>
                      <!-- điều kiện vé -->
              <div *ngIf="isdkv">
                      <!-- điều kiện vé chiều đi -->
                    <div class="d-flex m-top-6">
                      <div class="div-width-200 d-flex">
                        <div class="div-img-logo-new">
                          <img class="img-logo-new" *ngIf="trip.bookingsComboData[0].airlineName.indexOf('VIETJET') != -1 "
                            src="./assets/ic_airticket/vj.png">
                          <img class="img-logo-new logo_vna"
                            *ngIf="(trip.bookingsComboData[0].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[0].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                            src="./assets/ic_airticket/vna.png">
                          <img class="img-logo-new logo_vna"
                            *ngIf="(trip.bookingsComboData[0].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[0].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                            src="./assets/ic_airticket/vna.png">
                          <img class="img-logo-new" *ngIf="trip.bookingsComboData[0].airlineName.indexOf('JETSTAR') != -1"
                            src="./assets/ic_airticket/ic_jetstar_b.png">
                          <img class="img-logo-new" *ngIf="trip.bookingsComboData[0].airlineName.indexOf('BAMBOO') != -1 "
                            src="./assets/ic_airticket/bb.png">
        
                        </div>
                      
                        <div *ngIf="trip.bookingsComboData[0].flightNumner && !trip.bookingsComboData[0].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[0].flightNumner }} - {{trip.bookingsComboData[0].ticketClass }}
                        </div>
                        <div  *ngIf="trip.bookingsComboData[0].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[0].flightNumberNew }} - {{trip.bookingsComboData[0].ticketClass }}
                        </div>
                      </div>
              
                    </div>
              
              <div class="d-flex" margin-left-3>
                  <div class="div-gird m-top-8 witdh-50">
                    <div class="text-info">
                      - Hành lý xách tay: <span class="font-weight-600">{{baggageHandedDepart}}</span>
                    </div>
                    <div class="text-info" *ngIf="luggageSignedDepart">
                      - Hành lý ký gửi: <span class="font-weight-600">{{luggageSignedDepart}}<span *ngIf="luggageSignedDepart.indexOf('kg')==-1">kg</span></span>
                    </div>
                    <div class="text-info" *ngIf="!luggageSignedDepart">
                      - Hành lý ký gửi: <span class="font-weight-600">0kg</span>
                    </div>
                  </div>
                  <div class="div-gird m-top-8">
                
                    <div class="d-flex" *ngIf="!_departTicketInfoCRM">
                      <div class="div-icon" *ngIf="((departConditionInfo && (!departConditionInfo.ticketCondition.ticketRefund || departConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !departConditionInfo ) else departIconRefund">
                          <img class="img-info" src="./assets/imgs/ic_info.svg">
                      </div>
                      <ng-template #departIconRefund>
                          <div class="div-icon">
                              <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                          </div>
                      </ng-template>
              
                      <div class="text-info m-left-4" *ngIf="( (departConditionInfo && (!departConditionInfo.ticketCondition.ticketRefund || departConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !departConditionInfo ) else returnrefund">Không hoàn huỷ</div>
                      <ng-template #returnrefund>
                          <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                      </ng-template>
                    </div>
                    <!-- Update duoi CRM -->
                    <div class="d-flex" *ngIf="_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions">
                      <div class="div-icon" *ngIf="((_departTicketInfoCRM && (!_departTicketInfoCRM.ticketConditions.TicketRefund || _departTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_departTicketInfoCRM ) else departIconRefund">
                          <img class="img-info" src="./assets/imgs/ic_info.svg">
                      </div>
                      <ng-template #departIconRefund>
                          <div class="div-icon">
                              <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                          </div>
                      </ng-template>
              
                      <div class="text-info m-left-4" *ngIf="( (_departTicketInfoCRM && (!_departTicketInfoCRM.ticketConditions.TicketRefund || _departTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_departTicketInfoCRM ) else returnrefund">Không hoàn huỷ</div>
                      <ng-template #returnrefund>
                          <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                      </ng-template>
                    </div>
                    
                    <div class="d-flex m-top-2" *ngIf="!_departTicketInfoCRM">
                        <div class="div-icon" *ngIf="((departConditionInfo && departConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1) || !departConditionInfo ) else departIconChangeDepartTime">
                          <img src="./assets/imgs/ic_info.svg">
                        </div>
                        <ng-template #departIconChangeDepartTime>
                            <div class="div-icon">
                                <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                            </div>
                        </ng-template>
                        <div class="text-info m-left-4" *ngIf="((departConditionInfo && departConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1 ) || !departConditionInfo ) else departChangeDepartTime">Không đổi lịch bay</div>
                        <ng-template #departChangeDepartTime>
                            <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                        </ng-template>
                    </div>
                    <!-- Update duoi CRM -->
                    <div class="d-flex m-top-2" *ngIf="_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions">
                      <div class="div-icon" *ngIf="((_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1) || !_departTicketInfoCRM ) else departIconChangeDepartTime">
                        <img src="./assets/imgs/ic_info.svg">
                      </div>
                      <ng-template #departIconChangeDepartTime>
                          <div class="div-icon">
                              <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                          </div>
                      </ng-template>
                      <div class="text-info m-left-4" *ngIf="((_departTicketInfoCRM && _departTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1 ) || !_departTicketInfoCRM ) else departChangeDepartTime">Không đổi lịch bay</div>
                      <ng-template #departChangeDepartTime>
                          <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                      </ng-template>
                  </div>
                  </div>
              </div>
                <!-- điều kiện vé chiều về nếu có-->
                <div *ngIf="trip.bookingsComboData[1]" class="d-flex m-top-6">
                  <div class="div-width-200 d-flex">
                    <div class="div-img-logo-new">
                      <img class="img-logo-new" *ngIf="trip.bookingsComboData[1].airlineName.indexOf('VIETJET') != -1 "
                        src="./assets/ic_airticket/vj.png">
                      <img class="img-logo-new logo_vna"
                        *ngIf="(trip.bookingsComboData[1].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[1].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && !trip.operatedBy "
                        src="./assets/ic_airticket/vna.png">
                      <img class="img-logo-new logo_vna"
                        *ngIf="(trip.bookingsComboData[1].airlineName.indexOf('Vietnam Airlines') != -1  || trip.bookingsComboData[1].airlineName.indexOf('VIETNAM AIRLINES') != -1 ) && trip.operatedBy"
                        src="./assets/ic_airticket/vna.png">
                      <img class="img-logo-new" *ngIf="trip.bookingsComboData[1].airlineName.indexOf('JETSTAR') != -1"
                        src="./assets/ic_airticket/ic_jetstar_b.png">
                      <img class="img-logo-new" *ngIf="trip.bookingsComboData[1].airlineName.indexOf('BAMBOO') != -1 "
                        src="./assets/ic_airticket/bb.png">
              
                    </div>
                    <div *ngIf="trip.bookingsComboData[1].flightNumner && !trip.bookingsComboData[1].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[1].flightNumner }} - {{trip.bookingsComboData[1].ticketClass }}
                    </div>
                    <div *ngIf="trip.bookingsComboData[1].flightNumberNew" class="div-ticket div-overflow-ticket">{{trip.bookingsComboData[1].flightNumberNew }} - {{trip.bookingsComboData[1].ticketClass }}
                    </div>
                  </div>
              
                </div>
              
                <div *ngIf="returnConditionInfo" class="d-flex">
                  <div class="div-gird m-top-8 witdh-50">
                    <div class="text-info">
                      - Hành lý xách tay: <span class="font-weight-600">{{baggageHandedReturn}}</span>
                    </div>
                    <div class="text-info" *ngIf="luggageSignedDepart">
                      - Hành lý ký gửi: <span class="font-weight-600">{{luggageSignedReturn}}<span *ngIf="luggageSignedReturn.indexOf('kg') ==-1">kg</span></span>
                    </div>
                    <div class="text-info" *ngIf="!luggageSignedDepart">
                      - Hành lý ký gửi: <span class="font-weight-600">0kg</span>
                    </div>
                  </div>
                  <div class="div-gird m-top-8">
                
                    <div class="d-flex" *ngIf="!_returnTicketInfoCRM">
                      <div class="div-icon" *ngIf="((returnConditionInfo && (!returnConditionInfo.ticketCondition.ticketRefund || returnConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !returnConditionInfo ) else departIconRefund">
                          <img class="img-info" src="./assets/imgs/ic_info.svg">
                      </div>
                      <ng-template #departIconRefund>
                          <div class="div-icon">
                              <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                          </div>
                      </ng-template>
              
                      <div class="text-info m-left-4" *ngIf="( (returnConditionInfo && (!returnConditionInfo.ticketCondition.ticketRefund || returnConditionInfo.ticketCondition.ticketRefund.indexOf('Không') != -1)) || !returnConditionInfo ) else returnrefund">Không hoàn huỷ</div>
                      <ng-template #returnrefund>
                          <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                      </ng-template>
                    </div>
                    <!-- update duoi CRM -->
                    <div class="d-flex" *ngIf="_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions">
                      <div class="div-icon" *ngIf="((_returnTicketInfoCRM && (!_returnTicketInfoCRM.ticketConditions.TicketRefund || _returnTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_returnTicketInfoCRM ) else departIconRefund">
                          <img class="img-info" src="./assets/imgs/ic_info.svg">
                      </div>
                      <ng-template #departIconRefund>
                          <div class="div-icon">
                              <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                          </div>
                      </ng-template>
              
                      <div class="text-info m-left-4" *ngIf="( (_returnTicketInfoCRM && (!_returnTicketInfoCRM.ticketConditions.TicketRefund || _returnTicketInfoCRM.ticketConditions.TicketRefund.indexOf('Không') != -1)) || !_returnTicketInfoCRM ) else returnrefund">Không hoàn huỷ</div>
                      <ng-template #returnrefund>
                          <div class="text-info m-left-4" >Hoàn hủy có phí</div>
                      </ng-template>
                    </div>

                    <div class="d-flex m-top-2" *ngIf="!_returnTicketInfoCRM">
                        <div class="div-icon" *ngIf="((returnConditionInfo && returnConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1) || !returnConditionInfo ) else returnIconChangeDepartTime">
                          <img src="./assets/imgs/ic_info.svg">
                        </div>
                        <ng-template #returnIconChangeDepartTime>
                            <div class="div-icon">
                                <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                            </div>
                        </ng-template>
                        <div class="text-info m-left-4 " *ngIf="((returnConditionInfo && returnConditionInfo.ticketCondition.changeDepartTime.indexOf('Không') != -1 ) || !returnConditionInfo ) else returnChangeDepartTime">Không đổi lịch bay</div>
                        <ng-template #returnChangeDepartTime>
                            <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                        </ng-template>
                    </div>

                    <!-- Update duoi CRM -->
                    <div class="d-flex m-top-2" *ngIf="_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions">
                      <div class="div-icon" *ngIf="((_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1) || !_returnTicketInfoCRM ) else returnIconC">
                        <img src="./assets/imgs/ic_info.svg">
                      </div>
                      <ng-template #returnIconChangeDepartTime>
                          <div class="div-icon">
                              <img class="img-info" src="./assets/imgs/ic_check_mytrip.svg">
                          </div>
                      </ng-template>
                      <div class="text-info m-left-4 " *ngIf="((_returnTicketInfoCRM && _returnTicketInfoCRM.ticketConditions.ChangeDepartTime.indexOf('Không') != -1 ) || !_returnTicketInfoCRM ) else returnChangeDepartTime">Không đổi lịch bay</div>
                      <ng-template #returnChangeDepartTime>
                          <div class="text-info m-left-4" >Đổi lịch bay có phí</div>
                      </ng-template>
                    </div>

                  </div>
                            
                </div>
              </div>
                          <div  class="div-panel-1px"></div>
                          <div *ngIf="trip.booking_type != 'COMBO_FLIGHT' && trip.booking_type != 'COMBO_VXR'" class="d-flex">
                            <div  class="text-info-2">
                              Hướng dẫn nhận phòng
                            </div>
                            <div  *ngIf="!ishdnp" (click)="policy()" class="position-absolute">
                              <img src="./assets/imgs/ic_expand.svg" />
                            </div>
                            <div  *ngIf="ishdnp" (click)="policy()" class="position-absolute">
                              <img src="./assets/imgs/ic_expand_down.svg" />
                            </div>
                          </div>
                              <!--   Hướng dẫn nhận phòng -->
                        <div class="m-top-24"  *ngIf="ishdnp && trip.booking_type != 'COMBO_FLIGHT' && trip.booking_type != 'COMBO_VXR'">
                          <div>Nhận phòng: <span class="font-weight-600">{{cin}}</span> - Trả phòng: <span class="font-weight-600">{{cout}}</span></div>
                          <div *ngFor="let msg of trip.hotelNotes">
                            <div *ngIf="msg.title=='Hướng dẫn nhận phòng'">
                              <label [innerHTML]="msg.description">
                              </label>
                            </div>
                          </div>
                      </div>
                          <div *ngIf="trip.booking_type != 'COMBO_FLIGHT' && trip.booking_type != 'COMBO_VXR'" class="div-panel-1px"></div>
                          <div (click)="info()" class="d-flex">
                            <div  class="text-info-2">
                              Các thông tin thêm
                            </div>
                            <div  *ngIf="!isttt"  class="position-absolute">
                              <img src="./assets/imgs/ic_expand.svg" />
                            </div>
                            <div  *ngIf="isttt" class="position-absolute">
                              <img src="./assets/imgs/ic_expand_down.svg" />
                            </div>
                          </div>
                          <div (click)="openWebpage('https://www.ivivu.com/dieu-kien-dieu-khoan-hang-khong')" class="mt22"  *ngIf="isttt">
                            <div class="text-link">
                              <u>Hướng dẫn thủ tục hàng không</u>
                            </div>
                            <div class="text-link mt22">
                              <u>Cẩm nang du lịch</u>
                            </div>
                          </div>
                      
                        </div>
                        
                    <div  class="div-panel-1px" *ngIf="trip.booking_type != 'TOUR' && trip.booking_type != 'TICKET'"></div>
                    <div (click)="nextSupport(trip)" class="d-flex m-l-16" *ngIf="trip.booking_type != 'TOUR' && trip.booking_type != 'TICKET'">
                      <div class="text-info-2 font-weight-500">
                        Liên hệ hỗ trợ
                      </div>
                      <div  class="position-absolute">
                        <img src="./assets/imgs/ic_expand.svg" />
                      </div>
                    </div>
                    <div  class="div-panel-1px" *ngIf="trip.booking_type != 'TOUR' && trip.booking_type != 'TICKET'"></div>
                    <div  class="d-flex m-l-16 div-checkin-online-2" *ngIf="trip.booking_type != 'TOUR' && !trip.hadCheckinOnline && trip.bookingjson  && (trip.payment_status == 1 || trip.payment_status == 5)">
                      <div class="text-info-2 font-weight-500">
                        Yêu cầu Checkin-Online
                      </div>
                      <div  class="position-absolute">
                        <ion-toggle [disabled]="trip.bookingjson[0].RequestCheckin==1 || trip.ischeckinOnl" (ionChange)="checkinOnline(trip)" [checked]="trip.bookingjson[0].RequestCheckin==1"></ion-toggle>
                      </div>
                    </div>
                    <div *ngIf="trip.bookingjson  && (trip.payment_status == 1 || trip.payment_status == 5) && trip.textCheckinOnline" class="text-note margin-16">
                      {{trip.textCheckinOnline}} 
                  </div>
                     <!-- Checkin online -->
               <!-- <div *ngIf="trip.hadCheckinOnline" class="div-line-new-1 m-0-16"></div> -->
               <div *ngIf="trip.isFlyBooking && trip.hadCheckinOnline" class="div-checkin-online">
                <div class="d-flex">
                  <div class="div-icon-check">
                    <img  class="img-check"  src="./assets/ic_mytripbooking/check.svg">
                  </div>
                  <div class="div-text-checkin">Đã có thẻ lên máy bay (Boarding Pass)</div>
                </div>
                 
                 <!-- <div class="div-icon-arrow">
                   <img  class="img-arrow"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                 </div> -->
                 <div  class="text-title-broading m-top-12" *ngIf="trip.hadCheckinOnlineDepart">
                  Chiều đi
                </div>
                 <div *ngFor="let pass of trip.bookingjson[0].Passengers; let idx = index">
                  <div class="d-flex align-items-end m-top-12"  *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
                
                      <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                      <img  (click)="downloadimg(pass,trip)" src="./assets/ic_mytripbooking/download.svg">
                      <img  (click)="share(pass)" class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                  </div>
              </div>
              <div class="text-title-broading m-top-12" *ngIf="trip.bookingjson[1] && trip.hadCheckinOnlineReturn">
                Chiều về
              </div>
         
              <div *ngIf="trip.bookingjson[1] && trip.bookingjson[1].Passengers[0].CheckinInfo">
                <div *ngFor="let pass of trip.bookingjson[1].Passengers; let idx = index">
                  <div class="d-flex align-items-end m-top-12"  *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
             
                    <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                    <img (click)="downloadimg(pass,trip)"  src="./assets/ic_mytripbooking/download.svg">
                    <img (click)="share(pass.CheckinInfo)"  class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                </div>
                </div>
                </div>
               </div>
            </ng-template>

          </div>
            

        <ng-template #divshowlisttrip>
          <div class="div-mytrip div-view-list" >
            <div [ngClass]="i ==0 ? 'first-content ' : 'first-content p-top-0'" >
              <ion-item-group (click)="showtripdetail(trip)">
                <ion-row class="padding-9-16" >
                  <ion-col size="8" class="col-bookingid" *ngIf="!trip.isFlyBooking else flybooking"><label class="label-bkg-id">Mã booking: <span
                        class="bkg-id">{{trip.booking_id}}</span></label>
                  </ion-col>
                        <ng-template #flybooking>
                          <ion-col class="col-bookingid" size="8" style="align-self: baseline;"><label  class="label-bkg-id">Mã booking: <span class="bkg-id">{{trip.booking_id}}</span></label></ion-col>
                       </ng-template> 

                  <ion-col size="4" class="col-bkg-status p-r-0 text-align-right"
                    *ngIf="!trip.isFlyBooking && trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                    <div   *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else waitpayment">
                      <div><label class="label-text-paymented">Đã thanh toán</label></div>
                      <div class="m-top-4"><label class="label-text-processing ml-7" *ngIf="!trip.approve_date">(Chờ xử lý)</label></div>
                    </div>
                    <ng-template  #waitpayment>
                      <!-- <label *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay else notshowwaitpayment" class="lbl-waitpayment label-text-paymented">Chờ thanh toán | <span>{{trip.deliveryPaymentDisplay}}</span></label> -->
                      <label *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay else notshowwaitpayment" class="lbl-waitpayment label-text-waitpayment">Chờ thanh toán</label>
                      <ng-template #notshowwaitpayment>
                        <label class="lbl-waitpayment label-text-waitpayment" *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay">Chờ thanh toán</label>
                        <label class="lbl-waitpayment label-text-waitpayment1" *ngIf="trip.payment_status == 0 && !trip.deliveryPaymentDisplay">Hết hạn thanh toán</label>
                      </ng-template>
                    </ng-template>
                  </ion-col>
                  <ion-col size="4" class="col-bkg-status"  *ngIf="trip.isFlyBooking && trip.payment_status != 9 && (trip.payment_status != 3 && trip.payment_status != -2)">
                    <!-- <label *ngIf="(trip.payment_status == 1 || trip.payment_status == 5) else notpayment" class="label-text-paymented">Đã xuất vé</label>
                    <ng-template #notpayment><label class="label-text-waitpayment">Chưa thanh toán</label></ng-template> -->
                    <div   *ngIf="trip.bookingsComboData && trip.bookingsComboData.length > 1">
                        <label *ngIf="( (trip.payment_status == 1 || trip.payment_status == 5) && trip.bookingsComboData[0].issueTicketDate!='' && (trip.bookingsComboData[1] && trip.bookingsComboData[1].issueTicketDate!='') ) else notpayment" class="label-text-paymented-xv">Đã xuất vé</label>
                        <ng-template #notpayment>
                          <div *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)">
                            <div><label class="label-text-paymented">Đã thanh toán</label></div>
                            <div class="m-top-4"><label class="label-text-processing" *ngIf="!trip.bookingsComboData[0].issueTicketDate || (trip.bookingsComboData[1] && !trip.bookingsComboData[1].issueTicketDate)">(Chờ xử lý)</label></div>
                          </div>
                            <label class="label-text-waitpayment" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5) && trip.deliveryPaymentDisplay">Chưa thanh toán</label>
                            <label class="label-text-waitpayment1" *ngIf="trip.payment_status ==0 && !trip.deliveryPaymentDisplay">Hết hạn thanh toán</label>
                        </ng-template>
                    </div>
                    <div *ngIf="trip.bookingsComboData && trip.bookingsComboData.length == 1">
                        <label *ngIf="( (trip.payment_status == 1 || trip.payment_status == 5) && trip.bookingsComboData[0].issueTicketDate!='' ) else notpayment" class="label-text-paymented-xv">Đã xuất vé</label>
                        <ng-template #notpayment>
                          <div *ngIf="(trip.payment_status == 1 || trip.payment_status == 5)">
                            <div><label class="label-text-paymented">Đã thanh toán</label></div>
                            <div class="m-top-4"><label class="label-text-processing" *ngIf="!trip.bookingsComboData[0].issueTicketDate">(Chờ xử lý)</label></div>
                          </div>
                            <label class="label-text-waitpayment" *ngIf="!(trip.payment_status == 1 || trip.payment_status == 5) && trip.deliveryPaymentDisplay">Chưa thanh toán</label>
                            <label class="label-text-waitpayment1" *ngIf="trip.payment_status == 0 && !trip.deliveryPaymentDisplay">Hết hạn thanh toán</label>
                        </ng-template>
                    </div>
                  </ion-col>
                  <ion-col size="4" class="col-bkg-status"
                    *ngIf="trip.payment_status == 9"><label class="label-text-roomconfirm">Chờ hỏi phòng</label></ion-col>
                  <ion-col size="4" style="text-align: right;font-size: 12px;color:#f79221;padding: 5px 5px 5px 0px;"
                    *ngIf="(trip.payment_status == 3 || trip.payment_status == -2)"><label class="lbl-waitpayment label-text-waitpayment">Đã hủy</label></ion-col>
                </ion-row>
                <div class="div-line-new">

                </div>
                <!-- bkg khác tour -->
                <div *ngIf="(!trip.booking_type || (trip.booking_type != 'TOUR' && trip.booking_type != 'TICKET') ) else bookingtour ">
                
                  <div [ngClass]="!trip.bookingOffType ? 'padding-8-16' : 'item-bkgoff padding-0' " *ngIf="!trip.isFlyBooking else bookingflight">

                    <div *ngIf="!trip.bookingOffType">


                        <div [ngClass]="!trip.combo_name? 'div-wrapimg img-list' : 'div-wrapimg-1 img-list-1'" class="div-wrapimg img-list" >
                          <div *ngIf="trip.avatar else noavatar">
                            <img  [ngClass]="!trip.combo_name? 'img-avatar ava-list' : 'img-avatar-1 ava-list-1'"  src="{{trip.avatar}}">
                            <img *ngIf="trip.avatar.indexOf('i.travelapi.com') != -1" [ngClass]="!trip.combo_name? 'img-avatar ava-list' : 'img-avatar-1 ava-list-1'" src="{{trip.avatar}}">
                          </div>
                          <!-- <img *ngIf="trip.avatar else noavatar" class="img-avatar ava-list" src="https:{{trip.avatar}}"> -->
                          <ng-template #noavatar>
                            <img class="img-avatar no-ava-list" src="https://cdn1.ivivu.com/iVivu/2018/02/07/15/noimage-104x104.png">
                          </ng-template>
                        </div>
                        
                        <div class="col-mytrip-text-description div-height-120px">
                          <div class="text-left">
                            <div *ngIf="trip.hotel_name && !trip.isFlyBooking && !trip.bookingOffType">
                              <ion-label style=" -webkit-box-orient: vertical" class="label-comboname div-name-hotel">{{trip.hotel_name}}
                              
                              </ion-label>
                            </div> 
                                <!-- Nội dung combo nếu có -->
                          <div *ngIf="trip.combo_name && !trip.isFlyBooking && !trip.bookingOffType" class="div-comboname">
                            <label >{{trip.combo_name}}</label>
                          </div>
                            <!-- check in, checkout -->
                            <ion-row class="row-height-listtrip p-top-4" >
                              <ion-col size="1" class="col-address">
                                <img style="height:12px" src="./assets/imgs/ic_date.svg">
                                
                              </ion-col>
                              <ion-col  class="col-address">
                                {{trip.checkInDisplayCity}} → {{trip.checkOutDisplayCity}}
                              </ion-col>
                            </ion-row>
                            <!-- pax -->
                          <!-- <ion-row class="row-height-listtrip" *ngIf="trip.totalPaxStr ">
                            <ion-col size="1" class="col-address">
                              <img style="height:12px" src="./assets/imgs/ic_people.svg">
                              
                            </ion-col>
                            <ion-col  class="col-address">
                              {{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span> <span class="p-l-4" *ngIf="trip.hasCathay"><img src="https://beta-member.ivivu.com/assets/img/dashboard_trips/cathay.png"/></span>
                            </ion-col>
                          </ion-row> -->
                            <!-- Loại giường -->
                          <ion-row class="row-height-listtrip" *ngIf="trip.room_name && trip.booking_id.indexOf('OFF') == -1 ">
                                <ion-col size="1"  class="col-address">
                                  <img style="height:12px" src="./assets/ic_facility/ic_bed.svg">
                                </ion-col>
                                <ion-col class="col-address">
                                    <label>{{trip.room_name}}</label>
                                </ion-col>
                          </ion-row>
                              <!-- Ăn sáng -->
                          <ion-row *ngIf="trip.meal_plan " [ngClass]="trip.room_name.length >= 30 ? 'row-height-listtrip' : 'row-height-listtrip'">
                            <ion-col size="1"  class="col-address">
                              <img style="height:12px" src="./assets/ic_facility/ic_food_b.svg">
                            </ion-col>
                            <ion-col class="col-address">
                                <label>{{trip.meal_plan}}</label>
                            </ion-col>
                          </ion-row>
                        </div>
                        </div>

                        <div [ngClass]="trip.booking_type=='COMBO_VXR' || trip.booking_type=='COMBO_FLIGHT'? 'div-line-new-1 mt-30' : 'div-line-new-1 mt-19'"></div>
                        <div *ngIf="trip.totalPaxStr" class="d-flex div-people">
                          <div>
                            <img src="./assets/imgs/ic_people.svg">
                            
                          </div>
                          <div class="mt4">
                            {{trip.totalPaxStr}} 
                            <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span>
                            <span class="p-l-4" *ngIf="trip.hasCathay && !trip.isBookingVMBQT"><img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/>Yêu cầu bảo hiểm</span>
                          </div>
                          <div *ngIf="(trip.payment_status == 0 && trip.delivery_payment_date_display) || trip.payment_status == 1 || trip.payment_status == 5" class="p-absolute-16">
                            <img  class="cls-icon-img-detail"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                          </div>
                        </div>
                 
                    </div>

                    <div  *ngIf="trip.bookingOffType" class="div-bkgoff-listitem">
                      <div (click)="showtripdetail(trip)">
                        <div class="bkgoff-title">{{trip.hotel_name}}</div>
                        <div class="bkgoff-cincout d-flex p-top-3">
                          <div class="bkgoff-info">
                            <img style="height:12px" src="./assets/imgs/ic_date.svg">
                          </div>
                          <div class="bkgoff-info p-l-4">
                            {{trip.checkInDisplayCity}} → {{trip.checkOutDisplayCity}}
                          </div>
                        </div>
                        <div class="bkgoff-roomname  p-top-3">{{trip.room_name}}</div>
                        <div class="bkgoff-otherinfo">
                          <div *ngIf="trip.bookingOffType == 1">
                              <div class="bkgoff-info">
                              {{trip.room_count}} phòng | {{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span>
                              </div>
                          </div>
                          <div *ngIf="trip.bookingOffType != 1 && trip.off_sup_code" class="bkgoff-info">
                              Mã booking: {{trip.off_sup_code}}
                          </div>
                        </div>
                      </div>
                          
                    </div>
                    <div *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay && trip.priceShow" class="div-line-new-1"></div>
                    <div *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay && trip.priceShow" class="d-flex div-big-waitpayment m-top-8">
                      <div>
                      
                        <div class="div-right-waitpayment">
                          {{gf.numberToCurrency(trip.amount_after_tax-trip.paid_amount, '.')}}<span style="font-size: 16px">đ</span>
                        </div>
                        <div class="div-left-waitpayment">
                          Thanh toán trước <span style="font-weight: bold">{{trip.deliveryPaymentDisplay}}</span>
                        </div>
                      </div>
                      <div  class="p-absolute-16 m-top-3">
                          <button ion-button round outline class="btn-waitpayment">Thanh toán</button>
                      </div>
                    </div>
                  </div>
                  <ng-template #bookingflight>                      
                    <div class="div-item-flight d-flex padding-8-16">
                      <div class="text-flight-title div-width-600 d-flex">
                          <div *ngIf="trip.bookingsComboData && trip.bookingsComboData[0]" class="min-width-100 cls-text-overflow">
                            <div class="div-logo div-width-100">
                              <img class="img-logo" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[0].airlineName.trim().replace(' ','').toLowerCase() == 'vietjetair'" src="./assets/ic_airticket/ic_vietjet_b.png">
                              <img class="img-logo" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[0].airlineName.trim().replace(' ','').toLowerCase() == 'jetstar'" src="./assets/ic_airticket/ic_jetstar_b.png">
                              <img class="img-logo logo_vna" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[0].airlineName.trim().replace(' ','').toLowerCase() == 'vietnamairlines'"src="./assets/ic_airticket/logo_vna.png">
                              <img class="img-logo" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) &&  trip.bookingsComboData[0].airlineName.trim().replace(' ','').toLowerCase() == 'bambooairways'" src="./assets/ic_airticket/ic_bamboo_b.png">
                              <img class="img-logo " *ngIf=" (trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingjson && trip.bookingjson.length>0 && trip.bookingjson[0].Transits && trip.bookingjson[0].Transits[0]" [src]="trip.bookingjson[0].Transits[0].Logo">

                              <span class="text-code-fly p-left-8 m-top-6 p-absolute" *ngIf="trip.bookingsComboData[0].flightNumner && !trip.bookingsComboData[0].flightNumberNew">{{trip.bookingsComboData[0].flightNumner}}</span>
                              <span class="text-code-fly p-left-8 m-top-6 p-absolute" *ngIf="trip.bookingsComboData[0].flightNumberNew">{{trip.bookingsComboData[0].flightNumberNew}}</span>
                          </div>
                          
                          <div class="div-flightfrom">{{ trip.bookingsComboData[0].flightFrom }} <span class="m-left-4"> ({{trip.bookingsComboData[0].departCode}})</span></div>
                          <div *ngIf="trip.bookingsComboData[0].departureTime && !trip.bookingsComboData[0].departureTimeNew" class="text-time-fly">{{ trip.bookingsComboData[0].departureTime }} </div>
                          <div *ngIf="trip.bookingsComboData[0].departureTimeNew" class="text-time-fly">{{ trip.bookingsComboData[0].departureTimeNew }} </div>
                          <div class="text-flight-datetime">{{ trip.checkInDisplay }} </div>

                          </div>
                          <div class="div-flight-inout">
                              <img class="img-flight-inout" src="./assets/ic_mytripbooking/ico_2ways.svg" *ngIf="(trip.bookingsComboData && trip.bookingsComboData.length >1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && trip.bookingsComboData[1].airlineName && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1) else oneway">
                              <ng-template #oneway><img class="img-flight-inout img-oneway" src="../assets/ic_mytripbooking/ico_1way.svg"></ng-template>
                          </div> 
                          <div [ngClass]="(trip.bookingsComboData && trip.bookingsComboData.length >1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && trip.bookingsComboData[1].airlineName && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1) ? 'min-width-100 cls-text-overflow' : 'min-width-100 cls-text-overflow mt-30'">
                            <div class="div-logo div-width-100" *ngIf=" trip.bookingsComboData && trip.bookingsComboData.length >1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && trip.bookingsComboData[1].airlineName && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1">
                              <img class="img-logo" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[1] && trip.bookingsComboData[1].airlineName.trim().replace(' ','').toLowerCase() == 'vietjetair'" src="./assets/ic_airticket/ic_vietjet_b.png">
                              <img class="img-logo" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[1] && trip.bookingsComboData[1].airlineName.trim().replace(' ','').toLowerCase() == 'jetstar'" src="./assets/ic_airticket/ic_jetstar_b.png">
                              <img class="img-logo logo_vna" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[1] && trip.bookingsComboData[1].airlineName.trim().replace(' ','').toLowerCase() == 'vietnamairlines'"src="./assets/ic_airticket/logo_vna.png">
                              <img class="img-logo" *ngIf="!(trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingsComboData[1] &&  trip.bookingsComboData[1].airlineName.trim().replace(' ','').toLowerCase() == 'bambooairways'" src="./assets/ic_airticket/ic_bamboo_b.png">
                              <img class="img-logo " *ngIf=" (trip.isBookingVMBQT && trip.isTravelPort) && trip.bookingjson && trip.bookingjson.length>0 && trip.bookingjson[0].Transits && trip.bookingjson[0].Transits[1]" [src]="trip.bookingjson[0].Transits[1].Logo">

                              <span class="text-code-fly p-left-8 m-top-6 p-absolute" *ngIf="trip.bookingsComboData[1].flightNumner && !trip.bookingsComboData[1].flightNumberNew">{{trip.bookingsComboData[1].flightNumner}}</span>
                              <span class="text-code-fly p-left-8 m-top-6 p-absolute" *ngIf="trip.bookingsComboData[1].flightNumberNew ">{{trip.bookingsComboData[1].flightNumberNew}}</span>
                            </div>
                            <div class="div-flightto">{{ trip.bookingsComboData[0].flightTo }} <span class="m-left-4"> ({{trip.bookingsComboData[0].arrivalCode}})</span></div>
                            <div *ngIf="trip.bookingsComboData.length >1 && trip.bookingsComboData[1].departureTime && !trip.bookingsComboData[1].departureTimeNew && trip.bookingsComboData && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && (trip.bookingsComboData[1].airlineName && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1)" class="text-time-fly">{{ trip.bookingsComboData[1].departureTime }} </div>
                            <div *ngIf="trip.bookingsComboData.length >1 && trip.bookingsComboData[1].departureTimeNew && trip.bookingsComboData  && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && (trip.bookingsComboData[1].airlineName && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') == -1)" class="text-time-fly">{{ trip.bookingsComboData[1].departureTimeNew }} </div>
                            <div *ngIf="trip.bookingsComboData && trip.bookingsComboData.length >1 && ['GO', 'RETURN', 'GOROUNDTRIP', 'RETURNROUNDTRIP'].indexOf(trip.bookingsComboData[1].trip_Code) == -1 && trip.bookingsComboData[1].airlineName && trip.bookingsComboData[1].airlineName.toLowerCase().indexOf('cathay') != -1" class="text-time-fly">{{trip.bookingsComboData[0].arrivalTime}} </div>
                            <div *ngIf="trip.bookingsComboData && trip.bookingsComboData.length ==1" class="text-time-fly-1">{{trip.bookingsComboData[0].arrivalTime}} </div>
                            <div class="text-flight-datetime">{{ trip.checkOutDisplay }} </div>
                              
                          </div>
                      </div>
                    </div>
    
                      <!-- Hotel City -->
                      <div *ngIf="trip.booking_type == 'CB_FLY_HOTEL'" class="div-hotel-city">
                        <div class="div-split" style="margin-bottom:8px"></div>
                        <div>
                  
                          <div class="item-room p-top-0">
                              <div class="div-wrapimg">
                                  <!-- <img *ngIf="trip.avatar else noavatar" class="img-avatar" src="https:{{trip.avatar}}"> -->
                                  <div *ngIf="trip.avatar else noavatar">
                                    <img  class="img-avatar" src="{{trip.avatar}}">
                                    <!-- <img *ngIf="trip.avatar.indexOf('i.travelapi.com') != -1" class="img-avatar" src="{{trip.avatar}}"> -->
                                  </div>
                                  <ng-template #noavatar>
                                    <img class="img-avatar" src="https://cdn1.ivivu.com/iVivu/2018/02/07/15/noimage-104x104.png">
                                  </ng-template>
                                </div>
                                <div class="col-mytrip-text-description">
                                  <div class="text-left">
                                      <div class="div-first"  >
                                        <div *ngIf="trip.hotel_name">
                                          <ion-label style=" -webkit-box-orient: vertical" class="label-comboname f-bold p-top-0 div-name-hotel">{{trip.hotel_name}}
                                            <!-- <span class="trip-star" *ngIf="trip.RatingStar"><img *ngIf="trip.RatingStar!=0" src={{trip.RatingStar}}></span> -->
                                          </ion-label>
                                        </div>
                                          <ion-row >
                                            <ion-col size="1"  class="col-address">
                                              <img style="height:12px" src="./assets/ic_mytripbooking/calendar.svg">
                                            </ion-col>
                                            <ion-col class="col-address">
                                              <div class="d-flex">
                                                <div class="col-address">{{trip.checkInDisplayShort}}</div>
                                                <div class="img-arrow"> → </div>
                                                
                                                <div class="col-address">{{trip.checkOutDisplayShort}}</div>
                                              </div>
                                            </ion-col>
                                          </ion-row>
        
                                          <ion-row class="m-top-8">
                                            <ion-col size="1"  class="col-address">
                                              <img style="height:12px" src="./assets/ic_hoteldetail/ic_bed.svg">
                                            </ion-col>
                                            <ion-col class="col-address">
                                              <label class="col-address">{{trip.room_name}}</label> x <span class="col-address">{{trip.room_count}}</span>
                                            </ion-col>
                                          </ion-row>
        
                                          <ion-row class="m-top-8" *ngIf="trip.meal_plan">
                                            <ion-col size="1"  class="col-address">
                                              <img style="height:12px" src="./assets/ic_hoteldetail/ic_food_b.svg">
                                            </ion-col>
                                            <ion-col class="col-address">
                                              <label class="col-address">{{trip.meal_plan}}</label>
                                            </ion-col>
                                          </ion-row>
                                        
                                        </div>
                                  </div>
                                </div>
                          </div>
                        </div>
                      </div>  
                      <div class="div-line-new-1 margin-0-16"></div>
                        <!-- Thông tin phòng -->
                        <div *ngIf="trip.booking_type == 'CB_FLY_HOTEL'" class="margin-8-16 m-left-16 m-right-16 d-flex">
                          <div >
                            <div class="d-flex m-top-3">
                              <div class=" div-left"><img src="./assets/ic_facility/ic_people.svg"></div>
                              <div style="font-size: 14px;">{{trip.room_count}} phòng | {{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{ trip.textChildDisplay }}</span> <span class="p-l-4" *ngIf="trip.hasCathay"><img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/>Yêu cầu bảo hiểm</span></div>
                            </div>
                          </div>
                          <div *ngIf="(trip.payment_status == 0 && trip.delivery_payment_date_display) || trip.payment_status == 1 || trip.payment_status == 5"  class="p-absolute-16">
                            <img  class="cls-icon-img-detail"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                          </div>
                        </div>
                        
                        <div *ngIf="trip.booking_type != 'CB_FLY_HOTEL'" class="d-flex padding-8-16" >
                          <div>
                            <img src="./assets/imgs/ic_people.svg">
                            
                          </div>
                          <div class="mt4">
                            {{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span> <span class="p-l-4" *ngIf="trip.hasCathay && !trip.isBookingVMBQT"><img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/></span>
                          </div>
                          <div *ngIf="(trip.payment_status == 0 && trip.delivery_payment_date_display) || trip.payment_status == 1 || trip.payment_status == 5"  class="p-absolute-16">
                            <img  class="cls-icon-img-detail"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                          </div>
                        </div>
                        <div *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay && trip.priceShow" class="div-line-new-1 margin-0-16"></div>

                      
                        <div *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay && trip.priceShow" class="d-flex div-big-waitpayment padding-8-16">
                          <div>
                          
                            <div class="div-right-waitpayment">
                              {{gf.numberToCurrency(trip.amount_after_tax-trip.paid_amount, '.')}}<span style="font-size: 16px">đ</span>
                            </div>
                            <div class="div-left-waitpayment">
                              Thanh toán trước <span style="font-weight: bold">{{trip.deliveryPaymentDisplay}}</span>
                            </div>
                          </div>
                          <div (click)="showtripdetail(trip)" class="p-absolute-16 m-top-3">
                              <button ion-button round outline class="btn-waitpayment">Thanh toán</button>
                          </div>
                        </div>
                  </ng-template>

                  

                </div>
                <!-- bkg tour -->
                <ng-template #bookingtour>
                  <div class='item-booking-tour'>
                    <div [ngClass]="!trip.bookingOffType ? 'item-room padding-0' : 'item-bkgoff padding-0' ">

                      <div *ngIf="!trip.bookingOffType">
                          <div>
                            <div class="div-wrapimg img-list" >
                              <div *ngIf="trip.avatar else noavatar">
                                <img  class="img-avatar ava-list" src="{{trip.avatar}}">
                                <img *ngIf="trip.avatar.indexOf('i.travelapi.com') != -1" class="img-avatar ava-list" src="{{trip.avatar}}">
                              </div>
                              <ng-template #noavatar>
                                <img class="img-avatar ava-list" src="https://cdn1.ivivu.com/iVivu/2018/02/07/15/noimage-104x104.png">
                              </ng-template>
                            </div>
                            
                            <div class="col-mytrip-text-description ">
                              <div class="text-left">
                                <div class="tour-name">{{trip.hotel_name}}</div>
                                <!-- check in, checkout -->
                                  <ion-row class="row-height-listtrip p-top-8" >
                                    <ion-col size="1" class="col-address">
                                      <img class="h-15" src="./assets/imgs/ic_date.svg">
                                      
                                    </ion-col>
                                    <ion-col  class="col-address" *ngIf="trip.booking_type == 'TOUR'">
                                      {{trip.checkInDisplayCity}} → {{trip.checkOutDisplayCity}}
                                    </ion-col>

                                    <ion-col  class="col-address" *ngIf="trip.booking_type == 'TICKET'">
                                      {{trip.VVCCheckinDisplay}}
                                    </ion-col>
                                  </ion-row>

                                  <ion-row class="row-height-listtrip p-top-4" *ngIf="trip.booking_type == 'TICKET'">
                                    <ion-col size="1" class="col-address">
                                      <img class="h-15" src="./assets/ic_ticket/ticket.svg">
                                      
                                    </ion-col>
                                  
                                    <ion-col  class="col-ticket-name">
                                      <label >{{trip.combo_name}}</label>
                                    </ion-col>
                                  </ion-row>
                              </div>
                            </div>
                          </div>
                          <div  *ngIf="trip.booking_type == 'TICKET'" class="d-flex m-top-24">
                            <img *ngIf="trip.address"  src="./assets/ic_ticket/booth.svg">
                            <div *ngIf="trip.address"  class="text-info m-left-4 text-overflow-ellipsis">{{trip.address}}</div>
                          </div>
                          <div class="div-line-tour"></div>
                          <div>
                            <!-- pax -->
                            <ion-row class="row-height-listtrip" *ngIf="trip.totalPaxStr && trip.booking_type != 'TICKET'">
                              <ion-col size="0.6" class="col-address">
                                <img style="height:12px" src="./assets/imgs/ic_people.svg">
                              </ion-col>
                              <ion-col  class="col-address">
                                {{trip.totalPaxStr}} 
                                <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span>
                                <span *ngIf="trip.childAgesDisplay">{{trip.childAgesDisplay}}</span>
                                <span class="p-l-4" *ngIf="trip.hasCathay && !trip.isBookingVMBQT"><img src="https://member.ivivu.com/assets/img/dashboard_trips/cathay.png"/></span>
                              </ion-col>
                              <ion-col size="1" class="col-img-tour">
                                <img class='img-arrow-tour' src="./assets/ic_tour/arrow_tour_mytrip.svg">
                              </ion-col>
                            </ion-row>

                            <ion-row class="row-height-listtrip" *ngIf="trip.booking_type == 'TICKET'">
                              <ion-col size="0.6" class="col-address">
                                <img style="height:12px" src="./assets/imgs/ic_people.svg">
                              </ion-col>
                              <ion-col  class="col-address">
                                {{trip.paxDisplay}} 
                                <!-- <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span>
                                <span *ngIf="trip.childAgesDisplay">{{trip.childAgesDisplay}}</span>
                                <span class="p-l-4" *ngIf="trip.hasCathay"><img src="https://beta-member.ivivu.com/assets/img/dashboard_trips/cathay.png"/></span> -->
                              </ion-col>
                            
                            </ion-row>
                          </div>
                      </div>

                    <div *ngIf="trip.bookingOffType" class="div-bkgoff-listitem">
                          <div class="bkgoff-title">{{trip.hotel_name}}</div>
                          <div class="bkgoff-cincout d-flex p-top-3">
                            <div class="bkgoff-info">
                              <img style="height:12px" src="./assets/imgs/ic_date.svg">
                            </div>
                            <div class="bkgoff-info p-l-4">
                              {{trip.checkInDisplayCity}} → {{trip.checkOutDisplayCity}}
                            </div>
                          </div>
                          <div class="bkgoff-roomname  p-top-3">{{trip.room_name}}</div>
                          <div class="bkgoff-otherinfo">
                            <div *ngIf="trip.bookingOffType == 1">
                                <div class="bkgoff-info">
                                {{trip.room_count}} phòng | {{trip.totalPaxStr}} <span *ngIf="trip.textChildDisplay">{{trip.textChildDisplay}}</span>
                                </div>
                            </div>
                            <div *ngIf="trip.bookingOffType != 1 && trip.off_sup_code" class="bkgoff-info">
                                Mã booking: {{trip.off_sup_code}}
                            </div>
                          </div>
                          </div>

                          <div *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay && trip.priceShow" class="div-line-new-1"></div>
                          <div *ngIf="trip.payment_status == 0 && trip.deliveryPaymentDisplay && trip.priceShow" class="d-flex div-big-waitpayment m-top-8 m-bottom-16">
                            <div>
                            
                              <div class="div-right-waitpayment">
                                {{trip.priceShow}}<span style="font-size: 16px">đ</span>
                              </div>
                              <div class="div-left-waitpayment">
                                Thanh toán trước <span style="font-weight: bold">{{trip.deliveryPaymentDisplay}}</span>
                              </div>
                            </div>
                            <div  class="p-absolute-16 m-top-3">
                                <button ion-button round outline class="btn-waitpayment">Thanh toán</button>
                            </div>
                          </div>
                    </div>

                    
                  </div>
                      
                </ng-template>
                
              
              </ion-item-group>
              <!-- <div class="div-split-listtrip"></div> -->
              <div *ngIf="!trip.hadCheckinOnline && trip.bookingjson  && (trip.payment_status == 1 || trip.payment_status == 5)"  class="div-line-new-1 m-0-16"></div>
              <div *ngIf="!trip.hadCheckinOnline && trip.bookingjson  && (trip.payment_status == 1 || trip.payment_status == 5) "  class="d-flex div-checkin-online-1">
               
                <div class="div-text-checkin-online">Yêu cầu Checkin-Online</div>
                <div class="cls-toggle"><ion-toggle [disabled]="trip.bookingjson[0].RequestCheckin==1 || trip.ischeckinOnl" (ionChange)="checkinOnline(trip)" [checked]="trip.bookingjson[0].RequestCheckin==1"></ion-toggle></div>
              </div>
              <div *ngIf="trip.bookingjson  && (trip.payment_status == 1 || trip.payment_status == 5)  && trip.textCheckinOnline"  class="text-note margin-16">
                {{trip.textCheckinOnline}} 
            </div>
          
               <!-- Checkin online -->
               <div *ngIf="trip.hadCheckinOnline" class="div-line-new-1 m-0-16"></div>
               <div *ngIf="trip.isFlyBooking && trip.hadCheckinOnline" class="div-checkin-online">
                <div class="d-flex">
                  <div class="div-icon-check">
                    <img  class="img-check"  src="./assets/ic_mytripbooking/check.svg">
                  </div>
                  <div class="div-text-checkin">Đã có thẻ lên máy bay (Boarding Pass)</div>
                </div>
                
                 <!-- <div class="div-icon-arrow">
                   <img  class="img-arrow"  src="./assets/ic_mytripbooking/ico_arrow.svg">
                 </div> -->
                 <div  class="text-title-broading m-top-12" *ngIf="trip.hadCheckinOnlineDepart">
                  Chiều đi
                </div>
                 <div *ngFor="let pass of trip.bookingjson[0].Passengers; let idx = index">
                  <div class="d-flex align-items-end m-top-12"  *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
           
                      <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                      <img  (click)="downloadimg(pass,trip)"  src="./assets/ic_mytripbooking/download.svg">
                      <img  (click)="share(pass.CheckinInfo)" class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                  </div>
              </div>
              <div  class="text-title-broading m-top-12" *ngIf="trip.hadCheckinOnlineReturn">
                Chiều về
              </div>
             
              <div *ngIf="trip.bookingjson[1] && trip.bookingjson[1].Passengers[0].CheckinInfo">
                <div *ngFor="let pass of trip.bookingjson[1].Passengers; let idx = index">
                  <div class="d-flex  align-items-end m-top-12"  *ngIf="pass.CheckinInfo && pass.CheckinInfo.indexOf('http') != -1">
               
                    <label class="witdh-204" (click)="openWebpage(pass.CheckinInfo)">{{pass.Gender}}. <span class="div-name">{{pass.Name}}</span> </label>
                    <img (click)="downloadimg(pass,trip)"  src="./assets/ic_mytripbooking/download.svg">
                    <img (click)="share(pass.CheckinInfo)"  class="m-left-8px"  src="./assets/ic_mytripbooking/share.svg">
                </div>
                </div>
                </div>
               </div>
             
              
            </div>
          
          </div>
        
        </ng-template>

      </ion-list>
    </ng-template>
   
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)" *ngIf="listMyTrips.length > 1 && listMyTrips.length < totalTrip" #divshowlisttrip>
      <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll> 

    <!-- <div *ngIf="!loginuser" class="trip-empty">
      <div class="img-trip-empty">
        <img class="img-empty" src="./assets/empty/trip_empty.svg">
      </div>
      <div class="text-trip-empty">
        <label>Quý khách chưa có chuyến đi nào với iVIVU.</label>
      </div>
      <div class="button-trip-empty">
        <button ion-button round outline class="button btn-trip-empty" (click)="goback()">Khám phá ngay</button>
      </div>
    </div> -->

  </div>
  
  </div>
  <div *ngIf="activeTabTrip ==3" class="p-history">
    <app-mytriphistory></app-mytriphistory>
  </div>
  <ng-template #emptydata>
    <div *ngIf="!loginuser &&hasloaddata">
      <div  class="trip-empty-no-login">
        <div class="img-trip-empty-1">
          <img class="img-empty" src="./assets/iconaccount/login_img.svg">
        </div>
        <div class="text-notrip m-top-8">
          <div>Quý khách chưa đăng nhập.</div>
          <div>Vui lòng đăng nhập hoặc đăng ký để quản lý thông tin chuyến đi</div>
        </div>
        <div >
          
          <div class="d-flex m-t-16">
            <div (click)="goToLogin()" class="div-width-50">
                <button ion-button round outline class="btn-login">Đăng nhập</button>
              </div>
              <div (click)="goToRegister()" class="div-width-50 margin-left-6">
                <button ion-button round outline class="btn-register">Đăng ký</button>
              </div>
        </div>
        </div>
      </div>
     
    </div> 

    <div *ngIf="(((hasloaddata) ) && loginuser) && activeTabTrip ==1">
      <div *ngIf="listMyTrips.length == 0"  class="trip-empty">
        <div class="img-trip-empty-1">
          <img class="img-empty" src="./assets/empty/no_trip.svg">
        </div>
        <div class="text-notrip m-top-8">
          <div>Quý khách chưa có chuyến đi nào.</div>
          <div>Khám phá thêm các ưu đãi hấp dẫn của iVIVU ngay hôm nay</div>
        </div>
        <div >
          
          <div class="div-button-combo-suggest m-top-24">
            <button ion-button round outline class="button btn-next" (click)="viewComboList()">Khám phá các ưu đãi tốt nhất</button>
          </div>
        </div>
      </div>
     
    </div> 
    <div *ngIf="loginuser&&!hasloaddata" style="height: 100%;width:100%;padding: 16px; padding-top: 100px">
      <div>
        <ion-skeleton-text animated style="width:100%;margin: 0;height: 16px;margin-bottom: 16px"></ion-skeleton-text>
      </div>
      <div>
        <div class="div-sk-detail">
          <ion-row class="row-item-hoteldetail-sk">
            <ion-col size="4" style="padding: 0">
              <ion-skeleton-text animated
                style="width:104px;height:104px;border-radius:6px;margin:0;"></ion-skeleton-text>
            </ion-col>
            <ion-col size="8" class="col-description-hoteldetail-sk" style="line-height: 16px;padding-top: 0">
              <ion-skeleton-text animated style="width: 50%;margin: 0;height: 16px;"></ion-skeleton-text>
              <ion-skeleton-text animated style="width: 100%;margin: 0;margin-top:40px;height: 16px;">
              </ion-skeleton-text>
              <ion-skeleton-text animated style="width: 50%;margin: 0;margin-top:16px;height: 16px;">
              </ion-skeleton-text>
            </ion-col>
          </ion-row>
          <ion-row class="row-item-description-sk">
            <ion-skeleton-text animated style="width: 104px;margin: 0;margin-top:32px;height: 16px;">
            </ion-skeleton-text>
            <ion-skeleton-text animated style="width: 83%;margin: 0;margin-top:16px;height: 16px;">
            </ion-skeleton-text>
            <ion-skeleton-text animated style="width: 67%;margin: 0;margin-top:16px;height: 16px;">
            </ion-skeleton-text>
            <ion-skeleton-text animated style="width: 100%;margin: 0;margin-top:16px;height: 16px;">
            </ion-skeleton-text>
            <ion-skeleton-text animated style="width: 67%;margin: 0;margin-top:16px;height: 16px;">
            </ion-skeleton-text>
          </ion-row>
          <ion-row class="row-item-button-sk">
            <ion-skeleton-text animated
              style="width: 100%;margin: 0;height: 48px;border-radius: 6px;margin-top:48px"></ion-skeleton-text>
          </ion-row>
        </div>
      </div>

    </div>
  </ng-template>
  
</ion-content>
